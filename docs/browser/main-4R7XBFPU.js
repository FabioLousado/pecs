var K0=Object.defineProperty,Q0=Object.defineProperties;var Y0=Object.getOwnPropertyDescriptors;var Lv=Object.getOwnPropertySymbols;var J0=Object.prototype.hasOwnProperty,X0=Object.prototype.propertyIsEnumerable;var Vv=(t,e,n)=>e in t?K0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,b=(t,e)=>{for(var n in e||={})J0.call(e,n)&&Vv(t,n,e[n]);if(Lv)for(var n of Lv(e))X0.call(e,n)&&Vv(t,n,e[n]);return t},ae=(t,e)=>Q0(t,Y0(e));var p=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(u){i(u)}},o=c=>{try{a(n.throw(c))}catch(u){i(u)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});var Uv=null;var Pd=1,jv=Symbol("SIGNAL");function ct(t){let e=Uv;return Uv=t,e}var Bv={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Z0(t){if(!(kd(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Pd)){if(!t.producerMustRecompute(t)&&!xd(t)){t.dirty=!1,t.lastCleanEpoch=Pd;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Pd}}function $v(t){return t&&(t.nextProducerIndex=0),ct(t)}function Hv(t,e){if(ct(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(kd(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Od(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function xd(t){Ha(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(Z0(n),r!==n.version))return!0}return!1}function qv(t){if(Ha(t),kd(t))for(let e=0;e<t.producerNode.length;e++)Od(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function Od(t,e){if(eA(t),Ha(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)Od(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Ha(i),i.producerIndexOfThis[r]=e}}function kd(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Ha(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function eA(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function tA(){throw new Error}var nA=tA;function zv(t){nA=t}function L(t){return typeof t=="function"}function pi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var qa=pi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function pr(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ie=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(L(r))try{r()}catch(s){e=s instanceof qa?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{Gv(s)}catch(o){e=e??[],o instanceof qa?e=[...e,...o.errors]:e.push(o)}}if(e)throw new qa(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Gv(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&pr(n,e)}remove(e){let{_finalizers:n}=this;n&&pr(n,e),e instanceof t&&e._removeParent(this)}};Ie.EMPTY=(()=>{let t=new Ie;return t.closed=!0,t})();var Fd=Ie.EMPTY;function za(t){return t instanceof Ie||t&&"closed"in t&&L(t.remove)&&L(t.add)&&L(t.unsubscribe)}function Gv(t){L(t)?t():t.unsubscribe()}var Nt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var gi={setTimeout(t,e,...n){let{delegate:r}=gi;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=gi;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Ga(t){gi.setTimeout(()=>{let{onUnhandledError:e}=Nt;if(e)e(t);else throw t})}function zs(){}var Wv=Ld("C",void 0,void 0);function Kv(t){return Ld("E",void 0,t)}function Qv(t){return Ld("N",t,void 0)}function Ld(t,e,n){return{kind:t,value:e,error:n}}var gr=null;function mi(t){if(Nt.useDeprecatedSynchronousErrorHandling){let e=!gr;if(e&&(gr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=gr;if(gr=null,n)throw r}}else t()}function Yv(t){Nt.useDeprecatedSynchronousErrorHandling&&gr&&(gr.errorThrown=!0,gr.error=t)}var mr=class extends Ie{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,za(e)&&e.add(this)):this.destination=sA}static create(e,n,r){return new yi(e,n,r)}next(e){this.isStopped?Ud(Qv(e),this):this._next(e)}error(e){this.isStopped?Ud(Kv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ud(Wv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},rA=Function.prototype.bind;function Vd(t,e){return rA.call(t,e)}var jd=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Wa(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Wa(r)}else Wa(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Wa(n)}}},yi=class extends mr{constructor(e,n,r){super();let i;if(L(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Nt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Vd(e.next,s),error:e.error&&Vd(e.error,s),complete:e.complete&&Vd(e.complete,s)}):i=e}this.destination=new jd(i)}};function Wa(t){Nt.useDeprecatedSynchronousErrorHandling?Yv(t):Ga(t)}function iA(t){throw t}function Ud(t,e){let{onStoppedNotification:n}=Nt;n&&gi.setTimeout(()=>n(t,e))}var sA={closed:!0,next:zs,error:iA,complete:zs};var vi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ut(t){return t}function Bd(...t){return $d(t)}function $d(t){return t.length===0?ut:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var q=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=aA(n)?n:new yi(n,r,i);return mi(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=Jv(r),new r((i,s)=>{let o=new yi({next:a=>{try{n(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[vi](){return this}pipe(...n){return $d(n)(this)}toPromise(n){return n=Jv(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Jv(t){var e;return(e=t??Nt.Promise)!==null&&e!==void 0?e:Promise}function oA(t){return t&&L(t.next)&&L(t.error)&&L(t.complete)}function aA(t){return t&&t instanceof mr||oA(t)&&za(t)}function Hd(t){return L(t?.lift)}function J(t){return e=>{if(Hd(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function z(t,e,n,r,i){return new qd(t,e,n,r,i)}var qd=class extends mr{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function _i(){return J((t,e)=>{let n=null;t._refCount++;let r=z(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var wi=class extends q{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Hd(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ie;let n=this.getSubject();e.add(this.source.subscribe(z(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ie.EMPTY)}return e}refCount(){return _i()(this)}};var Xv=pi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var lt=(()=>{class t extends q{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Ka(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Xv}next(n){mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){mi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?Fd:(this.currentObservers=null,s.push(n),new Ie(()=>{this.currentObservers=null,pr(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new q;return n.source=this,n}}return t.create=(e,n)=>new Ka(e,n),t})(),Ka=class extends lt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:Fd}};var Re=class extends lt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var zd={now(){return(zd.delegate||Date).now()},delegate:void 0};var Qa=class extends Ie{constructor(e,n){super()}schedule(e,n=0){return this}};var Gs={setInterval(t,e,...n){let{delegate:r}=Gs;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Gs;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var Ii=class extends Qa{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Gs.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Gs.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,pr(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ei=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};Ei.now=zd.now;var Di=class extends Ei{constructor(e,n=Ei.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var Gd=new Di(Ii);var Ya=class extends Ii{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Ja=class extends Di{};var Wd=new Ja(Ya);var _t=new q(t=>t.complete());function Zv(t){return t&&L(t.schedule)}function e_(t){return t[t.length-1]}function Xa(t){return L(e_(t))?t.pop():void 0}function Fn(t){return Zv(e_(t))?t.pop():void 0}function Kd(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function n_(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(l){try{u(r.next(l))}catch(d){o(d)}}function c(l){try{u(r.throw(l))}catch(d){o(d)}}function u(l){l.done?s(l.value):i(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function t_(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function yr(t){return this instanceof yr?(this.v=t,this):new yr(t)}function r_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,_){s.push([h,f,g,_])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(s[0][3],g)}}function c(h){h.value instanceof yr?Promise.resolve(h.value.v).then(u,l):d(s[0][2],h)}function u(h){a("next",h)}function l(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function i_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof t_=="function"?t_(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(u){s({value:u,done:a})},o)}}var Za=t=>t&&typeof t.length=="number"&&typeof t!="function";function ec(t){return L(t?.then)}function tc(t){return L(t[vi])}function nc(t){return Symbol.asyncIterator&&L(t?.[Symbol.asyncIterator])}function rc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function cA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ic=cA();function sc(t){return L(t?.[ic])}function oc(t){return r_(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield yr(n.read());if(i)return yield yr(void 0);yield yield yr(r)}}finally{n.releaseLock()}})}function ac(t){return L(t?.getReader)}function be(t){if(t instanceof q)return t;if(t!=null){if(tc(t))return uA(t);if(Za(t))return lA(t);if(ec(t))return dA(t);if(nc(t))return s_(t);if(sc(t))return hA(t);if(ac(t))return fA(t)}throw rc(t)}function uA(t){return new q(e=>{let n=t[vi]();if(L(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function lA(t){return new q(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function dA(t){return new q(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Ga)})}function hA(t){return new q(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function s_(t){return new q(e=>{pA(t,e).catch(n=>e.error(n))})}function fA(t){return s_(oc(t))}function pA(t,e){var n,r,i,s;return n_(this,void 0,void 0,function*(){try{for(n=i_(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function et(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Ln(t,e=0){return J((n,r)=>{n.subscribe(z(r,i=>et(r,t,()=>r.next(i),e),()=>et(r,t,()=>r.complete(),e),i=>et(r,t,()=>r.error(i),e)))})}function Vn(t,e=0){return J((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function o_(t,e){return be(t).pipe(Vn(e),Ln(e))}function a_(t,e){return be(t).pipe(Vn(e),Ln(e))}function c_(t,e){return new q(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function u_(t,e){return new q(n=>{let r;return et(n,e,()=>{r=t[ic](),et(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>L(r?.return)&&r.return()})}function cc(t,e){if(!t)throw new Error("Iterable cannot be null");return new q(n=>{et(n,e,()=>{let r=t[Symbol.asyncIterator]();et(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function l_(t,e){return cc(oc(t),e)}function d_(t,e){if(t!=null){if(tc(t))return o_(t,e);if(Za(t))return c_(t,e);if(ec(t))return a_(t,e);if(nc(t))return cc(t,e);if(sc(t))return u_(t,e);if(ac(t))return l_(t,e)}throw rc(t)}function fe(t,e){return e?d_(t,e):be(t)}function O(...t){let e=Fn(t);return fe(t,e)}function Ti(t,e){let n=L(t)?t:()=>t,r=i=>i.error(n());return new q(e?i=>e.schedule(r,0,i):r)}function Qd(t){return!!t&&(t instanceof q||L(t.lift)&&L(t.subscribe))}var mn=pi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function B(t,e){return J((n,r)=>{let i=0;n.subscribe(z(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:gA}=Array;function mA(t,e){return gA(e)?t(...e):t(e)}function uc(t){return B(e=>mA(t,e))}var{isArray:yA}=Array,{getPrototypeOf:vA,prototype:_A,keys:wA}=Object;function lc(t){if(t.length===1){let e=t[0];if(yA(e))return{args:e,keys:null};if(IA(e)){let n=wA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function IA(t){return t&&typeof t=="object"&&vA(t)===_A}function dc(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function hc(...t){let e=Fn(t),n=Xa(t),{args:r,keys:i}=lc(t);if(r.length===0)return fe([],e);let s=new q(EA(r,e,i?o=>dc(i,o):ut));return n?s.pipe(uc(n)):s}function EA(t,e,n=ut){return r=>{h_(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let c=0;c<i;c++)h_(e,()=>{let u=fe(t[c],e),l=!1;u.subscribe(z(r,d=>{s[c]=d,l||(l=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function h_(t,e,n){t?et(n,t,e):e()}function f_(t,e,n,r,i,s,o,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&e.complete()},f=_=>u<r?g(_):c.push(_),g=_=>{s&&e.next(_),u++;let m=!1;be(n(_,l++)).subscribe(z(e,w=>{i?.(w),s?f(w):e.next(w)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;c.length&&u<r;){let w=c.shift();o?et(e,o,()=>g(w)):g(w)}h()}catch(w){e.error(w)}}))};return t.subscribe(z(e,f,()=>{d=!0,h()})),()=>{a?.()}}function Me(t,e,n=1/0){return L(e)?Me((r,i)=>B((s,o)=>e(r,s,i,o))(be(t(r,i))),n):(typeof e=="number"&&(n=e),J((r,i)=>f_(r,i,t,n)))}function Yd(t=1/0){return Me(ut,t)}function p_(){return Yd(1)}function bi(...t){return p_()(fe(t,Fn(t)))}function fc(t){return new q(e=>{be(t()).subscribe(e)})}function Jd(...t){let e=Xa(t),{args:n,keys:r}=lc(t),i=new q(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),c=o,u=o;for(let l=0;l<o;l++){let d=!1;be(n[l]).subscribe(z(s,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||s.next(r?dc(r,a):a),s.complete())}))}});return e?i.pipe(uc(e)):i}function dt(t,e){return J((n,r)=>{let i=0;n.subscribe(z(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Un(t){return J((e,n)=>{let r=null,i=!1,s;r=e.subscribe(z(n,void 0,void 0,o=>{s=be(t(o,Un(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function g_(t,e,n,r,i){return(s,o)=>{let a=n,c=e,u=0;s.subscribe(z(o,l=>{let d=u++;c=a?t(c,l,d):(a=!0,l),r&&o.next(c)},i&&(()=>{a&&o.next(c),o.complete()})))}}function jn(t,e){return L(e)?Me(t,e,1):Me(t,1)}function Bn(t){return J((e,n)=>{let r=!1;e.subscribe(z(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function yn(t){return t<=0?()=>_t:J((e,n)=>{let r=0;e.subscribe(z(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Xd(t){return B(()=>t)}function pc(t=DA){return J((e,n)=>{let r=!1;e.subscribe(z(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function DA(){return new mn}function $n(t){return J((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function zt(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dt((i,s)=>t(i,s,r)):ut,yn(1),n?Bn(e):pc(()=>new mn))}function Ci(t){return t<=0?()=>_t:J((e,n)=>{let r=[];e.subscribe(z(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Zd(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dt((i,s)=>t(i,s,r)):ut,Ci(1),n?Bn(e):pc(()=>new mn))}function eh(t,e){return J(g_(t,e,arguments.length>=2,!0))}function th(...t){let e=Fn(t);return J((n,r)=>{(e?bi(t,n,e):bi(t,n)).subscribe(r)})}function ht(t,e){return J((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(z(r,c=>{i?.unsubscribe();let u=0,l=s++;be(t(c,l)).subscribe(i=z(r,d=>r.next(e?e(c,d,l,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function nh(t){return J((e,n)=>{be(t).subscribe(z(n,()=>n.complete(),zs)),!n.closed&&e.subscribe(n)})}function Ee(t,e,n){let r=L(t)||e||n?{next:t,error:e,complete:n}:t;return r?J((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(z(s,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),s.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),s.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),s.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ut}var Z_="https://g.co/ng/security#xss",M=class extends Error{constructor(e,n){super(Hc(e,n)),this.code=e}};function Hc(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function ue(t){for(let e in t)if(t[e]===ue)return e;throw Error("Could not find renamed property on target object.")}function TA(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Je(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Je).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function m_(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var bA=ue({__forward_ref__:ue});function uo(t){return t.__forward_ref__=uo,t.toString=function(){return Je(this())},t}function Ye(t){return ew(t)?t():t}function ew(t){return typeof t=="function"&&t.hasOwnProperty(bA)&&t.__forward_ref__===uo}function tw(t){return t&&!!t.\u0275providers}var CA=ue({\u0275cmp:ue}),AA=ue({\u0275dir:ue}),SA=ue({\u0275pipe:ue}),RA=ue({\u0275mod:ue}),Dc=ue({\u0275fac:ue}),Ws=ue({__NG_ELEMENT_ID__:ue}),y_=ue({__NG_ENV_ID__:ue});function tf(t){return typeof t=="string"?t:t==null?"":String(t)}function MA(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():tf(t)}function NA(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new M(-200,`Circular dependency in DI detected for ${t}${n}`)}function nf(t,e){throw new M(-201,!1)}function PA(t,e){t==null&&xA(e,t,null,"!=")}function xA(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(r==null?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}function S(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function nt(t){return{providers:t.providers||[],imports:t.imports||[]}}function qc(t){return v_(t,rw)||v_(t,iw)}function nw(t){return qc(t)!==null}function v_(t,e){return t.hasOwnProperty(e)?t[e]:null}function OA(t){let e=t&&(t[rw]||t[iw]);return e||null}function __(t){return t&&(t.hasOwnProperty(w_)||t.hasOwnProperty(kA))?t[w_]:null}var rw=ue({\u0275prov:ue}),w_=ue({\u0275inj:ue}),iw=ue({ngInjectableDef:ue}),kA=ue({ngInjectorDef:ue}),H=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(H||{}),vh;function FA(){return vh}function wt(t){let e=vh;return vh=t,e}function sw(t,e,n){let r=qc(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&H.Optional)return null;if(e!==void 0)return e;nf(t,"Injector")}var Ks=globalThis;var A=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=S({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};var LA={},Js=LA,_h="__NG_DI_FLAG__",Tc="ngTempTokenPath",VA="ngTokenPath",UA=/\n/gm,jA="\u0275",I_="__source",Qs;function Hn(t){let e=Qs;return Qs=t,e}function BA(t,e=H.Default){if(Qs===void 0)throw new M(-203,!1);return Qs===null?sw(t,void 0,e):Qs.get(t,e&H.Optional?null:void 0,e)}function N(t,e=H.Default){return(FA()||BA)(Ye(t),e)}function D(t,e=H.Default){return N(t,zc(e))}function zc(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function wh(t){let e=[];for(let n=0;n<t.length;n++){let r=Ye(t[n]);if(Array.isArray(r)){if(r.length===0)throw new M(900,!1);let i,s=H.Default;for(let o=0;o<r.length;o++){let a=r[o],c=$A(a);typeof c=="number"?c===-1?i=a.token:s|=c:i=a}e.push(N(i,s))}else e.push(N(r))}return e}function ow(t,e){return t[_h]=e,t.prototype[_h]=e,t}function $A(t){return t[_h]}function HA(t,e,n,r){let i=t[Tc];throw e[I_]&&i.unshift(e[I_]),t.message=qA(`
`+t.message,i,n,r),t[VA]=i,t[Tc]=null,t}function qA(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==jA?t.slice(2):t;let i=Je(e);if(Array.isArray(e))i=e.map(Je).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Je(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(UA,`
  `)}`}function lo(t){return{toString:t}.toString()}var aw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(aw||{}),Kt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Kt||{}),Ni={},It=[],Dt=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Dt||{});function cw(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Ih(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];GA(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function zA(t){return t===3||t===4||t===6}function GA(t){return t.charCodeAt(0)===64}function Xs(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?E_(t,n,i,null,e[++r]):E_(t,n,i,null,null))}}return t}function E_(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var uw="ng-template";function WA(t,e,n){let r=0,i=!0;for(;r<t.length;){let s=t[r++];if(typeof s=="string"&&i){let o=t[r++];if(n&&s==="class"&&cw(o.toLowerCase(),e,0)!==-1)return!0}else if(s===1){for(;r<t.length&&typeof(s=t[r++])=="string";)if(s.toLowerCase()===e)return!0;return!1}else typeof s=="number"&&(i=!1)}return!1}function lw(t){return t.type===4&&t.value!==uw}function KA(t,e,n){let r=t.type===4&&!n?uw:t.value;return e===r}function QA(t,e,n){let r=4,i=t.attrs||[],s=XA(i),o=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!o&&!Pt(r)&&!Pt(c))return!1;if(o&&Pt(c))continue;o=!1,r=c|r&1;continue}if(!o)if(r&4){if(r=2|r&1,c!==""&&!KA(t,c,n)||c===""&&e.length===1){if(Pt(r))return!1;o=!0}}else{let u=r&8?c:e[++a];if(r&8&&t.attrs!==null){if(!WA(t.attrs,u,n)){if(Pt(r))return!1;o=!0}continue}let l=r&8?"class":c,d=YA(l,i,lw(t),n);if(d===-1){if(Pt(r))return!1;o=!0;continue}if(u!==""){let h;d>s?h="":h=i[d+1].toLowerCase();let f=r&8?h:null;if(f&&cw(f,u,0)!==-1||r&2&&u!==h){if(Pt(r))return!1;o=!0}}}}return Pt(r)||o}function Pt(t){return(t&1)===0}function YA(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return ZA(e,t)}function JA(t,e,n=!1){for(let r=0;r<e.length;r++)if(QA(t,e[r],n))return!0;return!1}function XA(t){for(let e=0;e<t.length;e++){let n=t[e];if(zA(n))return e}return t.length}function ZA(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function D_(t,e){return t?":not("+e.trim()+")":e}function eS(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!Pt(o)&&(e+=D_(s,i),i=""),r=o,s=s||!Pt(r);n++}return i!==""&&(e+=D_(s,i)),e}function tS(t){return t.map(eS).join(",")}function nS(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!Pt(i))break;i=s}r++}return{attrs:e,classes:n}}function $e(t){return lo(()=>{let e=gw(t),n=ae(b({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===aw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Kt.Emulated,styles:t.styles||It,_:null,schemas:t.schemas||null,tView:null,id:""});mw(n);let r=t.dependencies;return n.directiveDefs=b_(r,!1),n.pipeDefs=b_(r,!0),n.id=sS(n),n})}function rS(t){return wr(t)||dw(t)}function iS(t){return t!==null}function rt(t){return lo(()=>({type:t.type,bootstrap:t.bootstrap||It,declarations:t.declarations||It,imports:t.imports||It,exports:t.exports||It,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function T_(t,e){if(t==null)return Ni;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Dt.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Dt.None?[r,a]:r,e[s]=o):n[s]=r}return n}function kt(t){return lo(()=>{let e=gw(t);return mw(e),e})}function wr(t){return t[CA]||null}function dw(t){return t[AA]||null}function hw(t){return t[SA]||null}function fw(t){let e=wr(t)||dw(t)||hw(t);return e!==null?e.standalone:!1}function pw(t,e){let n=t[RA]||null;if(!n&&e===!0)throw new Error(`Type ${Je(t)} does not have '\u0275mod' property.`);return n}function gw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ni,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||It,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:T_(t.inputs,e),outputs:T_(t.outputs),debugInfo:null}}function mw(t){t.features?.forEach(e=>e(t))}function b_(t,e){if(!t)return null;let n=e?hw:rS;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(iS)}function sS(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}var Dn=0,Q=1,F=2,Be=3,xt=4,Ft=5,bc=6,Zs=7,Ot=8,Pi=9,vn=10,ke=11,eo=12,C_=13,Ui=14,Qt=15,Gc=16,Ai=17,to=18,Wc=19,yw=20,Ys=21,rh=22,Ir=23,_n=25,vw=1;var Er=7,Cc=8,Ac=9,Et=10,rf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(rf||{});function vr(t){return Array.isArray(t)&&typeof t[vw]=="object"}function Tn(t){return Array.isArray(t)&&t[vw]===!0}function sf(t){return(t.flags&4)!==0}function Kc(t){return t.componentOffset>-1}function Qc(t){return(t.flags&1)===1}function qn(t){return!!t.template}function oS(t){return(t[F]&512)!==0}function xi(t,e){let n=t.hasOwnProperty(Dc);return n?t[Dc]:null}var Eh=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function _w(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Wn(){return ww}function ww(t){return t.type.prototype.ngOnChanges&&(t.setInput=cS),aS}Wn.ngInherit=!0;function aS(){let t=Ew(this),e=t?.current;if(e){let n=t.previous;if(n===Ni)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function cS(t,e,n,r,i){let s=this.declaredInputs[r],o=Ew(t)||uS(t,{previous:Ni,current:null}),a=o.current||(o.current={}),c=o.previous,u=c[s];a[s]=new Eh(u&&u.currentValue,n,c===Ni),_w(t,e,i,n)}var Iw="__ngSimpleChanges__";function Ew(t){return t[Iw]||null}function uS(t,e){return t[Iw]=e}var A_=null;var Gt=function(t,e,n){A_?.(t,e,n)},lS="svg",dS="math",hS=!1;function fS(){return hS}function Yt(t){for(;Array.isArray(t);)t=t[Dn];return t}function Dw(t,e){return Yt(e[t])}function Lt(t,e){return Yt(e[t.index])}function Tw(t,e){return t.data[e]}function Kn(t,e){let n=e[t];return vr(n)?n:n[Dn]}function of(t){return(t[F]&128)===128}function pS(t){return Tn(t[Be])}function Oi(t,e){return e==null?null:t[e]}function bw(t){t[Ai]=0}function gS(t){t[F]&1024||(t[F]|=1024,of(t)&&no(t))}function mS(t,e){for(;t>0;)e=e[Ui],t--;return e}function Cw(t){return t[F]&9216||t[Ir]?.dirty}function Dh(t){Cw(t)?no(t):t[F]&64&&(fS()?(t[F]|=1024,no(t)):t[vn].changeDetectionScheduler?.notify())}function no(t){t[vn].changeDetectionScheduler?.notify();let e=ro(t);for(;e!==null&&!(e[F]&8192||(e[F]|=8192,!of(e)));)e=ro(e)}function yS(t,e){if((t[F]&256)===256)throw new M(911,!1);t[Ys]===null&&(t[Ys]=[]),t[Ys].push(e)}function ro(t){let e=t[Be];return Tn(e)?e[Be]:e}var G={lFrame:Ow(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function vS(){return G.lFrame.elementDepthCount}function _S(){G.lFrame.elementDepthCount++}function wS(){G.lFrame.elementDepthCount--}function Aw(){return G.bindingsEnabled}function IS(){return G.skipHydrationRootTNode!==null}function ES(t){return G.skipHydrationRootTNode===t}function DS(){G.skipHydrationRootTNode=null}function ye(){return G.lFrame.lView}function Tt(){return G.lFrame.tView}function ji(t){return G.lFrame.contextLView=t,t[Ot]}function Bi(t){return G.lFrame.contextLView=null,t}function ft(){let t=Sw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Sw(){return G.lFrame.currentTNode}function TS(){let t=G.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Ar(t,e){let n=G.lFrame;n.currentTNode=t,n.isParent=e}function af(){return G.lFrame.isParent}function Rw(){G.lFrame.isParent=!1}function bS(t){return G.lFrame.bindingIndex=t}function Mw(){return G.lFrame.bindingIndex++}function CS(t){let e=G.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function AS(){return G.lFrame.inI18n}function SS(t,e){let n=G.lFrame;n.bindingIndex=n.bindingRootIndex=t,Th(e)}function RS(){return G.lFrame.currentDirectiveIndex}function Th(t){G.lFrame.currentDirectiveIndex=t}function MS(t){let e=G.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Nw(t){G.lFrame.currentQueryIndex=t}function NS(t){let e=t[Q];return e.type===2?e.declTNode:e.type===1?t[Ft]:null}function Pw(t,e,n){if(n&H.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&H.Host);)if(i=NS(s),i===null||(s=s[Ui],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=G.lFrame=xw();return r.currentTNode=e,r.lView=t,!0}function cf(t){let e=xw(),n=t[Q];G.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function xw(){let t=G.lFrame,e=t===null?null:t.child;return e===null?Ow(t):e}function Ow(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function kw(){let t=G.lFrame;return G.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Fw=kw;function uf(){let t=kw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function PS(t){return(G.lFrame.contextLView=mS(t,G.lFrame.contextLView))[Ot]}function $i(){return G.lFrame.selectedIndex}function Dr(t){G.lFrame.selectedIndex=t}function xS(){let t=G.lFrame;return Tw(t.tView,t.selectedIndex)}function OS(){return G.lFrame.currentNamespace}var Lw=!0;function Yc(){return Lw}function Jc(t){Lw=t}function kS(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=ww(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Xc(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),l!=null&&(t.destroyHooks??=[]).push(n,l)}}function vc(t,e,n){Vw(t,e,3,n)}function _c(t,e,n,r){(t[F]&3)===n&&Vw(t,e,n,r)}function ih(t,e){let n=t[F];(n&3)===e&&(n&=16383,n+=1,t[F]=n)}function Vw(t,e,n,r){let i=r!==void 0?t[Ai]&65535:0,s=r??-1,o=e.length-1,a=0;for(let c=i;c<o;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(t[Ai]+=65536),(a<s||s==-1)&&(FS(t,n,e,c),t[Ai]=(t[Ai]&4294901760)+c+2),c++}function S_(t,e){Gt(4,t,e);let n=ct(null);try{e.call(t)}finally{ct(n),Gt(5,t,e)}}function FS(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[F]>>14<t[Ai]>>16&&(t[F]&3)===e&&(t[F]+=16384,S_(a,s)):S_(a,s)}var Mi=-1,Tr=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function LS(t){return t instanceof Tr}function VS(t){return(t.flags&8)!==0}function US(t){return(t.flags&16)!==0}function Uw(t){return t!==Mi}function Sc(t){return t&32767}function jS(t){return t>>16}function Rc(t,e){let n=jS(t),r=e;for(;n>0;)r=r[Ui],n--;return r}var bh=!0;function R_(t){let e=bh;return bh=t,e}var BS=256,jw=BS-1,Bw=5,$S=0,Wt={};function HS(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ws)&&(r=n[Ws]),r==null&&(r=n[Ws]=$S++);let i=r&jw,s=1<<i;e.data[t+(i>>Bw)]|=s}function Mc(t,e){let n=$w(t,e);if(n!==-1)return n;let r=e[Q];r.firstCreatePass&&(t.injectorIndex=e.length,sh(r.data,t),sh(e,null),sh(r.blueprint,null));let i=lf(t,e),s=t.injectorIndex;if(Uw(i)){let o=Sc(i),a=Rc(i,e),c=a[Q].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|c[o+u]}return e[s+8]=i,s}function sh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function $w(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function lf(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Ww(i),r===null)return Mi;if(n++,i=i[Ui],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Mi}function Ch(t,e,n){HS(t,e,n)}function Hw(t,e,n){if(n&H.Optional||t!==void 0)return t;nf(e,"NodeInjector")}function qw(t,e,n,r){if(n&H.Optional&&r===void 0&&(r=null),!(n&(H.Self|H.Host))){let i=t[Pi],s=wt(void 0);try{return i?i.get(e,r,n&H.Optional):sw(e,r,n&H.Optional)}finally{wt(s)}}return Hw(r,e,n)}function zw(t,e,n,r=H.Default,i){if(t!==null){if(e[F]&2048&&!(r&H.Self)){let o=KS(t,e,n,r,Wt);if(o!==Wt)return o}let s=Gw(t,e,n,r,Wt);if(s!==Wt)return s}return qw(e,n,r,i)}function Gw(t,e,n,r,i){let s=GS(n);if(typeof s=="function"){if(!Pw(e,t,r))return r&H.Host?Hw(i,n,r):qw(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&H.Optional))nf(n);else return o}finally{Fw()}}else if(typeof s=="number"){let o=null,a=$w(t,e),c=Mi,u=r&H.Host?e[Qt][Ft]:null;for((a===-1||r&H.SkipSelf)&&(c=a===-1?lf(t,e):e[a+8],c===Mi||!N_(r,!1)?a=-1:(o=e[Q],a=Sc(c),e=Rc(c,e)));a!==-1;){let l=e[Q];if(M_(s,a,l.data)){let d=qS(a,e,n,o,r,u);if(d!==Wt)return d}c=e[a+8],c!==Mi&&N_(r,e[Q].data[a+8]===u)&&M_(s,a,e)?(o=l,a=Sc(c),e=Rc(c,e)):a=-1}}return i}function qS(t,e,n,r,i,s){let o=e[Q],a=o.data[t+8],c=r==null?Kc(a)&&bh:r!=o&&(a.type&3)!==0,u=i&H.Host&&s===a,l=zS(a,o,n,c,u);return l!==null?ki(e,o,l,a):Wt}function zS(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,c=t.directiveStart,u=t.directiveEnd,l=s>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let g=o[f];if(f<c&&n===g||f>=c&&g.type===n)return f}if(i){let f=o[c];if(f&&qn(f)&&f.type===n)return c}return null}function ki(t,e,n,r){let i=t[n],s=e.data;if(LS(i)){let o=i;o.resolving&&NA(MA(s[n]));let a=R_(o.canSeeViewProviders);o.resolving=!0;let c,u=o.injectImpl?wt(o.injectImpl):null,l=Pw(t,r,H.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&kS(n,s[n],e)}finally{u!==null&&wt(u),R_(a),o.resolving=!1,Fw()}}return i}function GS(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ws)?t[Ws]:void 0;return typeof e=="number"?e>=0?e&jw:WS:e}function M_(t,e,n){let r=1<<t;return!!(n[e+(t>>Bw)]&r)}function N_(t,e){return!(t&H.Self)&&!(t&H.Host&&e)}var _r=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return zw(this._tNode,this._lView,e,zc(r),n)}};function WS(){return new _r(ft(),ye())}function ho(t){return lo(()=>{let e=t.prototype.constructor,n=e[Dc]||Ah(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Dc]||Ah(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Ah(t){return ew(t)?()=>{let e=Ah(Ye(t));return e&&e()}:xi(t)}function KS(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[F]&2048&&!(o[F]&512);){let a=Gw(s,o,n,r|H.Self,Wt);if(a!==Wt)return a;let c=s.parent;if(!c){let u=o[yw];if(u){let l=u.get(n,Wt,r);if(l!==Wt)return l}c=Ww(o),o=o[Ui]}s=c}return i}function Ww(t){let e=t[Q],n=e.type;return n===2?e.declTNode:n===1?t[Ft]:null}var gc="__parameters__";function QS(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function Kw(t,e,n){return lo(()=>{let r=QS(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(c,u,l){let d=c.hasOwnProperty(gc)?c[gc]:Object.defineProperty(c,gc,{value:[]})[gc];for(;d.length<=l;)d.push(null);return(d[l]=d[l]||[]).push(o),c}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function YS(t){return typeof t=="function"}function df(t,e){t.forEach(n=>Array.isArray(n)?df(n,e):e(n))}function Qw(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Nc(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function JS(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function XS(t,e,n){let r=fo(t,e);return r>=0?t[r|1]=n:(r=~r,JS(t,r,e,n)),r}function oh(t,e){let n=fo(t,e);if(n>=0)return t[n|1]}function fo(t,e){return ZS(t,e,1)}function ZS(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var He=ow(Kw("Optional"),8);var Yw=ow(Kw("SkipSelf"),4);var Fi=new A(""),Jw=new A("",-1),Xw=new A(""),Pc=class{get(e,n=Js){if(n===Js){let r=new Error(`NullInjectorError: No provider for ${Je(e)}!`);throw r.name="NullInjectorError",r}return n}};function Hi(t){return{\u0275providers:t}}function hf(...t){return{\u0275providers:Zw(!0,t),\u0275fromNgModule:!0}}function Zw(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return df(e,o=>{let a=o;Sh(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&eI(i,s),n}function eI(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];ff(i,s=>{e(s,r)})}}function Sh(t,e,n,r){if(t=Ye(t),!t)return!1;let i=null,s=__(t),o=!s&&wr(t);if(!s&&!o){let c=t.ngModule;if(s=__(c),s)i=c;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let c=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of c)Sh(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{df(s.imports,l=>{Sh(l,e,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&eI(u,e)}if(!a){let u=xi(i)||(()=>new i);e({provide:i,useFactory:u,deps:It},i),e({provide:Xw,useValue:i,multi:!0},i),e({provide:Fi,useValue:()=>N(i),multi:!0},i)}let c=s.providers;if(c!=null&&!a){let u=t;ff(c,l=>{e(l,u)})}}else return!1;return i!==t&&t.providers!==void 0}function ff(t,e){for(let n of t)tw(n)&&(n=n.\u0275providers),Array.isArray(n)?ff(n,e):e(n)}var eR=ue({provide:String,useValue:ue});function tI(t){return t!==null&&typeof t=="object"&&eR in t}function tR(t){return!!(t&&t.useExisting)}function nR(t){return!!(t&&t.useFactory)}function Li(t){return typeof t=="function"}function rR(t){return!!t.useClass}var Zc=new A(""),wc={},iR={},ah;function pf(){return ah===void 0&&(ah=new Pc),ah}var tt=class{},io=class extends tt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mh(e,o=>this.processProvider(o)),this.records.set(Jw,Si(void 0,this)),i.has("environment")&&this.records.set(tt,Si(void 0,this));let s=this.records.get(Zc);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(Xw,It,H.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Hn(this),r=wt(void 0),i;try{return e()}finally{Hn(n),wt(r)}}get(e,n=Js,r=H.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(y_))return e[y_](this);r=zc(r);let i,s=Hn(this),o=wt(void 0);try{if(!(r&H.SkipSelf)){let c=this.records.get(e);if(c===void 0){let u=uR(e)&&qc(e);u&&this.injectableDefInScope(u)?c=Si(Rh(e),wc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&H.Self?pf():this.parent;return n=r&H.Optional&&n===Js?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Tc]=a[Tc]||[]).unshift(Je(e)),s)throw a;return HA(a,e,"R3InjectorError",this.source)}else throw a}finally{wt(o),Hn(s)}}resolveInjectorInitializers(){let e=Hn(this),n=wt(void 0),r;try{let i=this.get(Fi,It,H.Self);for(let s of i)s()}finally{Hn(e),wt(n)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Je(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new M(205,!1)}processProvider(e){e=Ye(e);let n=Li(e)?e:Ye(e&&e.provide),r=oR(e);if(!Li(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Si(void 0,wc,!0),i.factory=()=>wh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===wc&&(n.value=iR,n.value=n.factory()),typeof n.value=="object"&&n.value&&cR(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ye(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Rh(t){let e=qc(t),n=e!==null?e.factory:xi(t);if(n!==null)return n;if(t instanceof A)throw new M(204,!1);if(t instanceof Function)return sR(t);throw new M(204,!1)}function sR(t){if(t.length>0)throw new M(204,!1);let n=OA(t);return n!==null?()=>n.factory(t):()=>new t}function oR(t){if(tI(t))return Si(void 0,t.useValue);{let e=nI(t);return Si(e,wc)}}function nI(t,e,n){let r;if(Li(t)){let i=Ye(t);return xi(i)||Rh(i)}else if(tI(t))r=()=>Ye(t.useValue);else if(nR(t))r=()=>t.useFactory(...wh(t.deps||[]));else if(tR(t))r=()=>N(Ye(t.useExisting));else{let i=Ye(t&&(t.useClass||t.provide));if(aR(t))r=()=>new i(...wh(t.deps));else return xi(i)||Rh(i)}return r}function Si(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function aR(t){return!!t.deps}function cR(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function uR(t){return typeof t=="function"||typeof t=="object"&&t instanceof A}function Mh(t,e){for(let n of t)Array.isArray(n)?Mh(n,e):n&&tw(n)?Mh(n.\u0275providers,e):e(n)}function bn(t,e){t instanceof io&&t.assertNotDestroyed();let n,r=Hn(t),i=wt(void 0);try{return e()}finally{Hn(r),wt(i)}}function P_(t,e=null,n=null,r){let i=rI(t,e,n,r);return i.resolveInjectorInitializers(),i}function rI(t,e=null,n=null,r,i=new Set){let s=[n||It,hf(t)];return r=r||(typeof t=="object"?void 0:Je(t)),new io(s,e||pf(),r||null,i)}var bt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return P_({name:""},i,r,"");{let s=r.name??"";return P_({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Js,e.NULL=new Pc,e.\u0275prov=S({token:e,providedIn:"any",factory:()=>N(Jw)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var Nh;function iI(t){Nh=t}function lR(){if(Nh!==void 0)return Nh;if(typeof document<"u")return document;throw new M(210,!1)}var gf=new A("",{providedIn:"root",factory:()=>dR}),dR="ng",mf=new A(""),Jt=new A("",{providedIn:"platform",factory:()=>"unknown"});var yf=new A("",{providedIn:"root",factory:()=>lR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function sI(t){return t instanceof Function?t():t}function oI(t){return(t.flags&128)===128}var wn=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(wn||{}),hR=/^>|^->|<!--|-->|--!>|<!-$/g,fR=/(<|>)/g,pR="\u200B$1\u200B";function gR(t){return t.replace(hR,e=>e.replace(fR,pR))}var aI=new Map,mR=0;function yR(){return mR++}function vR(t){aI.set(t[Wc],t)}function _R(t){aI.delete(t[Wc])}var x_="__ngContext__";function zn(t,e){vr(e)?(t[x_]=e[Wc],vR(e)):t[x_]=e}var wR;function vf(t,e){return wR(t,e)}function Ri(t,e,n,r,i){if(r!=null){let s,o=!1;Tn(r)?s=r:vr(r)&&(o=!0,r=r[Dn]);let a=Yt(r);t===0&&n!==null?i==null?hI(e,n,a):xc(e,n,a,i||null,!0):t===1&&n!==null?xc(e,n,a,i||null,!0):t===2?VR(e,a,o):t===3&&e.destroyNode(a),s!=null&&jR(e,t,s,n,i)}}function IR(t,e){return t.createText(e)}function ER(t,e,n){t.setValue(e,n)}function DR(t,e){return t.createComment(gR(e))}function cI(t,e,n){return t.createElement(e,n)}function TR(t,e){uI(t,e),e[Dn]=null,e[Ft]=null}function bR(t,e,n,r,i,s){r[Dn]=i,r[Ft]=e,tu(t,r,n,1,i,s)}function uI(t,e){tu(t,e,e[ke],2,null,null)}function CR(t){let e=t[eo];if(!e)return ch(t[Q],t);for(;e;){let n=null;if(vr(e))n=e[eo];else{let r=e[Et];r&&(n=r)}if(!n){for(;e&&!e[xt]&&e!==t;)vr(e)&&ch(e[Q],e),e=e[Be];e===null&&(e=t),vr(e)&&ch(e[Q],e),n=e&&e[xt]}e=n}}function AR(t,e,n,r){let i=Et+r,s=n.length;r>0&&(n[i-1][xt]=e),r<s-Et?(e[xt]=n[i],Qw(n,Et+r,e)):(n.push(e),e[xt]=null),e[Be]=n;let o=e[Gc];o!==null&&n!==o&&SR(o,e);let a=e[to];a!==null&&a.insertView(t),Dh(e),e[F]|=128}function SR(t,e){let n=t[Ac],i=e[Be][Be][Qt];e[Qt]!==i&&(t[F]|=rf.HasTransplantedViews),n===null?t[Ac]=[e]:n.push(e)}function lI(t,e){let n=t[Ac],r=n.indexOf(e);n.splice(r,1)}function Ph(t,e){if(t.length<=Et)return;let n=Et+e,r=t[n];if(r){let i=r[Gc];i!==null&&i!==t&&lI(i,r),e>0&&(t[n-1][xt]=r[xt]);let s=Nc(t,Et+e);TR(r[Q],r);let o=s[to];o!==null&&o.detachView(s[Q]),r[Be]=null,r[xt]=null,r[F]&=-129}return r}function dI(t,e){if(!(e[F]&256)){let n=e[ke];n.destroyNode&&tu(t,e,n,3,null,null),CR(e)}}function ch(t,e){if(!(e[F]&256)){e[F]&=-129,e[F]|=256,e[Ir]&&qv(e[Ir]),MR(t,e),RR(t,e),e[Q].type===1&&e[ke].destroy();let n=e[Gc];if(n!==null&&Tn(e[Be])){n!==e[Be]&&lI(n,e);let r=e[to];r!==null&&r.detachView(t)}_R(e)}}function RR(t,e){let n=t.cleanup,r=e[Zs];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[Zs]=null);let i=e[Ys];if(i!==null){e[Ys]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function MR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Tr)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],c=s[o+1];Gt(4,a,c);try{c.call(a)}finally{Gt(5,a,c)}}else{Gt(4,i,s);try{s.call(i)}finally{Gt(5,i,s)}}}}}function NR(t,e,n){return PR(t,e.parent,n)}function PR(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[Dn];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Kt.None||s===Kt.Emulated)return null}return Lt(r,n)}}function xc(t,e,n,r,i){t.insertBefore(e,n,r,i)}function hI(t,e,n){t.appendChild(e,n)}function O_(t,e,n,r,i){r!==null?xc(t,e,n,r,i):hI(t,e,n)}function xR(t,e,n,r){t.removeChild(e,n,r)}function _f(t,e){return t.parentNode(e)}function OR(t,e){return t.nextSibling(e)}function kR(t,e,n){return LR(t,e,n)}function FR(t,e,n){return t.type&40?Lt(t,n):null}var LR=FR,k_;function eu(t,e,n,r){let i=NR(t,r,e),s=e[ke],o=r.parent||e[Ft],a=kR(o,r,e);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)O_(s,i,n[c],a,!1);else O_(s,i,n,a,!1);k_!==void 0&&k_(s,r,e,n,i)}function Ic(t,e){if(e!==null){let n=e.type;if(n&3)return Lt(e,t);if(n&4)return xh(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Ic(t,r);{let i=t[e.index];return Tn(i)?xh(-1,i):Yt(i)}}else{if(n&32)return vf(e,t)()||Yt(t[e.index]);{let r=fI(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ro(t[Qt]);return Ic(i,r)}else return Ic(t,e.next)}}}return null}function fI(t,e){if(e!==null){let r=t[Qt][Ft],i=e.projection;return r.projection[i]}return null}function xh(t,e){let n=Et+t+1;if(n<e.length){let r=e[n],i=r[Q].firstChild;if(i!==null)return Ic(r,i)}return e[Er]}function VR(t,e,n){let r=_f(t,e);r&&xR(t,r,e,n)}function wf(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],c=n.type;if(o&&e===0&&(a&&zn(Yt(a),r),n.flags|=2),(n.flags&32)!==32)if(c&8)wf(t,e,n.child,r,i,s,!1),Ri(e,t,i,a,s);else if(c&32){let u=vf(n,r),l;for(;l=u();)Ri(e,t,i,l,s);Ri(e,t,i,a,s)}else c&16?UR(t,e,r,n,i,s):Ri(e,t,i,a,s);n=o?n.projectionNext:n.next}}function tu(t,e,n,r,i,s){wf(n,r,t.firstChild,e,i,s,!1)}function UR(t,e,n,r,i,s){let o=n[Qt],c=o[Ft].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Ri(e,t,i,l,s)}else{let u=c,l=o[Be];oI(r)&&(u.flags|=128),wf(t,e,u,l,i,s,!0)}}function jR(t,e,n,r,i){let s=n[Er],o=Yt(n);s!==o&&Ri(e,t,r,s,i);for(let a=Et;a<n.length;a++){let c=n[a];tu(c[Q],c,t,e,r,s)}}function BR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:wn.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=wn.Important),t.setStyle(n,r,i,s))}}function $R(t,e,n){t.setAttribute(e,"style",n)}function pI(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function gI(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Ih(t,e,r),i!==null&&pI(t,e,i),s!==null&&$R(t,e,s)}var Oc=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Z_})`}};function nu(t){return t instanceof Oc?t.changingThisBreaksApplicationSecurity:t}function mI(t,e){let n=HR(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Z_})`)}return n===e}function HR(t){return t instanceof Oc&&t.getTypeName()||null}var qR=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function yI(t){return t=String(t),t.match(qR)?t:"unsafe:"+t}var If=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(If||{});function vI(t){let e=zR();return e?e.sanitize(If.URL,t)||"":mI(t,"URL")?nu(t):yI(tf(t))}function zR(){let t=ye();return t&&t[vn].sanitizer}var Oh=class{};var GR="h",WR="b";var KR=()=>null;function Ef(t,e,n=!1){return KR(t,e,n)}var kh=class{},kc=class{};function QR(t){let e=Error(`No component factory found for ${Je(t)}.`);return e[YR]=t,e}var YR="ngComponent";var Fh=class{resolveComponentFactory(e){throw QR(e)}},ru=(()=>{let e=class e{};e.NULL=new Fh;let t=e;return t})();function JR(){return iu(ft(),ye())}function iu(t,e){return new Sr(Lt(t,e))}var Sr=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=JR;let t=e;return t})();var so=class{},qi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>XR();let t=e;return t})();function XR(){let t=ye(),e=ft(),n=Kn(e.index,t);return(vr(n)?n:t)[ke]}var ZR=(()=>{let e=class e{};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),uh={};function _I(t){return tM(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function eM(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function tM(t){return t!==null&&(typeof t=="function"||typeof t=="object")}var Lh=class{constructor(){}supports(e){return _I(e)}create(e){return new Vh(e)}},nM=(t,e)=>e,Vh=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||nM}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<F_(r,i,s)?n:r,a=F_(o,i,s),c=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<s.length?s[h]:s[h]=0,g=f+h;l<=g&&g<u&&(s[h]=f+1)}let d=o.previousIndex;s[d]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!_I(e))throw new M(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,eM(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Uh(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Fc),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Fc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Uh=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},jh=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Fc=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new jh,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function F_(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function L_(){return new Df([new Lh])}var Df=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||L_()),deps:[[e,new Yw,new He]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new M(901,!1)}};e.\u0275prov=S({token:e,providedIn:"root",factory:L_});let t=e;return t})();function Lc(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Yt(s)),Tn(s)&&rM(s,r);let o=n.type;if(o&8)Lc(t,e,n.child,r);else if(o&32){let a=vf(n,e),c;for(;c=a();)r.push(c)}else if(o&16){let a=fI(e,n);if(Array.isArray(a))r.push(...a);else{let c=ro(e[Qt]);Lc(c[Q],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function rM(t,e){for(let n=Et;n<t.length;n++){let r=t[n],i=r[Q].firstChild;i!==null&&Lc(r[Q],r,i,e)}t[Er]!==t[Dn]&&e.push(t[Er])}var wI=[];function iM(t){return t[Ir]??sM(t)}function sM(t){let e=wI.pop()??Object.create(aM);return e.lView=t,e}function oM(t){t.lView[Ir]!==t&&(t.lView=null,wI.push(t))}var aM=ae(b({},Bv),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{no(t.lView)},consumerOnSignalRead(){this.lView[Ir]=this}});function II(t){return DI(t[eo])}function EI(t){return DI(t[xt])}function DI(t){for(;t!==null&&!Tn(t);)t=t[xt];return t}var cM="ngOriginalError";function lh(t){return t[cM]}var In=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&lh(e);for(;n&&lh(n);)n=lh(n);return n||null}},TI=new A("",{providedIn:"root",factory:()=>D(In).handleError.bind(void 0)});var bI=!1,uM=new A("",{providedIn:"root",factory:()=>bI});var zi={};function De(t=1){CI(Tt(),ye(),$i()+t,!1)}function CI(t,e,n,r){if(!r)if((e[F]&3)===3){let s=t.preOrderCheckHooks;s!==null&&vc(e,s,n)}else{let s=t.preOrderHooks;s!==null&&_c(e,s,0,n)}Dr(n)}function Z(t,e=H.Default){let n=ye();if(n===null)return N(t,e);let r=ft();return zw(r,n,Ye(t),e)}function AI(t,e,n,r,i,s){let o=ct(null);try{let a=null;i&Dt.SignalBased&&(a=e[r][jv]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Dt.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):_w(e,a,r,s)}finally{ct(o)}}function lM(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Dr(~i);else{let s=i,o=n[++r],a=n[++r];SS(o,s);let c=e[s];a(2,c)}}}finally{Dr(-1)}}function su(t,e,n,r,i,s,o,a,c,u,l){let d=e.blueprint.slice();return d[Dn]=i,d[F]=r|4|128|8|64,(u!==null||t&&t[F]&2048)&&(d[F]|=2048),bw(d),d[Be]=d[Ui]=t,d[Ot]=n,d[vn]=o||t&&t[vn],d[ke]=a||t&&t[ke],d[Pi]=c||t&&t[Pi]||null,d[Ft]=s,d[Wc]=yR(),d[bc]=l,d[yw]=u,d[Qt]=e.type==2?t[Qt]:d,d}function po(t,e,n,r,i){let s=t.data[e];if(s===null)s=dM(t,e,n,r,i),AS()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=TS();s.injectorIndex=o===null?-1:o.injectorIndex}return Ar(s,!0),s}function dM(t,e,n,r,i){let s=Sw(),o=af(),a=o?s:s&&s.parent,c=t.data[e]=mM(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=c),s!==null&&(o?s.child==null&&c.parent!==null&&(s.child=c):s.next===null&&(s.next=c,c.prev=s)),c}function SI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function RI(t,e,n,r,i){let s=$i(),o=r&2;try{Dr(-1),o&&e.length>_n&&CI(t,e,_n,!1),Gt(o?2:0,i),n(r,i)}finally{Dr(s),Gt(o?3:1,i)}}function Tf(t,e,n){if(sf(e)){let r=ct(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];a.contentQueries&&a.contentQueries(1,n[o],o)}}finally{ct(r)}}}function bf(t,e,n){Aw()&&(DM(t,e,n,Lt(n,e)),(n.flags&64)===64&&PI(t,e,n))}function Cf(t,e,n=Lt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function MI(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Af(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Af(t,e,n,r,i,s,o,a,c,u,l){let d=_n+r,h=d+i,f=hM(d,h),g=typeof u=="function"?u():u;return f[Q]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:c,consts:g,incompleteFirstPass:!1,ssrId:l}}function hM(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:zi);return n}function fM(t,e,n,r){let s=r.get(uM,bI)||n===Kt.ShadowDom,o=t.selectRootElement(e,s);return pM(o),o}function pM(t){gM(t)}var gM=()=>null;function mM(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return IS()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function V_(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,c=Dt.None;Array.isArray(o)?(a=o[0],c=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?U_(r,n,u,a,c):U_(r,n,u,a)}return r}function U_(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function yM(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],c=null,u=null;for(let l=r;l<i;l++){let d=s[l],h=n?n.get(d):null,f=h?h.inputs:null,g=h?h.outputs:null;c=V_(0,d.inputs,l,c,f),u=V_(1,d.outputs,l,u,g);let _=c!==null&&o!==null&&!lw(e)?PM(c,l,o):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}function vM(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function _M(t,e,n,r,i,s,o,a){let c=Lt(e,n),u=e.inputs,l;!a&&u!=null&&(l=u[r])?(Rf(t,n,l,r,i),Kc(e)&&wM(n,e.index)):e.type&3?(r=vM(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(c,r,i)):e.type&12}function wM(t,e){let n=Kn(e,t);n[F]&16||(n[F]|=64)}function Sf(t,e,n,r){if(Aw()){let i=r===null?null:{"":-1},s=bM(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&NI(t,e,n,o,i,a),i&&CM(n,r,i)}n.mergedAttrs=Xs(n.mergedAttrs,n.attrs)}function NI(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Ch(Mc(n,e),t,r[u].type);SM(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let l=r[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=SI(t,e,r.length,null);for(let u=0;u<r.length;u++){let l=r[u];n.mergedAttrs=Xs(n.mergedAttrs,l.hostAttrs),RM(t,n,e,c,l),AM(c,l,i),l.contentQueries!==null&&(n.flags|=4),(l.hostBindings!==null||l.hostAttrs!==null||l.hostVars!==0)&&(n.flags|=64);let d=l.type.prototype;!o&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),c++}yM(t,n,s)}function IM(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;EM(o)!=a&&o.push(a),o.push(n,r,s)}}function EM(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function DM(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Kc(n)&&MM(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Mc(n,e),zn(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let c=t.data[a],u=ki(e,t,a,n);if(zn(u,e),o!==null&&NM(e,a-i,u,c,n,o),qn(c)){let l=Kn(n.index,e);l[Ot]=ki(e,t,a,n)}}}function PI(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=RS();try{Dr(s);for(let a=r;a<i;a++){let c=t.data[a],u=e[a];Th(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TM(c,u)}}finally{Dr(-1),Th(o)}}function TM(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function bM(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(JA(e,o.selectors,!1))if(r||(r=[]),qn(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let c=a.length;Bh(t,e,c)}else r.unshift(o),Bh(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function Bh(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function CM(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new M(-301,!1);r.push(e[i],s)}}}function AM(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;qn(e)&&(n[""]=t)}}function SM(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function RM(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=xi(i.type,!0)),o=new Tr(s,qn(i),Z);t.blueprint[r]=o,n[r]=o,IM(t,e,r,SI(t,n,i.hostVars,zi),i)}function MM(t,e,n){let r=Lt(e,t),i=MI(n),s=t[vn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=ou(t,su(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function NM(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let c=o[a++],u=o[a++],l=o[a++],d=o[a++];AI(r,n,c,u,l,d)}}function PM(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function xI(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function OI(t,e){let n=t.contentQueries;if(n!==null){let r=ct(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];Nw(s),a.contentQueries(2,e[o],o)}}}finally{ct(r)}}}function ou(t,e){return t[eo]?t[C_][xt]=e:t[eo]=e,t[C_]=e,e}function $h(t,e,n){Nw(0);let r=ct(null);try{e(t,n)}finally{ct(r)}}function xM(t){return t[Zs]||(t[Zs]=[])}function OM(t){return t.cleanup||(t.cleanup=[])}function kI(t,e){let n=t[Pi],r=n?n.get(In,null):null;r&&r.handleError(e)}function Rf(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],c=n[s++],u=e[o],l=t.data[o];AI(l,u,r,a,c,i)}}function kM(t,e,n){let r=Dw(e,t);ER(t[ke],r,n)}var FM=100;function LM(t,e=!0){let n=t[vn],r=n.rendererFactory,i=!1;i||r.begin?.();try{VM(t)}catch(s){throw e&&kI(t,s),s}finally{i||(r.end?.(),n.inlineEffectRunner?.flush())}}function VM(t){Hh(t,0);let e=0;for(;Cw(t);){if(e===FM)throw new M(103,!1);e++,Hh(t,1)}}function UM(t,e,n,r){let i=e[F];if((i&256)===256)return;let s=!1;!s&&e[vn].inlineEffectRunner?.flush(),cf(e);let o=null,a=null;!s&&jM(t)&&(a=iM(e),o=$v(a));try{bw(e),bS(t.bindingStartIndex),n!==null&&RI(t,e,n,2,r);let c=(i&3)===3;if(!s)if(c){let d=t.preOrderCheckHooks;d!==null&&vc(e,d,null)}else{let d=t.preOrderHooks;d!==null&&_c(e,d,0,null),ih(e,0)}if(BM(e),FI(e,0),t.contentQueries!==null&&OI(t,e),!s)if(c){let d=t.contentCheckHooks;d!==null&&vc(e,d)}else{let d=t.contentHooks;d!==null&&_c(e,d,1),ih(e,1)}lM(t,e);let u=t.components;u!==null&&VI(e,u,0);let l=t.viewQuery;if(l!==null&&$h(2,l,r),!s)if(c){let d=t.viewCheckHooks;d!==null&&vc(e,d)}else{let d=t.viewHooks;d!==null&&_c(e,d,2),ih(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[rh]){for(let d of e[rh])d();e[rh]=null}s||(e[F]&=-73)}catch(c){throw no(e),c}finally{a!==null&&(Hv(a,o),oM(a)),uf()}}function jM(t){return t.type!==2}function FI(t,e){for(let n=II(t);n!==null;n=EI(n))for(let r=Et;r<n.length;r++){let i=n[r];LI(i,e)}}function BM(t){for(let e=II(t);e!==null;e=EI(e)){if(!(e[F]&rf.HasTransplantedViews))continue;let n=e[Ac];for(let r=0;r<n.length;r++){let i=n[r],s=i[Be];gS(i)}}}function $M(t,e,n){let r=Kn(e,t);LI(r,n)}function LI(t,e){of(t)&&Hh(t,e)}function Hh(t,e){let r=t[Q],i=t[F],s=t[Ir],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&xd(s)),s&&(s.dirty=!1),t[F]&=-9217,o)UM(r,t,r.template,t[Ot]);else if(i&8192){FI(t,1);let a=r.components;a!==null&&VI(t,a,1)}}function VI(t,e,n){for(let r=0;r<e.length;r++)$M(t,e[r],n)}function Mf(t){for(t[vn].changeDetectionScheduler?.notify();t;){t[F]|=64;let e=ro(t);if(oS(t)&&!e)return t;t=e}return null}var br=class{get rootNodes(){let e=this._lView,n=e[Q];return Lc(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ot]}set context(e){this._lView[Ot]=e}get destroyed(){return(this._lView[F]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Be];if(Tn(e)){let n=e[Cc],r=n?n.indexOf(this):-1;r>-1&&(Ph(e,r),Nc(n,r))}this._attachedToViewContainer=!1}dI(this._lView[Q],this._lView)}onDestroy(e){yS(this._lView,e)}markForCheck(){Mf(this._cdRefInjectingView||this._lView)}detach(){this._lView[F]&=-129}reattach(){Dh(this._lView),this._lView[F]|=128}detectChanges(){this._lView[F]|=1024,LM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new M(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,uI(this._lView[Q],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new M(902,!1);this._appRef=e,Dh(this._lView)}},Gi=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=HM;let t=e;return t})();function HM(t){return qM(ft(),ye(),(t&16)===16)}function qM(t,e,n){if(Kc(t)&&!n){let r=Kn(t.index,e);return new br(r,r)}else if(t.type&47){let r=e[Qt];return new br(r,e)}return null}var j_=new Set;function Nf(t){j_.has(t)||(j_.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var qh=class extends lt{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let c=e;i=c.next?.bind(c),s=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(s=dh(s),i&&(i=dh(i)),o&&(o=dh(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ie&&e.add(a),a}};function dh(t){return e=>{setTimeout(t,void 0,e)}}var pe=qh;function B_(...t){}function zM(){let t=typeof Ks.requestAnimationFrame=="function",e=Ks[t?"requestAnimationFrame":"setTimeout"],n=Ks[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var re=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new pe(!1),this.onMicrotaskEmpty=new pe(!1),this.onStable=new pe(!1),this.onError=new pe(!1),typeof Zone>"u")throw new M(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=zM().nativeRequestAnimationFrame,KM(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new M(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new M(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,GM,B_,B_);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},GM={};function Pf(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function WM(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Ks,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,zh(t),t.isCheckStableRunning=!0,Pf(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),zh(t))}function KM(t){let e=()=>{WM(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(QM(a))return n.invokeTask(i,s,o,a);try{return $_(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),H_(t)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return $_(t),n.invoke(i,s,o,a,c)}finally{t.shouldCoalesceRunChangeDetection&&e(),H_(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,zh(t),Pf(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function zh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function $_(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function H_(t){t._nesting--,Pf(t)}function QM(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var UI=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let s of r)s();return!!this.handler?.execute()||r.length>0}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=S({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function YM(t,e){let n=Kn(e,t),r=n[Q];JM(r,n);let i=n[Dn];i!==null&&n[bc]===null&&(n[bc]=Ef(i,n[Pi])),xf(r,n,n[Ot])}function JM(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function xf(t,e,n){cf(e);try{let r=t.viewQuery;r!==null&&$h(1,r,n);let i=t.template;i!==null&&RI(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&OI(t,e),t.staticViewQueries&&$h(2,t.viewQuery,n);let s=t.components;s!==null&&XM(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[F]&=-5,uf()}}function XM(t,e){for(let n=0;n<e.length;n++)YM(t,e[n])}function Vc(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=m_(i,a);else if(s==2){let c=a,u=e[++o];r=m_(r,c+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var Uc=class extends ru{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wr(e);return new oo(n,this.ngModule)}};function q_(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function ZM(t){let e=t.toLowerCase();return e==="svg"?lS:e==="math"?dS:null}var Gh=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=zc(r);let i=this.injector.get(e,uh,r);return i!==uh||n===uh?i:this.parentInjector.get(e,n,r)}},oo=class extends kc{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=q_(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return q_(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=tS(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){i=i||this.ngModule;let s=i instanceof tt?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let o=s?new Gh(e,s):e,a=o.get(so,null);if(a===null)throw new M(407,!1);let c=o.get(ZR,null),u=o.get(UI,null),l=o.get(Oh,null),d={rendererFactory:a,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:l},h=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",g=r?fM(h,r,this.componentDef.encapsulation,o):cI(h,f,ZM(f)),_=512;this.componentDef.signals?_|=4096:this.componentDef.onPush||(_|=16);let m=null;g!==null&&(m=Ef(g,o,!0));let w=Af(0,null,null,1,0,null,null,null,null,null,null),P=su(null,w,null,_,null,null,d,h,o,null,m);cf(P);let j,C;try{let te=this.componentDef,Y,Oe=null;te.findHostDirectiveDefs?(Y=[],Oe=new Map,te.findHostDirectiveDefs(te,Y,Oe),Y.push(te)):Y=[te];let vt=eN(P,g),fr=tN(vt,g,te,Y,P,d,h);C=Tw(w,_n),g&&iN(h,te,g,r),n!==void 0&&sN(C,this.ngContentSelectors,n),j=rN(fr,te,Y,Oe,P,[oN]),xf(w,P,null)}finally{uf()}return new Wh(this.componentType,j,iu(C,P),P,C)}},Wh=class extends kh{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new br(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;Rf(s[Q],s,i,e,n),this.previousInputValues.set(e,n);let o=Kn(this._tNode.index,s);Mf(o)}}get injector(){return new _r(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function eN(t,e){let n=t[Q],r=_n;return t[r]=e,po(n,r,2,"#host",null)}function tN(t,e,n,r,i,s,o){let a=i[Q];nN(r,t,e,o);let c=null;e!==null&&(c=Ef(e,i[Pi]));let u=s.rendererFactory.createRenderer(e,n),l=16;n.signals?l=4096:n.onPush&&(l=64);let d=su(i,MI(n),null,l,i[t.index],t,s,u,null,null,c);return a.firstCreatePass&&Bh(a,t,r.length-1),ou(i,d),i[t.index]=d}function nN(t,e,n,r){for(let i of t)e.mergedAttrs=Xs(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Vc(e,e.mergedAttrs,!0),n!==null&&gI(r,n,e))}function rN(t,e,n,r,i,s){let o=ft(),a=i[Q],c=Lt(o,i);NI(a,i,o,n,null,r);for(let l=0;l<n.length;l++){let d=o.directiveStart+l,h=ki(i,a,d,o);zn(h,i)}PI(a,i,o),c&&zn(c,i);let u=ki(i,a,o.directiveStart+o.componentOffset,o);if(t[Ot]=i[Ot]=u,s!==null)for(let l of s)l(u,e);return Tf(a,o,t),u}function iN(t,e,n,r){if(r)Ih(t,n,["ng-version","17.1.2"]);else{let{attrs:i,classes:s}=nS(e.selectors[0]);i&&Ih(t,n,i),s&&s.length>0&&pI(t,n,s.join(" "))}}function sN(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function oN(){let t=ft();Xc(ye()[Q],t)}function aN(t){return Object.getPrototypeOf(t.prototype).constructor}function Wi(t){let e=aN(t.type),n=!0,r=[t];for(;e;){let i;if(qn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new M(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=mc(t.inputs),o.inputTransforms=mc(t.inputTransforms),o.declaredInputs=mc(t.declaredInputs),o.outputs=mc(t.outputs);let a=i.hostBindings;a&&hN(t,a);let c=i.viewQuery,u=i.contentQueries;if(c&&lN(t,c),u&&dN(t,u),cN(t,i),TA(t.outputs,i.outputs),qn(i)&&i.data.animation){let l=t.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Wi&&(n=!1)}}e=Object.getPrototypeOf(e)}uN(r)}function cN(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function uN(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xs(i.hostAttrs,n=Xs(n,i.hostAttrs))}}function mc(t){return t===Ni?{}:t===It?[]:t}function lN(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function dN(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function hN(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var L4=new RegExp(`^(\\d+)*(${WR}|${GR})*(.*)`);var fN=()=>null;function z_(t,e){return fN(t,e)}function pN(t,e,n,r){let i=e.tView,o=t[F]&4096?4096:16,a=su(t,i,n,o,null,e,null,null,null,r?.injector??null,r?.dehydratedView??null),c=t[e.index];a[Gc]=c;let u=t[to];return u!==null&&(a[to]=u.createEmbeddedView(i)),xf(i,a,n),a}function G_(t,e){return!e||e.firstChild===null||oI(t)}function gN(t,e,n,r=!0){let i=e[Q];if(AR(i,e,t,n),r){let o=xh(n,t),a=e[ke],c=_f(a,t[Er]);c!==null&&bR(i,t[Ft],a,e,c,o)}let s=e[bc];s!==null&&s.firstChild!==null&&(s.firstChild=null)}var Ki=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mN;let t=e;return t})();function mN(){let t=ft();return vN(t,ye())}var yN=Ki,jI=class extends yN{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return iu(this._hostTNode,this._hostLView)}get injector(){return new _r(this._hostTNode,this._hostLView)}get parentInjector(){let e=lf(this._hostTNode,this._hostLView);if(Uw(e)){let n=Rc(e,this._hostLView),r=Sc(e),i=n[Q].data[r+8];return new _r(i,n)}else return new _r(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=W_(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Et}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=z_(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,G_(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!YS(e),a;if(o)a=n;else{let g=n||{};a=g.index,r=g.injector,i=g.projectableNodes,s=g.environmentInjector||g.ngModuleRef}let c=o?e:new oo(wr(e)),u=r||this.parentInjector;if(!s&&c.ngModule==null){let _=(o?u:this.parentInjector).get(tt,null);_&&(s=_)}let l=wr(c.componentType??{}),d=z_(this._lContainer,l?.id??null),h=d?.firstChild??null,f=c.create(u,i,h,s);return this.insertImpl(f.hostView,a,G_(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(pS(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=i[Be],u=new jI(c,c[Ft],c[Be]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return gN(o,i,s,r),e.attachToViewContainerRef(),Qw(hh(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=W_(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ph(this._lContainer,n);r&&(Nc(hh(this._lContainer),n),dI(r[Q],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ph(this._lContainer,n);return r&&Nc(hh(this._lContainer),n)!=null?new br(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function W_(t){return t[Cc]}function hh(t){return t[Cc]||(t[Cc]=[])}function vN(t,e){let n,r=e[t.index];return Tn(r)?n=r:(n=xI(r,e,null,t),e[t.index]=n,ou(e,n)),wN(n,e,t,r),new jI(n,t,e)}function _N(t,e){let n=t[ke],r=n.createComment(""),i=Lt(e,t),s=_f(n,i);return xc(n,s,r,OR(n,i),!1),r}var wN=DN,IN=()=>!1;function EN(t,e,n){return IN(t,e,n)}function DN(t,e,n,r){if(t[Er])return;let i;n.type&8?i=Yt(r):i=_N(e,n),t[Er]=i}function Of(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function TN(t,e,n,r,i,s,o,a,c){let u=e.consts,l=po(e,t,4,o||null,Oi(u,a));Sf(e,n,l,Oi(u,c)),Xc(e,l);let d=l.tView=Af(2,l,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,l),d.queries=e.queries.embeddedTView(l)),l}function Xt(t,e,n,r,i,s,o,a){let c=ye(),u=Tt(),l=t+_n,d=u.firstCreatePass?TN(l,u,c,e,n,r,i,s,o):u.data[l];Ar(d,!1);let h=bN(u,c,d,t);Yc()&&eu(u,c,h,d),zn(h,c);let f=xI(h,c,h,d);return c[l]=f,ou(c,f),EN(f,d,c),Qc(d)&&bf(u,c,d),o!=null&&Cf(c,d,a),Xt}var bN=CN;function CN(t,e,n,r){return Jc(!0),e[ke].createComment("")}function AN(t,e,n,r){return Of(t,Mw(),n)?e+tf(n)+r:zi}function yc(t,e){return t<<17|e<<2}function Cr(t){return t>>17&32767}function SN(t){return(t&2)==2}function RN(t,e){return t&131071|e<<17}function Kh(t){return t|2}function Vi(t){return(t&131068)>>2}function fh(t,e){return t&-131069|e<<2}function MN(t){return(t&1)===1}function Qh(t){return t|1}function NN(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Cr(o),c=Vi(o);t[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||fo(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Cr(t[a+1]);t[r+1]=yc(h,a),h!==0&&(t[h+1]=fh(t[h+1],r)),t[a+1]=RN(t[a+1],r)}else t[r+1]=yc(a,0),a!==0&&(t[a+1]=fh(t[a+1],r)),a=r;else t[r+1]=yc(c,0),a===0?a=r:t[c+1]=fh(t[c+1],r),c=r;u&&(t[r+1]=Kh(t[r+1])),K_(t,l,r,!0),K_(t,l,r,!1),PN(e,l,t,r,s),o=yc(a,c),s?e.classBindings=o:e.styleBindings=o}function PN(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&fo(s,e)>=0&&(n[r+1]=Qh(n[r+1]))}function K_(t,e,n,r){let i=t[n+1],s=e===null,o=r?Cr(i):Vi(i),a=!1;for(;o!==0&&(a===!1||s);){let c=t[o],u=t[o+1];xN(c,e)&&(a=!0,t[o+1]=r?Qh(u):Kh(u)),o=r?Cr(u):Vi(u)}a&&(t[n+1]=r?Kh(i):Qh(i))}function xN(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?fo(t,e)>=0:!1}function Te(t,e,n){let r=ye(),i=Mw();if(Of(r,i,e)){let s=Tt(),o=xS();_M(s,o,r,t,e,r[ke],n,!1)}return Te}function Q_(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";Rf(t,n,s[o],o,r)}function kf(t,e){return ON(t,e,null,!0),kf}function ON(t,e,n,r){let i=ye(),s=Tt(),o=CS(2);if(s.firstUpdatePass&&FN(s,t,o,r),e!==zi&&Of(i,o,e)){let a=s.data[$i()];BN(s,a,i,i[ke],t,i[o+1]=$N(e,n),r,o)}}function kN(t,e){return e>=t.expandoStartIndex}function FN(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[$i()],o=kN(t,n);HN(s,r)&&e===null&&!o&&(e=!1),e=LN(i,s,e,r),NN(i,s,e,n,o,r)}}function LN(t,e,n,r){let i=MS(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=ph(null,t,e,n,r),n=ao(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=ph(i,t,e,n,r),s===null){let c=VN(t,e,r);c!==void 0&&Array.isArray(c)&&(c=ph(null,t,e,c[1],r),c=ao(c,e.attrs,r),UN(t,e,r,c))}else s=jN(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function VN(t,e,n){let r=n?e.classBindings:e.styleBindings;if(Vi(r)!==0)return t[Cr(r)]}function UN(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Cr(i)]=r}function jN(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ao(r,o,n)}return ao(r,e.attrs,n)}function ph(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ao(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ao(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),XS(t,o,n?!0:e[++s]))}return t===void 0?null:t}function BN(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let c=t.data,u=c[a+1],l=MN(u)?Y_(c,e,n,i,Vi(u),o):void 0;if(!jc(l)){jc(s)||SN(u)&&(s=Y_(c,null,n,i,a,o));let d=Dw($i(),n);BR(r,o,d,i,s)}}function Y_(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let c=t[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===zi&&(h=d?It:void 0);let f=d?oh(h,r):l===r?h:void 0;if(u&&!jc(f)&&(f=oh(c,r)),jc(f)&&(a=f,o))return a;let g=t[i+1];i=o?Cr(g):Vi(g)}if(e!==null){let c=s?e.residualClasses:e.residualStyles;c!=null&&(a=oh(c,r))}return a}function jc(t){return t!==void 0}function $N(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Je(nu(t)))),t}function HN(t,e){return(t.flags&(e?8:16))!==0}function qN(t,e,n,r,i,s){let o=e.consts,a=Oi(o,i),c=po(e,t,2,r,a);return Sf(e,n,c,Oi(o,s)),c.attrs!==null&&Vc(c,c.attrs,!1),c.mergedAttrs!==null&&Vc(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function ce(t,e,n,r){let i=ye(),s=Tt(),o=_n+t,a=i[ke],c=s.firstCreatePass?qN(o,s,i,e,n,r):s.data[o],u=zN(s,i,c,a,e,t);i[o]=u;let l=Qc(c);return Ar(c,!0),gI(a,u,c),(c.flags&32)!==32&&Yc()&&eu(s,i,u,c),vS()===0&&zn(u,i),_S(),l&&(bf(s,i,c),Tf(s,c,i)),r!==null&&Cf(i,c),ce}function ie(){let t=ft();af()?Rw():(t=t.parent,Ar(t,!1));let e=t;ES(e)&&DS(),wS();let n=Tt();return n.firstCreatePass&&(Xc(n,t),sf(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&VS(e)&&Q_(n,e,ye(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&US(e)&&Q_(n,e,ye(),e.stylesWithoutHost,!1),ie}function pt(t,e,n,r){return ce(t,e,n,r),ie(),pt}var zN=(t,e,n,r,i,s)=>(Jc(!0),cI(r,i,OS()));function GN(t,e,n,r,i){let s=e.consts,o=Oi(s,r),a=po(e,t,8,"ng-container",o);o!==null&&Vc(a,o,!0);let c=Oi(s,i);return Sf(e,n,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function Rr(t,e,n){let r=ye(),i=Tt(),s=t+_n,o=i.firstCreatePass?GN(s,i,r,e,n):i.data[s];Ar(o,!0);let a=WN(i,r,o,t);return r[s]=a,Yc()&&eu(i,r,a,o),zn(a,r),Qc(o)&&(bf(i,r,o),Tf(i,o,r)),n!=null&&Cf(r,o),Rr}function Mr(){let t=ft(),e=Tt();return af()?Rw():(t=t.parent,Ar(t,!1)),e.firstCreatePass&&(Xc(e,t),sf(t)&&e.queries.elementEnd(t)),Mr}var WN=(t,e,n,r)=>(Jc(!0),DR(e[ke],""));function Qi(){return ye()}var Bc="en-US";var KN=Bc;function QN(t){PA(t,"Expected localeId to be defined"),typeof t=="string"&&(KN=t.toLowerCase().replace(/_/g,"-"))}function Nr(t){return!!t&&typeof t.then=="function"}function BI(t){return!!t&&typeof t.subscribe=="function"}function he(t,e,n,r){let i=ye(),s=Tt(),o=ft();return JN(s,i,i[ke],o,t,e,r),he}function YN(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[Zs],c=i[s+2];return a.length>c?a[c]:null}typeof o=="string"&&(s+=2)}return null}function JN(t,e,n,r,i,s,o){let a=Qc(r),u=t.firstCreatePass&&OM(t),l=e[Ot],d=xM(e),h=!0;if(r.type&3||o){let _=Lt(r,e),m=o?o(_):_,w=d.length,P=o?C=>o(Yt(C[r.index])):r.index,j=null;if(!o&&a&&(j=YN(t,e,i,r.index)),j!==null){let C=j.__ngLastListenerFn__||j;C.__ngNextListenerFn__=s,j.__ngLastListenerFn__=s,h=!1}else{s=X_(r,e,l,s,!1);let C=n.listen(m,i,s);d.push(s,C),u&&u.push(i,P,w,w+1)}}else s=X_(r,e,l,s,!1);let f=r.outputs,g;if(h&&f!==null&&(g=f[i])){let _=g.length;if(_)for(let m=0;m<_;m+=2){let w=g[m],P=g[m+1],te=e[w][P].subscribe(s),Y=d.length;d.push(s,te),u&&u.push(i,r.index,Y,-(Y+1))}}}function J_(t,e,n,r){try{return Gt(6,e,n),n(r)!==!1}catch(i){return kI(t,i),!1}finally{Gt(7,e,n)}}function X_(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Kn(t.index,e):e;Mf(a);let c=J_(e,n,r,o),u=s.__ngNextListenerFn__;for(;u;)c=J_(e,n,u,o)&&c,u=u.__ngNextListenerFn__;return i&&c===!1&&o.preventDefault(),c}}function Yi(t=1){return PS(t)}var au=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=eP;let t=e;return t})(),XN=au,ZN=class extends XN{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=pN(this._declarationLView,this._declarationTContainer,e,{injector:n,dehydratedView:r});return new br(i)}};function eP(){return tP(ft(),ye())}function tP(t,e){return t.type&4?new ZN(e,t,iu(t,e)):null}function Ct(t,e=""){let n=ye(),r=Tt(),i=t+_n,s=r.firstCreatePass?po(r,i,1,e,null):r.data[i],o=nP(r,n,s,e,t);n[i]=o,Yc()&&eu(r,n,o,s),Ar(s,!1)}var nP=(t,e,n,r,i)=>(Jc(!0),IR(e[ke],r));function Ff(t){return $I("",t,""),Ff}function $I(t,e,n){let r=ye(),i=AN(r,t,e,n);return i!==zi&&kM(r,$i(),i),$I}function rP(t,e,n){let r=Tt();if(r.firstCreatePass){let i=qn(t);Yh(n,r.data,r.blueprint,i,!0),Yh(e,r.data,r.blueprint,i,!1)}}function Yh(t,e,n,r,i){if(t=Ye(t),Array.isArray(t))for(let s=0;s<t.length;s++)Yh(t[s],e,n,r,i);else{let s=Tt(),o=ye(),a=ft(),c=Li(t)?t:Ye(t.provide),u=nI(t),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Li(t)||!t.multi){let f=new Tr(u,i,Z),g=mh(c,e,i?l:l+h,d);g===-1?(Ch(Mc(a,o),s,c),gh(s,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),o.push(f)):(n[g]=f,o[g]=f)}else{let f=mh(c,e,l+h,d),g=mh(c,e,l,l+h),_=f>=0&&n[f],m=g>=0&&n[g];if(i&&!m||!i&&!_){Ch(Mc(a,o),s,c);let w=oP(i?sP:iP,n.length,i,r,u);!i&&m&&(n[g].providerFactory=w),gh(s,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(w),o.push(w)}else{let w=HI(n[i?g:f],u,!i&&r);gh(s,t,f>-1?f:g,w)}!i&&r&&m&&n[g].componentProviders++}}}function gh(t,e,n,r){let i=Li(e),s=rR(e);if(i||s){let c=(s?Ye(e.useClass):e).prototype.ngOnDestroy;if(c){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function HI(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function mh(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function iP(t,e,n,r){return Jh(this.multi,[])}function sP(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=ki(n,n[Q],this.providerFactory.index,r);s=a.slice(0,o),Jh(i,s);for(let c=o;c<a.length;c++)s.push(a[c])}else s=[],Jh(i,s);return s}function Jh(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function oP(t,e,n,r,i){let s=new Tr(t,n,Z);return s.multi=[],s.index=e,s.componentProviders=0,HI(s,i,r&&!n),s}function Lf(t,e=[]){return n=>{n.providersResolver=(r,i)=>rP(r,i?i(t):t,e)}}var Gn=class{},co=class{};var Xh=class extends Gn{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Uc(this);let i=pw(e);this._bootstrapComponents=sI(i.bootstrap),this._r3Injector=rI(e,n,[{provide:Gn,useValue:this},{provide:ru,useValue:this.componentFactoryResolver},...r],Je(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Zh=class extends co{constructor(e){super(),this.moduleType=e}create(e){return new Xh(this.moduleType,e,[])}};var $c=class extends Gn{constructor(e){super(),this.componentFactoryResolver=new Uc(this),this.instance=null;let n=new io([...e.providers,{provide:Gn,useValue:this},{provide:ru,useValue:this.componentFactoryResolver}],e.parent||pf(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Vf(t,e,n=null){return new $c({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var aP=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=Zw(!1,r.type),s=i.length>0?Vf([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=S({token:e,providedIn:"environment",factory:()=>new e(N(tt))});let t=e;return t})();function qe(t){Nf("NgStandalone"),t.getStandaloneInjector=e=>e.get(aP).getOrCreateStandaloneInjector(t)}var En=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},qI=new En("17.1.2");var cu=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})(),ef=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Uf=(()=>{let e=class e{compileModuleSync(r){return new Zh(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=pw(r),o=sI(s.declarations).reduce((a,c)=>{let u=wr(c);return u&&a.push(new oo(u)),a},[]);return new ef(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Pr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Re(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var zI=new A("");var GI=new A(""),WI=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=D(GI,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Nr(o))r.push(o);else if(BI(o)){let a=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),uu=new A("");function cP(){zv(()=>{throw new M(600,!1)})}function uP(t){return t.isBoundToModule}function lP(t,e,n){try{let r=n();return Nr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var Ji=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=D(TI),this.afterRenderEffectManager=D(UI),this.componentTypes=[],this.components=[],this.isStable=D(Pr).hasPendingTasks.pipe(B(r=>!r)),this._injector=D(tt)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof kc;if(!this._injector.get(WI).done){let f=!s&&fw(r),g=!1;throw new M(405,g)}let a;s?a=r:a=this._injector.get(ru).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let c=uP(a)?void 0:this._injector.get(Gn),u=i||a.selector,l=a.create(bt.NULL,[],u,c),d=l.location.nativeElement,h=l.injector.get(zI,null);return h?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),yh(this.components,l),h?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new M(101,!1);try{this._runningTick=!0;for(let r of this._views)r.detectChanges()}catch(r){this.internalErrorHandler(r)}finally{try{let r=this.afterRenderEffectManager.execute()}catch(r){this.internalErrorHandler(r)}this._runningTick=!1}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;yh(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(uu,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>yh(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new M(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var dP=(()=>{let e=class e{constructor(){this.zone=D(re),this.applicationRef=D(Ji)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function hP(t){return[{provide:re,useFactory:t},{provide:Fi,multi:!0,useFactory:()=>{let e=D(dP,{optional:!0});return()=>e.initialize()}},{provide:Fi,multi:!0,useFactory:()=>{let e=D(mP);return()=>{e.initialize()}}},{provide:TI,useFactory:fP}]}function fP(){let t=D(re),e=D(In);return n=>t.runOutsideAngular(()=>e.handleError(n))}function pP(t){let e=hP(()=>new re(gP(t)));return Hi([[],e])}function gP(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var mP=(()=>{let e=class e{constructor(){this.subscription=new Ie,this.initialized=!1,this.zone=D(re),this.pendingTasks=D(Pr)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{re.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{re.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yP(){return typeof $localize<"u"&&$localize.locale||Bc}var jf=new A("",{providedIn:"root",factory:()=>D(jf,H.Optional|H.SkipSelf)||yP()});var KI=new A("");var Ec=null;function vP(t=[],e){return bt.create({name:e,providers:[{provide:Zc,useValue:"platform"},{provide:KI,useValue:new Set([()=>Ec=null])},...t]})}function _P(t=[]){if(Ec)return Ec;let e=vP(t);return Ec=e,cP(),wP(e),e}function wP(t){t.get(mf,null)?.forEach(n=>n())}function QI(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=_P(r),s=[pP(),...n||[]],a=new $c({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,c=a.get(re);return c.run(()=>{a.resolveInjectorInitializers();let u=a.get(In,null),l;c.runOutsideAngular(()=>{l=c.onError.subscribe({next:f=>{u.handleError(f)}})});let d=()=>a.destroy(),h=i.get(KI);return h.add(d),a.onDestroy(()=>{l.unsubscribe(),h.delete(d)}),lP(u,c,()=>{let f=a.get(WI);return f.runInitializers(),f.donePromise.then(()=>{let g=a.get(jf,Bc);QN(g||Bc);let _=a.get(Ji);return e!==void 0&&_.bootstrap(e),_})})})}catch(e){return Promise.reject(e)}}function lu(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var eE=null;function Cn(){return eE}function tE(t){eE??=t}var du=class{},it=new A(""),nE=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(DP),providedIn:"platform"});let t=e;return t})();var DP=(()=>{let e=class e extends nE{constructor(){super(),this._doc=D(it),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Cn().getBaseHref(this._doc)}onPopState(r){let i=Cn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=Cn().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function rE(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function YI(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function xr(t){return t&&t[0]!=="?"?"?"+t:t}var hu=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(iE),providedIn:"root"});let t=e;return t})(),TP=new A(""),iE=(()=>{let e=class e extends hu{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??D(it).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return rE(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+xr(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+xr(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+xr(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(N(nE),N(TP,8))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var go=(()=>{let e=class e{constructor(r){this._subject=new pe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=AP(YI(JI(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+xr(i))}normalize(r){return e.stripTrailingSlash(CP(this._basePath,JI(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xr(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+xr(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=xr,e.joinWithSlash=rE,e.stripTrailingSlash=YI,e.\u0275fac=function(i){return new(i||e)(N(hu))},e.\u0275prov=S({token:e,factory:()=>bP(),providedIn:"root"});let t=e;return t})();function bP(){return new go(N(hu))}function CP(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function JI(t){return t.replace(/\/index.html$/,"")}function AP(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function fu(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var Bf=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zi=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new Bf(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let c=i.get(o);i.move(c,a),XI(c,s)}});for(let s=0,o=i.length;s<o;s++){let c=i.get(s).context;c.index=s,c.count=o,c.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);XI(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Z(Ki),Z(au),Z(Df))},e.\u0275dir=kt({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function XI(t,e){t.context.$implicit=e.item}var pu=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new $f,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){ZI("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){ZI("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Z(Ki),Z(au))},e.\u0275dir=kt({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),$f=class{constructor(){this.$implicit=null,this.ngIf=null}};function ZI(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Je(e)}'.`)}var Vt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=rt({type:e}),e.\u0275inj=nt({});let t=e;return t})(),sE="browser",SP="server";function Hf(t){return t===SP}var Xi=class{};var vo=class{},mu=class{},Or=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var zf=class{encodeKey(e){return oE(e)}encodeValue(e){return oE(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function NP(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],c=n.get(o)||[];c.push(a),n.set(o,c)}),n}var PP=/%(\d[a-f0-9])/gi,xP={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function oE(t){return encodeURIComponent(t).replace(PP,(e,n)=>xP[n]??e)}function gu(t){return`${t}`}var Qn=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new zf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=NP(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(gu):[gu(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(gu(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(gu(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Gf=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function OP(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function aE(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function cE(t){return typeof Blob<"u"&&t instanceof Blob}function uE(t){return typeof FormData<"u"&&t instanceof FormData}function kP(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var yo=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(OP(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Or,this.context??=new Gf,!this.params)this.params=new Qn,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+o}}}serializeBody(){return this.body===null?null:aE(this.body)||cE(this.body)||uE(this.body)||kP(this.body)||typeof this.body=="string"?this.body:this.body instanceof Qn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||uE(this.body)?null:cE(this.body)?this.body.type||null:aE(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Qn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.body!==void 0?e.body:this.body,o=e.withCredentials!==void 0?e.withCredentials:this.withCredentials,a=e.reportProgress!==void 0?e.reportProgress:this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,l=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((d,h)=>d.set(h,e.setHeaders[h]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((d,h)=>d.set(h,e.setParams[h]),u)),new t(n,r,s,{params:u,headers:c,context:l,reportProgress:a,responseType:i,withCredentials:o})}},es=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(es||{}),_o=class{constructor(e,n=_u.Ok,r="OK"){this.headers=e.headers||new Or,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Wf=class t extends _o{constructor(e={}){super(e),this.type=es.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},yu=class t extends _o{constructor(e={}){super(e),this.type=es.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},vu=class extends _o{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},_u=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(_u||{});function qf(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Kf=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof yo)o=r;else{let u;s.headers instanceof Or?u=s.headers:u=new Or(s.headers);let l;s.params&&(s.params instanceof Qn?l=s.params:l=new Qn({fromObject:s.params})),o=new yo(r,i,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:l,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=O(o).pipe(jn(u=>this.handler.handle(u)));if(r instanceof yo||s.observe==="events")return a;let c=a.pipe(dt(u=>u instanceof yu));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(B(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(B(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(B(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(B(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new Qn().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,qf(s,i))}post(r,i,s={}){return this.request("POST",r,qf(s,i))}put(r,i,s={}){return this.request("PUT",r,qf(s,i))}};e.\u0275fac=function(i){return new(i||e)(N(vo))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function fE(t,e){return e(t)}function FP(t,e){return(n,r)=>e.intercept(n,{handle:i=>t(i,r)})}function LP(t,e,n){return(r,i)=>bn(n,()=>e(r,s=>t(s,i)))}var VP=new A(""),Qf=new A(""),UP=new A(""),jP=new A("");function BP(){let t=null;return(e,n)=>{t===null&&(t=(D(VP,{optional:!0})??[]).reduceRight(FP,fE));let r=D(Pr),i=r.add();return t(e,n).pipe($n(()=>r.remove(i)))}}var lE=(()=>{let e=class e extends vo{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=D(Pr);let s=D(jP,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(Qf),...this.injector.get(UP,[])]));this.chain=s.reduceRight((o,a)=>LP(o,a,this.injector),fE)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe($n(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(N(mu),N(tt))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();var $P=/^\)\]\}',?\n/;function HP(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var dE=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new M(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?fe(i.\u0275loadImpl()):O(null)).pipe(ht(()=>new q(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((m,w)=>a.setRequestHeader(m,w.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let m=r.detectContentTypeHeader();m!==null&&a.setRequestHeader("Content-Type",m)}if(r.responseType){let m=r.responseType.toLowerCase();a.responseType=m!=="json"?m:"text"}let c=r.serializeBody(),u=null,l=()=>{if(u!==null)return u;let m=a.statusText||"OK",w=new Or(a.getAllResponseHeaders()),P=HP(a)||r.url;return u=new Wf({headers:w,status:a.status,statusText:m,url:P}),u},d=()=>{let{headers:m,status:w,statusText:P,url:j}=l(),C=null;w!==_u.NoContent&&(C=typeof a.response>"u"?a.responseText:a.response),w===0&&(w=C?_u.Ok:0);let te=w>=200&&w<300;if(r.responseType==="json"&&typeof C=="string"){let Y=C;C=C.replace($P,"");try{C=C!==""?JSON.parse(C):null}catch(Oe){C=Y,te&&(te=!1,C={error:Oe,text:C})}}te?(o.next(new yu({body:C,headers:m,status:w,statusText:P,url:j||void 0})),o.complete()):o.error(new vu({error:C,headers:m,status:w,statusText:P,url:j||void 0}))},h=m=>{let{url:w}=l(),P=new vu({error:m,status:a.status||0,statusText:a.statusText||"Unknown Error",url:w||void 0});o.error(P)},f=!1,g=m=>{f||(o.next(l()),f=!0);let w={type:es.DownloadProgress,loaded:m.loaded};m.lengthComputable&&(w.total=m.total),r.responseType==="text"&&a.responseText&&(w.partialText=a.responseText),o.next(w)},_=m=>{let w={type:es.UploadProgress,loaded:m.loaded};m.lengthComputable&&(w.total=m.total),o.next(w)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),r.reportProgress&&(a.addEventListener("progress",g),c!==null&&a.upload&&a.upload.addEventListener("progress",_)),a.send(c),o.next({type:es.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),r.reportProgress&&(a.removeEventListener("progress",g),c!==null&&a.upload&&a.upload.removeEventListener("progress",_)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(N(Xi))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),pE=new A(""),qP="XSRF-TOKEN",zP=new A("",{providedIn:"root",factory:()=>qP}),GP="X-XSRF-TOKEN",WP=new A("",{providedIn:"root",factory:()=>GP}),wu=class{},KP=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=fu(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(N(it),N(Jt),N(zP))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function QP(t,e){let n=t.url.toLowerCase();if(!D(pE)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=D(wu).getToken(),i=D(WP);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}var gE=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(gE||{});function YP(t,e){return{\u0275kind:t,\u0275providers:e}}function mE(...t){let e=[Kf,dE,lE,{provide:vo,useExisting:lE},{provide:mu,useExisting:dE},{provide:Qf,useValue:QP,multi:!0},{provide:pE,useValue:!0},{provide:wu,useClass:KP}];for(let n of t)e.push(...n.\u0275providers);return Hi(e)}var hE=new A("");function yE(){return YP(gE.LegacyInterceptors,[{provide:hE,useFactory:BP},{provide:Qf,useExisting:hE,multi:!0}])}var Xf=class extends du{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Zf=class t extends Xf{static makeCurrent(){tE(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=XP();return n==null?null:ZP(n)}resetBaseElement(){wo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return fu(document.cookie,e)}},wo=null;function XP(){return wo=wo||document.querySelector("base"),wo?wo.getAttribute("href"):null}function ZP(t){return new URL(t,document.baseURI).pathname}var ex=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),ep=new A(""),IE=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new M(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(N(ep),N(re))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Iu=class{constructor(e){this._doc=e}},Yf="ng-app-id",EE=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hf(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Yf}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Yf),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Yf,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(N(it),N(gf),N(yf,8),N(Jt))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Jf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},np=/%COMP%/g,DE="%COMP%",tx=`_nghost-${DE}`,nx=`_ngcontent-${DE}`,rx=!0,ix=new A("",{providedIn:"root",factory:()=>rx});function sx(t){return nx.replace(np,t)}function ox(t){return tx.replace(np,t)}function TE(t,e){return e.map(n=>n.replace(np,t))}var vE=(()=>{let e=class e{constructor(r,i,s,o,a,c,u,l=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=Hf(c),this.defaultRenderer=new Io(r,a,u,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Kt.ShadowDom&&(i=ae(b({},i),{encapsulation:Kt.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof Eu?s.applyToHost(r):s instanceof Eo&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(i.encapsulation){case Kt.Emulated:o=new Eu(u,l,i,this.appId,d,a,c,h);break;case Kt.ShadowDom:return new tp(u,l,r,i,a,c,this.nonce,h);default:o=new Eo(u,l,i,d,a,c,h);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(N(IE),N(EE),N(gf),N(ix),N(it),N(Jt),N(re),N(yf))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),Io=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Jf[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_E(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(_E(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new M(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Jf[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Jf[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(wn.DashCase|wn.Important)?e.style.setProperty(n,r,i&wn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&wn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=Cn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function _E(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var tp=class extends Io{constructor(e,n,r,i,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=TE(i.id,i.styles);for(let l of u){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=l,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Eo=class extends Io{constructor(e,n,r,i,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=c?TE(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Eu=class extends Eo{constructor(e,n,r,i,s,o,a,c){let u=i+"-"+r.id;super(e,n,r,s,o,a,c,u),this.contentAttr=sx(u),this.hostAttr=ox(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},ax=(()=>{let e=class e extends Iu{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(N(it))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})(),wE=["alt","control","meta","shift"],cx={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ux={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},lx=(()=>{let e=class e extends Iu{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Cn().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",c=i.indexOf("code");if(c>-1&&(i.splice(c,1),a="code."),wE.forEach(l=>{let d=i.indexOf(l);d>-1&&(i.splice(d,1),a+=l+".")}),a+=o,i.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(r,i){let s=cx[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),wE.forEach(a=>{if(a!==s){let c=ux[a];c(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(N(it))},e.\u0275prov=S({token:e,factory:e.\u0275fac});let t=e;return t})();function bE(t,e){return QI(b({rootComponent:t},dx(e)))}function dx(t){return{appProviders:[...mx,...t?.providers??[]],platformProviders:gx}}function hx(){Zf.makeCurrent()}function fx(){return new In}function px(){return iI(document),document}var gx=[{provide:Jt,useValue:sE},{provide:mf,useValue:hx,multi:!0},{provide:it,useFactory:px,deps:[]}];var mx=[{provide:Zc,useValue:"root"},{provide:In,useFactory:fx,deps:[]},{provide:ep,useClass:ax,multi:!0,deps:[it,re,Jt]},{provide:ep,useClass:lx,multi:!0,deps:[it]},vE,EE,IE,{provide:so,useExisting:vE},{provide:Xi,useClass:ex,deps:[]},[]];var CE=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(N(it))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var $="primary",Lo=Symbol("RouteTitle"),ap=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ss(t){return new ap(t)}function _x(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function wx(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Zt(t[n],e[n]))return!1;return!0}function Zt(t,e){let n=t?cp(t):void 0,r=e?cp(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!PE(t[i],e[i]))return!1;return!0}function cp(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function PE(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function xE(t){return t.length>0?t[t.length-1]:null}function Xn(t){return Qd(t)?t:Nr(t)?fe(Promise.resolve(t)):O(t)}var Ix={exact:kE,subset:FE},OE={exact:Ex,subset:Dx,ignored:()=>!0};function AE(t,e,n){return Ix[n.paths](t.root,e.root,n.matrixParams)&&OE[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function Ex(t,e){return Zt(t,e)}function kE(t,e,n){if(!Fr(t.segments,e.segments)||!bu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!kE(t.children[r],e.children[r],n))return!1;return!0}function Dx(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>PE(t[n],e[n]))}function FE(t,e,n){return LE(t,e,e.segments,n)}function LE(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Fr(i,n)||e.hasChildren()||!bu(i,n,r))}else if(t.segments.length===n.length){if(!Fr(t.segments,n)||!bu(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!FE(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Fr(t.segments,i)||!bu(t.segments,i,r)||!t.children[$]?!1:LE(t.children[$],e,s,r)}}function bu(t,e,n){return e.every((r,i)=>OE[n](t[i].parameters,r.parameters))}var Yn=class{constructor(e=new ne([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ss(this.queryParams),this._queryParamMap}toString(){return Cx.serialize(this)}},ne=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Cu(this)}},kr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=ss(this.parameters),this._parameterMap}toString(){return UE(this)}};function Tx(t,e){return Fr(t,e)&&t.every((n,r)=>Zt(n.parameters,e[r].parameters))}function Fr(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function bx(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===$&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==$&&(n=n.concat(e(i,r)))}),n}var Op=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>new Su,providedIn:"root"});let t=e;return t})(),Su=class{parse(e){let n=new lp(e);return new Yn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Do(e.root,!0)}`,r=Rx(e.queryParams),i=typeof e.fragment=="string"?`#${Ax(e.fragment)}`:"";return`${n}${r}${i}`}},Cx=new Su;function Cu(t){return t.segments.map(e=>UE(e)).join("/")}function Do(t,e){if(!t.hasChildren())return Cu(t);if(e){let n=t.children[$]?Do(t.children[$],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==$&&r.push(`${i}:${Do(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=bx(t,(r,i)=>i===$?[Do(t.children[$],!1)]:[`${i}:${Do(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[$]!=null?`${Cu(t)}/${n[0]}`:`${Cu(t)}/(${n.join("//")})`}}function VE(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Du(t){return VE(t).replace(/%3B/gi,";")}function Ax(t){return encodeURI(t)}function up(t){return VE(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Au(t){return decodeURIComponent(t)}function SE(t){return Au(t.replace(/\+/g,"%20"))}function UE(t){return`${up(t.path)}${Sx(t.parameters)}`}function Sx(t){return Object.entries(t).map(([e,n])=>`;${up(e)}=${up(n)}`).join("")}function Rx(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${Du(n)}=${Du(i)}`).join("&"):`${Du(n)}=${Du(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Mx=/^[^\/()?;#]+/;function rp(t){let e=t.match(Mx);return e?e[0]:""}var Nx=/^[^\/()?;=#]+/;function Px(t){let e=t.match(Nx);return e?e[0]:""}var xx=/^[^=?&#]+/;function Ox(t){let e=t.match(xx);return e?e[0]:""}var kx=/^[^&#]+/;function Fx(t){let e=t.match(kx);return e?e[0]:""}var lp=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ne([],{}):new ne([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[$]=new ne(e,n)),r}parseSegment(){let e=rp(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(e),new kr(Au(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=Px(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=rp(this.remaining);i&&(r=i,this.capture(r))}e[Au(n)]=Au(r)}parseQueryParam(e){let n=Ox(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=Fx(this.remaining);o&&(r=o,this.capture(r))}let i=SE(n),s=SE(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=rp(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=$);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[$]:new ne([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new M(4011,!1)}};function jE(t){return t.segments.length>0?new ne([],{[$]:t}):t}function BE(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=BE(i);if(r===$&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new ne(t.segments,e);return Lx(n)}function Lx(t){if(t.numberOfChildren===1&&t.children[$]){let e=t.children[$];return new ne(t.segments.concat(e.segments),e.children)}return t}function os(t){return t instanceof Yn}function Vx(t,e,n=null,r=null){let i=$E(t);return HE(i,e,n,r)}function $E(t){let e;function n(s){let o={};for(let c of s.children){let u=n(c);o[c.outlet]=u}let a=new ne(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=jE(r);return e??i}function HE(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return ip(i,i,i,n,r);let s=Ux(e);if(s.toRoot())return ip(i,i,new ne([],{}),n,r);let o=jx(s,i,t),a=o.processChildren?Co(o.segmentGroup,o.index,s.commands):zE(o.segmentGroup,o.index,s.commands);return ip(i,o.segmentGroup,a,n,r)}function Ru(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Ro(t){return typeof t=="object"&&t!=null&&t.outlets}function ip(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(l=>`${l}`):`${u}`});let o;t===e?o=n:o=qE(t,e,n);let a=jE(BE(o));return new Yn(a,s,i)}function qE(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=qE(s,e,n)}),new ne(t.segments,r)}var Mu=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Ru(r[0]))throw new M(4003,!1);let i=r.find(Ro);if(i&&i!==xE(r))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ux(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new Mu(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new Mu(n,e,r)}var rs=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function jx(t,e,n){if(t.isAbsolute)return new rs(e,!0,0);if(!n)return new rs(e,!1,NaN);if(n.parent===null)return new rs(n,!0,0);let r=Ru(t.commands[0])?0:1,i=n.segments.length-1+r;return Bx(n,i,t.numberOfDoubleDots)}function Bx(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new M(4005,!1);i=r.segments.length}return new rs(r,!1,i-s)}function $x(t){return Ro(t[0])?t[0].outlets:{[$]:t}}function zE(t,e,n){if(t??=new ne([],{}),t.segments.length===0&&t.hasChildren())return Co(t,e,n);let r=Hx(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new ne(t.segments.slice(0,r.pathIndex),{});return s.children[$]=new ne(t.segments.slice(r.pathIndex),t.children),Co(s,0,i)}else return r.match&&i.length===0?new ne(t.segments,{}):r.match&&!t.hasChildren()?dp(t,e,n):r.match?Co(t,0,i):dp(t,e,n)}function Co(t,e,n){if(n.length===0)return new ne(t.segments,{});{let r=$x(n),i={};if(Object.keys(r).some(s=>s!==$)&&t.children[$]&&t.numberOfChildren===1&&t.children[$].segments.length===0){let s=Co(t.children[$],e,n);return new ne(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=zE(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new ne(t.segments,i)}}function Hx(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Ro(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!ME(c,u,o))return s;r+=2}else{if(!ME(c,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function dp(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Ro(s)){let c=qx(s.outlets);return new ne(r,c)}if(i===0&&Ru(n[0])){let c=t.segments[e];r.push(new kr(c.path,RE(n[0]))),i++;continue}let o=Ro(s)?s.outlets[$]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Ru(a)?(r.push(new kr(o,RE(a))),i+=2):(r.push(new kr(o,{})),i++)}return new ne(r,{})}function qx(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=dp(new ne([],{}),0,r))}),e}function RE(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function ME(t,e,n){return t==n.path&&Zt(e,n.parameters)}var Ao="imperative",Le=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(Le||{}),St=class{constructor(e,n){this.id=e,this.url=n}},Mo=class extends St{constructor(e,n,r="imperative",i=null){super(e,n),this.type=Le.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Lr=class extends St{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=Le.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},At=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(At||{}),hp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(hp||{}),Jn=class extends St{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Le.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Vr=class extends St{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=Le.NavigationSkipped}},No=class extends St{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=Le.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Nu=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fp=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pp=class extends St{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=Le.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gp=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mp=class extends St{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=Le.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yp=class{constructor(e){this.route=e,this.type=Le.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vp=class{constructor(e){this.route=e,this.type=Le.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_p=class{constructor(e){this.snapshot=e,this.type=Le.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wp=class{constructor(e){this.snapshot=e,this.type=Le.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ip=class{constructor(e){this.snapshot=e,this.type=Le.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ep=class{constructor(e){this.snapshot=e,this.type=Le.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Po=class{},xo=class{constructor(e){this.url=e}};var Dp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Lu,this.attachRef=null}},Lu=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Dp,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Pu=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Tp(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Tp(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=bp(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return bp(e,this._root).map(n=>n.value)}};function Tp(t,e){if(t===e.value)return e;for(let n of e.children){let r=Tp(t,n);if(r)return r}return null}function bp(t,e){if(t===e.value)return[e];for(let n of e.children){let r=bp(t,n);if(r.length)return r.unshift(e),r}return[]}var gt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function ns(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var xu=class extends Pu{constructor(e,n){super(e),this.snapshot=n,Fp(this,e)}toString(){return this.snapshot.toString()}};function GE(t){let e=zx(t),n=new Re([new kr("",{})]),r=new Re({}),i=new Re({}),s=new Re({}),o=new Re(""),a=new as(n,r,s,o,i,$,t,e.root);return a.snapshot=e.root,new xu(new gt(a,[]),e)}function zx(t){let e={},n={},r={},i="",s=new Oo([],e,r,i,n,$,t,null,{});return new Ou("",new gt(s,[]))}var as=class{constructor(e,n,r,i,s,o,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(B(u=>u[Lo]))??O(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(B(e=>ss(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(B(e=>ss(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function kp(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:b(b({},e.params),t.params),data:b(b({},e.data),t.data),resolve:b(b(b(b({},t.data),e.data),i?.data),t._resolvedData)}:r={params:b({},t.params),data:b({},t.data),resolve:b(b({},t.data),t._resolvedData??{})},i&&KE(i)&&(r.resolve[Lo]=i.title),r}var Oo=class{get title(){return this.data?.[Lo]}constructor(e,n,r,i,s,o,a,c,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ss(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ou=class extends Pu{constructor(e,n){super(n),this.url=e,Fp(this,n)}toString(){return WE(this._root)}};function Fp(t,e){e.value._routerState=t,e.children.forEach(n=>Fp(t,n))}function WE(t){let e=t.children.length>0?` { ${t.children.map(WE).join(", ")} } `:"";return`${t.value}${e}`}function sp(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Zt(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Zt(e.params,n.params)||t.paramsSubject.next(n.params),wx(e.url,n.url)||t.urlSubject.next(n.url),Zt(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Cp(t,e){let n=Zt(t.params,e.params)&&Tx(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Cp(t.parent,e.parent))}function KE(t){return typeof t.title=="string"||t.title===null}var Lp=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=$,this.activateEvents=new pe,this.deactivateEvents=new pe,this.attachEvents=new pe,this.detachEvents=new pe,this.parentContexts=D(Lu),this.location=D(Ki),this.changeDetector=D(Gi),this.environmentInjector=D(tt),this.inputBinder=D(Vp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Ap(r,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=kt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Wn]});let t=e;return t})(),Ap=class{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===as?this.route:e===Lu?this.childContexts:this.parent.get(e,n)}},Vp=new A("");function Gx(t,e,n){let r=ko(t,e._root,n?n._root:void 0);return new xu(r,e)}function ko(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=Wx(t,e,n);return new gt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>ko(t,a)),o}}let r=Kx(e.value),i=e.children.map(s=>ko(t,s));return new gt(r,i)}}function Wx(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return ko(t,r,i);return ko(t,r)})}function Kx(t){return new as(new Re(t.url),new Re(t.params),new Re(t.queryParams),new Re(t.fragment),new Re(t.data),t.outlet,t.component,t)}var QE="ngNavigationCancelingError";function YE(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=os(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JE(!1,At.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JE(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[QE]=!0,n.cancellationCode=e,n}function Qx(t){return XE(t)&&os(t.url)}function XE(t){return!!t&&t[QE]}var Yx=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["ng-component"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(i,s){i&1&&pt(0,"router-outlet")},dependencies:[Lp],encapsulation:2});let t=e;return t})();function Jx(t,e){return t.providers&&!t._injector&&(t._injector=Vf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Up(t){let e=t.children&&t.children.map(Up),n=e?ae(b({},t),{children:e}):b({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$&&(n.component=Yx),n}function en(t){return t.outlet||$}function Xx(t,e){let n=t.filter(r=>en(r)===e);return n.push(...t.filter(r=>en(r)!==e)),n}function Vo(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Zx=(t,e,n,r)=>B(i=>(new Sp(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Sp=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),sp(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=ns(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ns(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ns(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=ns(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ep(s.value.snapshot))}),e.children.length&&this.forwardEvent(new wp(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(sp(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),sp(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Vo(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},ku=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},is=class{constructor(e,n){this.component=e,this.route=n}};function eO(t,e,n){let r=t._root,i=e?e._root:null;return To(r,i,n,[r.value])}function tO(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function us(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!nw(t)?t:e.get(t):r}function To(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=ns(e);return t.children.forEach(o=>{nO(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>So(a,n.getContext(o),i)),i}function nO(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=rO(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new ku(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?To(t,e,a?a.children:null,r,i):To(t,e,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new is(a.outlet.component,o))}else o&&So(e,a,i),i.canActivateChecks.push(new ku(r)),s.component?To(t,null,a?a.children:null,r,i):To(t,null,n,r,i);return i}function rO(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Fr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Fr(t.url,e.url)||!Zt(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Cp(t,e)||!Zt(t.queryParams,e.queryParams);case"paramsChange":default:return!Cp(t,e)}}function So(t,e,n){let r=ns(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?So(o,e.children.getContext(s),n):So(o,null,n):So(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new is(e.outlet.component,i)):n.canDeactivateChecks.push(new is(null,i)):n.canDeactivateChecks.push(new is(null,i))}function Uo(t){return typeof t=="function"}function iO(t){return typeof t=="boolean"}function sO(t){return t&&Uo(t.canLoad)}function oO(t){return t&&Uo(t.canActivate)}function aO(t){return t&&Uo(t.canActivateChild)}function cO(t){return t&&Uo(t.canDeactivate)}function uO(t){return t&&Uo(t.canMatch)}function ZE(t){return t instanceof mn||t?.name==="EmptyError"}var Tu=Symbol("INITIAL_VALUE");function cs(){return ht(t=>hc(t.map(e=>e.pipe(yn(1),th(Tu)))).pipe(B(e=>{for(let n of e)if(n!==!0){if(n===Tu)return Tu;if(n===!1||n instanceof Yn)return n}return!0}),dt(e=>e!==Tu),yn(1)))}function lO(t,e){return Me(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?O(ae(b({},n),{guardsResult:!0})):dO(o,r,i,t).pipe(Me(a=>a&&iO(a)?hO(r,s,t,e):O(a)),B(a=>ae(b({},n),{guardsResult:a})))})}function dO(t,e,n,r){return fe(t).pipe(Me(i=>yO(i.component,i.route,n,e,r)),zt(i=>i!==!0,!0))}function hO(t,e,n,r){return fe(e).pipe(jn(i=>bi(pO(i.route.parent,r),fO(i.route,r),mO(t,i.path,n),gO(t,i.route,n))),zt(i=>i!==!0,!0))}function fO(t,e){return t!==null&&e&&e(new Ip(t)),O(!0)}function pO(t,e){return t!==null&&e&&e(new _p(t)),O(!0)}function gO(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return O(!0);let i=r.map(s=>fc(()=>{let o=Vo(e)??n,a=us(s,o),c=oO(a)?a.canActivate(e,t):bn(o,()=>a(e,t));return Xn(c).pipe(zt())}));return O(i).pipe(cs())}function mO(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>tO(o)).filter(o=>o!==null).map(o=>fc(()=>{let a=o.guards.map(c=>{let u=Vo(o.node)??n,l=us(c,u),d=aO(l)?l.canActivateChild(r,t):bn(u,()=>l(r,t));return Xn(d).pipe(zt())});return O(a).pipe(cs())}));return O(s).pipe(cs())}function yO(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return O(!0);let o=s.map(a=>{let c=Vo(e)??i,u=us(a,c),l=cO(u)?u.canDeactivate(t,e,n,r):bn(c,()=>u(t,e,n,r));return Xn(l).pipe(zt())});return O(o).pipe(cs())}function vO(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return O(!0);let s=i.map(o=>{let a=us(o,t),c=sO(a)?a.canLoad(e,n):bn(t,()=>a(e,n));return Xn(c)});return O(s).pipe(cs(),eD(r))}function eD(t){return Bd(Ee(e=>{if(os(e))throw YE(t,e)}),B(e=>e===!0))}function _O(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return O(!0);let s=i.map(o=>{let a=us(o,t),c=uO(a)?a.canMatch(e,n):bn(t,()=>a(e,n));return Xn(c)});return O(s).pipe(cs(),eD(r))}var Fo=class{constructor(e){this.segmentGroup=e||null}},Fu=class extends Error{constructor(e){super(),this.urlTree=e}};function ts(t){return Ti(new Fo(t))}function wO(t){return Ti(new M(4e3,!1))}function IO(t){return Ti(JE(!1,At.GuardRejected))}var Rp=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return O(r);if(i.numberOfChildren>1||!i.children[$])return wO(e.redirectTo);i=i.children[$]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Fu(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Yn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,r,i)}),new ne(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},Mp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function EO(t,e,n,r,i){let s=jp(t,e,n);return s.matched?(r=Jx(e,r),_O(r,e,n,i).pipe(B(o=>o===!0?s:b({},Mp)))):O(s)}function jp(t,e,n){if(e.path==="**")return DO(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?b({},Mp):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||_x)(n,t,e);if(!i)return b({},Mp);let s={};Object.entries(i.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=i.consumed.length>0?b(b({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function DO(t){return{matched:!0,parameters:t.length>0?xE(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function NE(t,e,n,r){return n.length>0&&CO(t,n,r)?{segmentGroup:new ne(e,bO(r,new ne(n,t.children))),slicedSegments:[]}:n.length===0&&AO(t,n,r)?{segmentGroup:new ne(t.segments,TO(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ne(t.segments,t.children),slicedSegments:n}}function TO(t,e,n,r){let i={};for(let s of n)if(Vu(t,e,s)&&!r[en(s)]){let o=new ne([],{});i[en(s)]=o}return b(b({},r),i)}function bO(t,e){let n={};n[$]=e;for(let r of t)if(r.path===""&&en(r)!==$){let i=new ne([],{});n[en(r)]=i}return n}function CO(t,e,n){return n.some(r=>Vu(t,e,r)&&en(r)!==$)}function AO(t,e,n){return n.some(r=>Vu(t,e,r))}function Vu(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function SO(t,e,n,r){return en(t)!==r&&(r===$||!Vu(e,n,t))?!1:jp(e,t,n).matched}function RO(t,e,n){return e.length===0&&!t.children[n]}var Np=class{};function MO(t,e,n,r,i,s,o="emptyOnly"){return new Pp(t,e,n,r,i,o,s).recognize()}var NO=31,Pp=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Rp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new M(4002,`'${e.segmentGroup}'`)}recognize(){let e=NE(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(B(n=>{let r=new Oo([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,{},$,this.rootComponentType,null,{}),i=new gt(r,n),s=new Ou("",i),o=Vx(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,$).pipe(Un(r=>{if(r instanceof Fu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Fo?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=kp(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(B(s=>s instanceof gt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return fe(i).pipe(jn(s=>{let o=r.children[s],a=Xx(n,s);return this.processSegmentGroup(e,a,o,s)}),eh((s,o)=>(s.push(...o),s)),Bn(null),Zd(),Me(s=>{if(s===null)return ts(r);let o=tD(s);return PO(o),O(o)}))}processSegment(e,n,r,i,s,o){return fe(n).pipe(jn(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(Un(c=>{if(c instanceof Fo)return O(null);throw c}))),zt(a=>!!a),Un(a=>{if(ZE(a))return RO(r,i,s)?O(new Np):ts(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return SO(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):ts(i):ts(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:l}=jp(n,i,s);if(!a)return ts(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>NO&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,i.redirectTo,u);return this.applyRedirects.lineralizeSegments(i,d).pipe(Me(h=>this.processSegment(e,r,n,h.concat(l),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=EO(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(ht(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(ht(({routes:c})=>{let u=r._loadedInjector??e,{consumedSegments:l,remainingSegments:d,parameters:h}=a,f=new Oo(l,h,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,OO(r),en(r),r.component??r._loadedComponent??null,r,kO(r)),{segmentGroup:g,slicedSegments:_}=NE(n,l,d,c);if(_.length===0&&g.hasChildren())return this.processChildren(u,c,g).pipe(B(w=>w===null?null:new gt(f,w)));if(c.length===0&&_.length===0)return O(new gt(f,[]));let m=en(r)===s;return this.processSegment(u,c,g,_,m?$:s,!0).pipe(B(w=>new gt(f,w instanceof gt?[w]:[])))}))):ts(n)))}getChildConfig(e,n,r){return n.children?O({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?O({routes:n._loadedRoutes,injector:n._loadedInjector}):vO(e,n,r,this.urlSerializer).pipe(Me(i=>i?this.configLoader.loadChildren(e,n).pipe(Ee(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):IO(n))):O({routes:[],injector:e})}};function PO(t){t.sort((e,n)=>e.value.outlet===$?-1:n.value.outlet===$?1:e.value.outlet.localeCompare(n.value.outlet))}function xO(t){let e=t.value.routeConfig;return e&&e.path===""}function tD(t){let e=[],n=new Set;for(let r of t){if(!xO(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=tD(r.children);e.push(new gt(r.value,i))}return e.filter(r=>!n.has(r))}function OO(t){return t.data||{}}function kO(t){return t.resolve||{}}function FO(t,e,n,r,i,s){return Me(o=>MO(t,e,n,r,o.extractedUrl,i,s).pipe(B(({state:a,tree:c})=>ae(b({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function LO(t,e){return Me(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return O(n);let s=new Set(i.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of nD(c))o.add(u);let a=0;return fe(o).pipe(jn(c=>s.has(c)?VO(c,r,t,e):(c.data=kp(c,c.parent,t).resolve,O(void 0))),Ee(()=>a++),Ci(1),Me(c=>a===o.size?O(n):_t))})}function nD(t){let e=t.children.map(n=>nD(n)).flat();return[t,...e]}function VO(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!KE(i)&&(s[Lo]=i.title),UO(s,t,e,r).pipe(B(o=>(t._resolvedData=o,t.data=kp(t,t.parent,n).resolve,null)))}function UO(t,e,n,r){let i=cp(t);if(i.length===0)return O({});let s={};return fe(i).pipe(Me(o=>jO(t[o],e,n,r).pipe(zt(),Ee(a=>{s[o]=a}))),Ci(1),Xd(s),Un(o=>ZE(o)?_t:Ti(o)))}function jO(t,e,n,r){let i=Vo(e)??r,s=us(t,i),o=s.resolve?s.resolve(e,n):bn(i,()=>s(e,n));return Xn(o)}function op(t){return ht(e=>{let n=t(e);return n?fe(n).pipe(B(()=>e)):O(e)})}var rD=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===$);return i}getResolvedTitleForRoute(r){return r.data[Lo]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(BO),providedIn:"root"});let t=e;return t})(),BO=(()=>{let e=class e extends rD{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(N(CE))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Bp=new A("",{providedIn:"root",factory:()=>({})}),$p=new A(""),$O=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=D(Uf)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return O(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=Xn(r.loadComponent()).pipe(B(iD),Ee(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),$n(()=>{this.componentLoaders.delete(r)})),s=new wi(i,()=>new lt).pipe(_i());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return O({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=HO(i,this.compiler,r,this.onLoadEndListener).pipe($n(()=>{this.childrenLoaders.delete(i)})),a=new wi(o,()=>new lt).pipe(_i());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function HO(t,e,n,r){return Xn(t.loadChildren()).pipe(B(iD),Me(i=>i instanceof co||Array.isArray(i)?O(i):fe(e.compileModuleAsync(i))),B(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get($p,[],{optional:!0,self:!0}).flat()),{routes:o.map(Up),injector:s}}))}function qO(t){return t&&typeof t=="object"&&"default"in t}function iD(t){return qO(t)?t.default:t}var Hp=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(zO),providedIn:"root"});let t=e;return t})(),zO=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),GO=new A("");var WO=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new lt,this.transitionAbortSubject=new lt,this.configLoader=D($O),this.environmentInjector=D(tt),this.urlSerializer=D(Op),this.rootContexts=D(Lu),this.location=D(go),this.inputBindingEnabled=D(Vp,{optional:!0})!==null,this.titleStrategy=D(rD),this.options=D(Bp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=D(Hp),this.createViewTransition=D(GO,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>O(void 0),this.rootComponentType=null;let r=s=>this.events.next(new yp(s)),i=s=>this.events.next(new vp(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(ae(b(b({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new Re({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ao,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dt(o=>o.id!==0),B(o=>ae(b({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ht(o=>{this.currentTransition=o;let a=!1,c=!1;return O(o).pipe(Ee(u=>{this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?ae(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ht(u=>{let l=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=u.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!l&&d!=="reload"){let h="";return this.events.next(new Vr(u.id,this.urlSerializer.serialize(u.rawUrl),h,hp.IgnoredSameUrlNavigation)),u.resolve(null),_t}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return O(u).pipe(ht(h=>{let f=this.transitions?.getValue();return this.events.next(new Mo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?_t:Promise.resolve(h)}),FO(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Ee(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ae(b({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new Nu(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:h,extractedUrl:f,source:g,restoredState:_,extras:m}=u,w=new Mo(h,this.urlSerializer.serialize(f),g,_);this.events.next(w);let P=GE(this.rootComponentType).snapshot;return this.currentTransition=o=ae(b({},u),{targetSnapshot:P,urlAfterRedirects:f,extras:ae(b({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,O(o)}else{let h="";return this.events.next(new Vr(u.id,this.urlSerializer.serialize(u.extractedUrl),h,hp.IgnoredByUrlHandlingStrategy)),u.resolve(null),_t}}),Ee(u=>{let l=new fp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),B(u=>(this.currentTransition=o=ae(b({},u),{guards:eO(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),lO(this.environmentInjector,u=>this.events.next(u)),Ee(u=>{if(o.guardsResult=u.guardsResult,os(u.guardsResult))throw YE(this.urlSerializer,u.guardsResult);let l=new pp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),dt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",At.GuardRejected),!1)),op(u=>{if(u.guards.canActivateChecks.length)return O(u).pipe(Ee(l=>{let d=new gp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ht(l=>{let d=!1;return O(l).pipe(LO(this.paramsInheritanceStrategy,this.environmentInjector),Ee({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",At.NoDataFromResolver)}}))}),Ee(l=>{let d=new mp(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),op(u=>{let l=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(Ee(f=>{d.component=f}),B(()=>{})));for(let f of d.children)h.push(...l(f));return h};return hc(l(u.targetSnapshot.root)).pipe(Bn(null),yn(1))}),op(()=>this.afterPreactivation()),ht(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return d?fe(d).pipe(B(()=>o)):O(o)}),B(u=>{let l=Gx(r.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=ae(b({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Ee(()=>{this.events.next(new Po)}),Zx(this.rootContexts,r.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),yn(1),Ee({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Lr(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),nh(this.transitionAbortSubject.pipe(Ee(u=>{throw u}))),$n(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",At.SupersededByNewNavigation),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Un(u=>{if(c=!0,XE(u))this.events.next(new Jn(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),Qx(u)?this.events.next(new xo(u.url)):o.resolve(!1);else{this.events.next(new No(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(u))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return _t}))}))}cancelNavigationTransition(r,i,s){let o=new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function KO(t){return t!==Ao}var QO=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(YO),providedIn:"root"});let t=e;return t})(),xp=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},YO=(()=>{let e=class e extends xp{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ho(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),sD=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:()=>D(JO),providedIn:"root"});let t=e;return t})(),JO=(()=>{let e=class e extends sD{constructor(){super(...arguments),this.location=D(go),this.urlSerializer=D(Op),this.options=D(Bp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=D(Hp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Yn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=GE(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof Mo)this.stateMemento=this.createStateMemento();else if(r instanceof Vr)this.rawUrlTree=i.initialUrl;else if(r instanceof Nu){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Po?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof Jn&&(r.code===At.GuardRejected||r.code===At.NoDataFromResolver)?this.restoreHistory(i):r instanceof No?this.restoreHistory(i,!0):r instanceof Lr&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=b(b({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=b(b({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ho(e)))(s||e)}})(),e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(bo||{});function XO(t,e){t.events.pipe(dt(n=>n instanceof Lr||n instanceof Jn||n instanceof No||n instanceof Vr),B(n=>n instanceof Lr||n instanceof Vr?bo.COMPLETE:(n instanceof Jn?n.code===At.Redirect||n.code===At.SupersededByNewNavigation:!1)?bo.REDIRECTING:bo.FAILED),dt(n=>n!==bo.REDIRECTING),yn(1)).subscribe(()=>{e()})}function ZO(t){throw t}var ek={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},oD=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=D(cu),this.stateManager=D(sD),this.options=D(Bp,{optional:!0})||{},this.pendingTasks=D(Pr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=D(WO),this.urlSerializer=D(Op),this.location=D(go),this.urlHandlingStrategy=D(Hp),this._events=new lt,this.errorHandler=this.options.errorHandler||ZO,this.navigated=!1,this.routeReuseStrategy=D(QO),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=D($p,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!D(Vp,{optional:!0}),this.eventsSubscription=new Ie,this.isNgZoneEnabled=D(re)instanceof re&&re.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Jn&&i.code!==At.Redirect&&i.code!==At.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Lr)this.navigated=!0;else if(i instanceof xo){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||KO(s.source)};this.scheduleNavigation(a,Ao,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}rk(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ao,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=b({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(r);this.scheduleNavigation(c,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(Up),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=i,l=u?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=b(b({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=$E(f)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),h=this.currentUrlTree.root}return HE(h,r,d,l??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=os(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ao,null,i)}navigate(r,i={skipLocationChange:!1}){return nk(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=b({},ek):i===!1?s=b({},tk):s=i,os(r))return AE(this.currentUrlTree,r,s);let o=this.parseUrl(r);return AE(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,l;a?(c=a.resolve,u=a.reject,l=a.promise):l=new Promise((h,f)=>{c=h,u=f});let d=this.pendingTasks.add();return XO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(h=>Promise.reject(h))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function nk(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new M(4008,!1)}function rk(t){return!(t instanceof Po)&&!(t instanceof xo)}var ik=new A("");function aD(t,...e){return Hi([{provide:$p,multi:!0,useValue:t},[],{provide:as,useFactory:sk,deps:[oD]},{provide:uu,multi:!0,useFactory:ok},e.map(n=>n.\u0275providers)])}function sk(t){return t.routerState.root}function ok(){let t=D(bt);return e=>{let n=t.get(Ji);if(e!==n.components[0])return;let r=t.get(oD),i=t.get(ak);t.get(ck)===1&&r.initialNavigation(),t.get(uk,null,H.Optional)?.setUpPreloading(),t.get(ik,null,H.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var ak=new A("",{factory:()=>new lt}),ck=new A("",{providedIn:"root",factory:()=>1});var uk=new A("");var An=class{constructor(e,n,r){this.id=e,this.nom=n,this.data=r}};var uD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},lk=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],c=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},lD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|u>>6,f=u&63;c||(f=64,o||(h=64)),r.push(n[l],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(uD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new zp;let h=s<<2|a>>4;if(r.push(h),u!==64){let f=a<<4&240|u>>2;if(r.push(f),d!==64){let g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},zp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},dk=function(t){let e=uD(t);return lD.encodeByteArray(e,!0)},jo=function(t){return dk(t).replace(/\./g,"")},Wp=function(t){try{return lD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function hk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var fk=()=>hk().__FIREBASE_DEFAULTS__,pk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Wp(t[1]);return e&&JSON.parse(e)},ju=()=>{try{return fk()||pk()||gk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dD=t=>{var e,n;return(n=(e=ju())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Bu=t=>{let e=dD(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Kp=()=>{var t;return(t=ju())===null||t===void 0?void 0:t.config},hD=t=>{var e;return(e=ju())===null||e===void 0?void 0:e[`_${t}`]};var Uu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function $u(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[jo(JSON.stringify(n)),jo(JSON.stringify(o)),""].join(".")}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function fD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function mk(){var t;let e=(t=ju())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pD(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function gD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mD(){return!mk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Hu(){try{return typeof indexedDB=="object"}catch{return!1}}function yD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var yk="FirebaseError",st=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yk,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sn.prototype.create)}},Sn=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?vk(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new st(i,a,r)}};function vk(t,e){return t.replace(_k,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var _k=/\{\$([^}]+)}/g;function ls(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(cD(s)&&cD(o)){if(!ls(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function cD(t){return t!==null&&typeof t=="object"}function Qp(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vD(t,e){let n=new Gp(t,e);return n.subscribe.bind(n)}var Gp=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wk(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=qp),i.error===void 0&&(i.error=qp),i.complete===void 0&&(i.complete=qp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function wk(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function qp(){}var EW=4*60*60*1e3;function ot(t){return t&&t._delegate?t._delegate:t}var at=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ur="[DEFAULT]";var Yp=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Uu;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ek(e))try{this.getOrInitializeService({instanceIdentifier:Ur})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ur){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return p(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ur){return this.instances.has(e)}getOptions(e=Ur){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ik(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ur){return this.component?this.component.multipleInstances?e:Ur:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Ik(t){return t===Ur?void 0:t}function Ek(t){return t.instantiationMode==="EAGER"}var qu=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Yp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Dk=[],W=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(W||{}),Tk={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},bk=W.INFO,Ck={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Ak=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=Ck[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Zn=class{constructor(e){this.name=e,this._logLevel=bk,this._logHandler=Ak,this._userLogHandler=null,Dk.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Tk[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};var Sk=(t,e)=>e.some(n=>t instanceof n),_D,wD;function Rk(){return _D||(_D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Mk(){return wD||(wD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var ID=new WeakMap,Xp=new WeakMap,ED=new WeakMap,Jp=new WeakMap,eg=new WeakMap;function Nk(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ID.set(n,t)}).catch(()=>{}),eg.set(e,t),e}function Pk(t){if(Xp.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Xp.set(t,e)}var Zp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Xp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||ED.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function DD(t){Zp=t(Zp)}function xk(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(zu(this),e,...n);return ED.set(r,e.sort?e.sort():[e]),tn(r)}:Mk().includes(t)?function(...e){return t.apply(zu(this),e),tn(ID.get(this))}:function(...e){return tn(t.apply(zu(this),e))}}function Ok(t){return typeof t=="function"?xk(t):(t instanceof IDBTransaction&&Pk(t),Sk(t,Rk())?new Proxy(t,Zp):t)}function tn(t){if(t instanceof IDBRequest)return Nk(t);if(Jp.has(t))return Jp.get(t);let e=Ok(t);return e!==t&&(Jp.set(t,e),eg.set(e,t)),e}var zu=t=>eg.get(t);function bD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=tn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(tn(o.result),c.oldVersion,c.newVersion,tn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var kk=["get","getKey","getAll","getAllKeys","count"],Fk=["put","add","delete","clear"],tg=new Map;function TD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(tg.get(e))return tg.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=Fk.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||kk.includes(n)))return;let s=function(o,...a){return p(this,null,function*(){let c=this.transaction(o,i?"readwrite":"readonly"),u=c.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&c.done]))[0]})};return tg.set(e,s),s}DD(t=>ae(b({},t),{get:(e,n,r)=>TD(e,n)||t.get(e,n,r),has:(e,n)=>!!TD(e,n)||t.has(e,n)}));var rg=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lk(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function Lk(t){let e=t.getComponent();return e?.type==="VERSION"}var ig="@firebase/app",CD="0.9.27";var jr=new Zn("@firebase/app"),Vk="@firebase/app-compat",Uk="@firebase/analytics-compat",jk="@firebase/analytics",Bk="@firebase/app-check-compat",$k="@firebase/app-check",Hk="@firebase/auth",qk="@firebase/auth-compat",zk="@firebase/database",Gk="@firebase/database-compat",Wk="@firebase/functions",Kk="@firebase/functions-compat",Qk="@firebase/installations",Yk="@firebase/installations-compat",Jk="@firebase/messaging",Xk="@firebase/messaging-compat",Zk="@firebase/performance",e1="@firebase/performance-compat",t1="@firebase/remote-config",n1="@firebase/remote-config-compat",r1="@firebase/storage",i1="@firebase/storage-compat",s1="@firebase/firestore",o1="@firebase/firestore-compat",a1="firebase",c1="10.8.0";var sg="[DEFAULT]",u1={[ig]:"fire-core",[Vk]:"fire-core-compat",[jk]:"fire-analytics",[Uk]:"fire-analytics-compat",[$k]:"fire-app-check",[Bk]:"fire-app-check-compat",[Hk]:"fire-auth",[qk]:"fire-auth-compat",[zk]:"fire-rtdb",[Gk]:"fire-rtdb-compat",[Wk]:"fire-fn",[Kk]:"fire-fn-compat",[Qk]:"fire-iid",[Yk]:"fire-iid-compat",[Jk]:"fire-fcm",[Xk]:"fire-fcm-compat",[Zk]:"fire-perf",[e1]:"fire-perf-compat",[t1]:"fire-rc",[n1]:"fire-rc-compat",[r1]:"fire-gcs",[i1]:"fire-gcs-compat",[s1]:"fire-fst",[o1]:"fire-fst-compat","fire-js":"fire-js",[a1]:"fire-js-all"};var Bo=new Map,og=new Map;function l1(t,e){try{t.container.addComponent(e)}catch(n){jr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function nn(t){let e=t.name;if(og.has(e))return jr.debug(`There were multiple attempts to register component ${e}.`),!1;og.set(e,t);for(let n of Bo.values())l1(n,t);return!0}function Ho(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var d1={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},er=new Sn("app","Firebase",d1);var ag=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new at("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw er.create("app-deleted",{appName:this._name})}};var tr=c1;function Gu(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:sg,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw er.create("bad-app-name",{appName:String(i)});if(n||(n=Kp()),!n)throw er.create("no-options");let s=Bo.get(i);if(s){if(ls(n,s.options)&&ls(r,s.config))return s;throw er.create("duplicate-app",{appName:i})}let o=new qu(i);for(let c of og.values())o.addComponent(c);let a=new ag(n,r,o);return Bo.set(i,a),a}function Br(t=sg){let e=Bo.get(t);if(!e&&t===sg&&Kp())return Gu();if(!e)throw er.create("no-app",{appName:t});return e}function Wu(){return Array.from(Bo.values())}function ge(t,e,n){var r;let i=(r=u1[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jr.warn(a.join(" "));return}nn(new at(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var h1="firebase-heartbeat-database",f1=1,$o="firebase-heartbeat-store",ng=null;function MD(){return ng||(ng=bD(h1,f1,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($o)}catch(n){console.warn(n)}}}}).catch(t=>{throw er.create("idb-open",{originalErrorMessage:t.message})})),ng}function p1(t){return p(this,null,function*(){try{let n=(yield MD()).transaction($o),r=yield n.objectStore($o).get(ND(t));return yield n.done,r}catch(e){if(e instanceof st)jr.warn(e.message);else{let n=er.create("idb-get",{originalErrorMessage:e?.message});jr.warn(n.message)}}})}function AD(t,e){return p(this,null,function*(){try{let r=(yield MD()).transaction($o,"readwrite");yield r.objectStore($o).put(e,ND(t)),yield r.done}catch(n){if(n instanceof st)jr.warn(n.message);else{let r=er.create("idb-set",{originalErrorMessage:n?.message});jr.warn(r.message)}}})}function ND(t){return`${t.name}!${t.options.appId}`}var g1=1024,m1=30*24*60*60*1e3,cg=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ug(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return p(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=SD();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=m1}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return p(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=SD(),{heartbeatsToSend:r,unsentEntries:i}=y1(this._heartbeatsCache.heartbeats),s=jo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function SD(){return new Date().toISOString().substring(0,10)}function y1(t,e=g1){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),RD(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),RD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ug=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return p(this,null,function*(){return Hu()?yD().then(()=>!0).catch(()=>!1):!1})}read(){return p(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield p1(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return p(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return AD(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function RD(t){return jo(JSON.stringify({version:2,heartbeats:t})).length}function v1(t){nn(new at("platform-logger",e=>new rg(e),"PRIVATE")),nn(new at("heartbeat",e=>new cg(e),"PRIVATE")),ge(ig,CD,t),ge(ig,CD,"esm2017"),ge("fire-js","")}v1("");var _1="firebase",w1="10.8.0";ge(_1,w1,"app");var nr=new En("ANGULARFIRE2_VERSION");function qo(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var qr=(t,e)=>{let n=e?[e]:Wu(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},Hr=class{constructor(){return qr(I1)}},I1="app-check";function ds(){}var Ku=class{zone;delegate;constructor(e,n=Wd){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},lg=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ds,{},ds,ds)),n.pipe(Ee({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},zr=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Ku(Zone.current)),this.insideAngular=n.run(()=>new Ku(Zone.current,Gd)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(N(re))};static \u0275prov=S({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Qu(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function E1(t){return Qu().ngZone.runOutsideAngular(()=>t())}function $r(t){return Qu().ngZone.run(()=>t())}function D1(t){return T1(Qu())(t)}function T1(t){return function(n){return n=n.lift(new lg(t.ngZone)),n.pipe(Vn(t.outsideAngular),Ln(t.insideAngular))}}var b1=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),$r(()=>t.apply(void 0,r))},rn=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=$r(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ds,{},ds,ds))),r[s]=b1(r[s],n));let i=E1(()=>t.apply(this,r));if(!e)if(i instanceof q){let s=Qu();return i.pipe(Vn(s.outsideAngular),Ln(s.insideAngular))}else return $r(()=>i);return i instanceof q?i.pipe(D1):i instanceof Promise?$r(()=>new Promise((s,o)=>i.then(a=>$r(()=>s(a)),a=>$r(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:$r(()=>i)};var Rn=class{constructor(e){return e}},Gr=class{constructor(){return Wu()}};function C1(t){return t&&t.length===1?t[0]:new Rn(Br())}var dg=new A("angularfire2._apps"),A1={provide:Rn,useFactory:C1,deps:[[new He,dg]]},S1={provide:Gr,deps:[[new He,dg]]};function R1(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Rn(r)}}var M1=(()=>{class t{constructor(n){ge("angularfire",nr.full,"core"),ge("angularfire",nr.full,"app"),ge("angular",qI.full,n.toString())}static \u0275fac=function(r){return new(r||t)(N(Jt))};static \u0275mod=rt({type:t});static \u0275inj=nt({providers:[A1,S1]})}return t})();function PD(t,...e){return{ngModule:M1,providers:[{provide:dg,useFactory:R1(t),multi:!0,deps:[re,bt,zr,...e]}]}}function UD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var jD=UD,BD=new Sn("auth","Firebase",UD());var Xu=new Zn("@firebase/auth");function P1(t,...e){Xu.logLevel<=W.WARN&&Xu.warn(`Auth (${tr}): ${t}`,...e)}function Ju(t,...e){Xu.logLevel<=W.ERROR&&Xu.error(`Auth (${tr}): ${t}`,...e)}function xD(t,...e){throw Dg(t,...e)}function Eg(t,...e){return Dg(t,...e)}function x1(t,e,n){let r=Object.assign(Object.assign({},jD()),{[e]:n});return new Sn("auth","Firebase",r).create(e,{appName:t.name})}function Dg(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return BD.create(t,...e)}function se(t,e,...n){if(!t)throw Dg(e,...n)}function zo(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Ju(e),new Error(e)}function Zu(t,e){t||zo(e)}function O1(){return OD()==="http:"||OD()==="https:"}function OD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function k1(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(O1()||pD()||"connection"in navigator)?navigator.onLine:!0}function F1(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Kr=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Zu(n>e,"Short delay should be less than long delay!"),this.isMobile=fD()||gD()}get(){return k1()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function L1(t,e){Zu(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var el=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var V1={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var U1=new Kr(3e4,6e4);function $D(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function al(s,o,a,c){return p(this,arguments,function*(t,e,n,r,i={}){return HD(t,i,()=>p(this,null,function*(){let u={},l={};r&&(e==="GET"?l=r:u={body:JSON.stringify(r)});let d=Qp(Object.assign({key:t.config.apiKey},l)).slice(1),h=yield t._getAdditionalHeaders();return h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode),el.fetch()(qD(t,t.config.apiHost,n,d),Object.assign({method:e,headers:h,referrerPolicy:"no-referrer"},u))}))})}function HD(t,e,n){return p(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},V1),e);try{let i=new pg(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Yu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yu(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Yu(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Yu(t,"user-disabled",o);let l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw x1(t,l,u);xD(t,l)}}catch(i){if(i instanceof st)throw i;xD(t,"network-request-failed",{message:String(i)})}})}function qD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?L1(t.config,i):`${t.config.apiScheme}://${i}`}var pg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Eg(this.auth,"network-request-failed")),U1.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yu(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=Eg(t,e,r);return i.customData._tokenResponse=n,i}function j1(t,e){return p(this,null,function*(){return al(t,"POST","/v1/accounts:delete",e)})}function B1(t,e){return p(this,null,function*(){return al(t,"POST","/v1/accounts:lookup",e)})}function Go(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Tg(t,e=!1){return p(this,null,function*(){let n=ot(t),r=yield n.getIdToken(e),i=zD(r);se(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Go(hg(i.auth_time)),issuedAtTime:Go(hg(i.iat)),expirationTime:Go(hg(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function hg(t){return Number(t)*1e3}function zD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ju("JWT malformed, contained fewer than 3 sections"),null;try{let i=Wp(n);return i?JSON.parse(i):(Ju("Failed to decode base64 JWT payload"),null)}catch(i){return Ju("Caught error parsing JWT payload as JSON",i?.toString()),null}}function $1(t){let e=zD(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function gg(t,e,n=!1){return p(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof st&&H1(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function H1({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var mg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>p(this,null,function*(){yield this.iteration()}),n)}iteration(){return p(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var tl=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Go(this.lastLoginAt),this.creationTime=Go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function nl(t){return p(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield gg(t,B1(n,{idToken:r}));se(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?z1(s.providerUserInfo):[],a=q1(t.providerData,o),c=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tl(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(t,d)})}function bg(t){return p(this,null,function*(){let e=ot(t);yield nl(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function q1(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function z1(t){return t.map(e=>{var{providerId:n}=e,r=Kd(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function G1(t,e){return p(this,null,function*(){let n=yield HD(t,{},()=>p(this,null,function*(){let r=Qp({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=qD(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",el.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function W1(t,e){return p(this,null,function*(){return al(t,"POST","/v2/accounts:revokeToken",$D(t,e))})}var rl=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$1(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){return p(this,null,function*(){return se(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return p(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield G1(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(se(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(se(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return zo("not implemented")}};function rr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var il=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=Kd(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tl(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return p(this,null,function*(){let n=yield gg(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return Tg(this,e)}reload(){return bg(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return p(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield nl(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return p(this,null,function*(){let e=yield this.getIdToken();return yield gg(this,j1(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,c,u,l;let d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,g=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,m=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(u=n.createdAt)!==null&&u!==void 0?u:void 0,P=(l=n.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:j,emailVerified:C,isAnonymous:te,providerData:Y,stsTokenManager:Oe}=n;se(j&&Oe,e,"internal-error");let vt=rl.fromJSON(this.name,Oe);se(typeof j=="string",e,"internal-error"),rr(d,e.name),rr(h,e.name),se(typeof C=="boolean",e,"internal-error"),se(typeof te=="boolean",e,"internal-error"),rr(f,e.name),rr(g,e.name),rr(_,e.name),rr(m,e.name),rr(w,e.name),rr(P,e.name);let fr=new t({uid:j,auth:e,email:h,emailVerified:C,displayName:d,isAnonymous:te,photoURL:g,phoneNumber:f,tenantId:_,stsTokenManager:vt,createdAt:w,lastLoginAt:P});return Y&&Array.isArray(Y)&&(fr.providerData=Y.map($a=>Object.assign({},$a))),m&&(fr._redirectEventId=m),fr}static _fromIdTokenResponse(e,n,r=!1){return p(this,null,function*(){let i=new rl;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield nl(s),s})}};var kD=new Map;function Wr(t){Zu(t instanceof Function,"Expected a class definition");let e=kD.get(t);return e?(Zu(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,kD.set(t,e),e)}var K1=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return p(this,null,function*(){return!0})}_set(n,r){return p(this,null,function*(){this.storage[n]=r})}_get(n){return p(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return p(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),yg=K1;function fg(t,e,n){return`firebase:${t}:${e}:${n}`}var sl=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=fg(this.userKey,i.apiKey,s),this.fullPersistenceKey=fg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return p(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?il._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return p(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return p(this,null,function*(){if(!n.length)return new t(Wr(yg),e,r);let i=(yield Promise.all(n.map(u=>p(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Wr(yg),o=fg(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let l=yield u._get(o);if(l){let d=il._fromJSON(e,l);u!==s&&(a=d),s=u;break}}catch{}let c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new t(s,e,r):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>p(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function FD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(X1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Q1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eF(e))return"Blackberry";if(tF(e))return"Webos";if(Y1(e))return"Safari";if((e.includes("chrome/")||J1(e))&&!e.includes("edge/"))return"Chrome";if(Z1(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Q1(t=ze()){return/firefox\//i.test(t)}function Y1(t=ze()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function J1(t=ze()){return/crios\//i.test(t)}function X1(t=ze()){return/iemobile/i.test(t)}function Z1(t=ze()){return/android/i.test(t)}function eF(t=ze()){return/blackberry/i.test(t)}function tF(t=ze()){return/webos/i.test(t)}function GD(t,e=[]){let n;switch(t){case"Browser":n=FD(ze());break;case"Worker":n=`${FD(ze())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${tr}/${r}`}var vg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return p(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function nF(n){return p(this,arguments,function*(t,e={}){return al(t,"GET","/v2/passwordPolicy",$D(t,e))})}var rF=6,_g=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:rF,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var wg=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ol(this),this.idTokenSubscription=new ol(this),this.beforeStateQueue=new vg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Wr(n)),this._initializationPromise=this.queue(()=>p(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield sl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return p(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUser(e){return p(this,null,function*(){var n;let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return p(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return p(this,null,function*(){try{yield nl(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=F1()}_delete(){return p(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return p(this,null,function*(){let n=e?ot(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return p(this,null,function*(){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>p(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return p(this,null,function*(){return yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0)})}setPersistence(e){return this.queue(()=>p(this,null,function*(){yield this.assertedPersistence.setPersistence(Wr(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return p(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return p(this,null,function*(){let e=yield nF(this),n=new _g(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sn("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return p(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield W1(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return p(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return p(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Wr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=yield sl.create(this,[Wr(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return p(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>p(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return p(this,null,function*(){if(e===this.currentUser)return this.queue(()=>p(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let c=e.addObserver(n,r,i);return()=>{o=!0,c()}}else{let c=e.addObserver(n);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return p(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return p(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return p(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&P1(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function iF(t){return ot(t)}var ol=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=vD(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var sF={loadJS(){return p(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oF(t){sF=t}function aF(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function cF(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Wr);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var m3=aF("rcb"),y3=new Kr(3e4,6e4);var v3=new Kr(2e3,1e4);var _3=10*60*1e3;var w3=new Kr(3e4,6e4);var I3=new Kr(5e3,15e3);var E3=encodeURIComponent("fac");var LD="@firebase/auth",VD="1.6.0";var Ig=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return p(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function uF(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lF(t){nn(new at("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let c={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GD(t)},u=new wg(r,i,s,c);return cF(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),nn(new at("auth-internal",e=>{let n=iF(e.getProvider("auth").getImmediate());return(r=>new Ig(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ge(LD,VD,uF(t)),ge(LD,VD,"esm2017")}var dF=5*60,D3=hD("authIdTokenMaxAge")||dF;function hF(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}oF({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=Eg("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",hF().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lF("Browser");var dL="auth";var hs=class{constructor(){return qr(dL)}};var hL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},jt={},I,Wg=Wg||{},k=hL||self;function Il(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function oa(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function fL(t){return Object.prototype.hasOwnProperty.call(t,Cg)&&t[Cg]||(t[Cg]=++pL)}var Cg="closure_uid_"+(1e9*Math.random()>>>0),pL=0;function gL(t,e,n){return t.call.apply(t.bind,arguments)}function mL(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Ge(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Ge=gL:Ge=mL,Ge.apply(null,arguments)}function cl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Pe(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function ir(){this.s=this.s,this.o=this.o}var yL=0;ir.prototype.s=!1;ir.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),yL!=0)&&fL(this)};ir.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var sT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Kg(t){let e=t.length;if(0<e){let n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function WD(t,e){for(let n=1;n<arguments.length;n++){let r=arguments[n];if(Il(r)){let i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function We(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}We.prototype.h=function(){this.defaultPrevented=!0};var vL=function(){if(!k.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{let n=()=>{};k.addEventListener("test",n,e),k.removeEventListener("test",n,e)}catch{}return t}();function Xo(t){return/^[\s\xa0]*$/.test(t)}function El(){var t=k.navigator;return t&&(t=t.userAgent)?t:""}function sn(t){return El().indexOf(t)!=-1}function Qg(t){return Qg[" "](t),t}Qg[" "]=function(){};function _L(t,e){var n=aV;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var wL=sn("Opera"),ms=sn("Trident")||sn("MSIE"),oT=sn("Edge"),Ng=oT||ms,aT=sn("Gecko")&&!(El().toLowerCase().indexOf("webkit")!=-1&&!sn("Edge"))&&!(sn("Trident")||sn("MSIE"))&&!sn("Edge"),IL=El().toLowerCase().indexOf("webkit")!=-1&&!sn("Edge");function cT(){var t=k.document;return t?t.documentMode:void 0}var Pg;e:{if(ul="",ll=function(){var t=El();if(aT)return/rv:([^\);]+)(\)|;)/.exec(t);if(oT)return/Edge\/([\d\.]+)/.exec(t);if(ms)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(IL)return/WebKit\/(\S+)/.exec(t);if(wL)return/(?:Version)[ \/]?(\S+)/.exec(t)}(),ll&&(ul=ll?ll[1]:""),ms&&(dl=cT(),dl!=null&&dl>parseFloat(ul))){Pg=String(dl);break e}Pg=ul}var ul,ll,dl,xg;k.document&&ms?(Ag=cT(),xg=Ag||parseInt(Pg,10)||void 0):xg=void 0;var Ag,EL=xg;function Zo(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(aT){e:{try{Qg(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:DL[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Zo.$.h.call(this)}}Pe(Zo,We);var DL={2:"touch",3:"pen",4:"mouse"};Zo.prototype.h=function(){Zo.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var aa="closure_listenable_"+(1e6*Math.random()|0),TL=0;function bL(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++TL,this.fa=this.ia=!1}function Dl(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function Yg(t,e,n){for(let r in t)e.call(n,t[r],r,t)}function CL(t,e){for(let n in t)e.call(void 0,t[n],n,t)}function uT(t){let e={};for(let n in t)e[n]=t[n];return e}var KD="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<KD.length;s++)n=KD[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Tl(t){this.src=t,this.g={},this.h=0}Tl.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=kg(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new bL(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function Og(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=sT(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Dl(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function kg(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Jg="closure_lm_"+(1e6*Math.random()|0),Sg={};function dT(t,e,n,r,i){if(r&&r.once)return fT(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)dT(t,e[s],n,r,i);return null}return n=em(n),t&&t[aa]?t.O(e,n,oa(r)?!!r.capture:!!r,i):hT(t,e,n,!1,r,i)}function hT(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=oa(i)?!!i.capture:!!i,a=Zg(t);if(a||(t[Jg]=a=new Tl(t)),n=a.add(e,n,r,o,s),n.proxy)return n;if(r=AL(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vL||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function AL(){function t(n){return e.call(t.src,t.listener,n)}let e=SL;return t}function fT(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)fT(t,e[s],n,r,i);return null}return n=em(n),t&&t[aa]?t.P(e,n,oa(r)?!!r.capture:!!r,i):hT(t,e,n,!0,r,i)}function pT(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)pT(t,e[s],n,r,i);else r=oa(r)?!!r.capture:!!r,n=em(n),t&&t[aa]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=kg(s,n,r,i),-1<n&&(Dl(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Zg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=kg(e,n,r,i)),(n=-1<t?e[t]:null)&&Xg(n))}function Xg(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[aa])Og(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Zg(e))?(Og(n,t),n.h==0&&(n.src=null,e[Jg]=null)):Dl(t)}}}function gT(t){return t in Sg?Sg[t]:Sg[t]="on"+t}function SL(t,e){if(t.fa)t=!0;else{e=new Zo(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Xg(t),t=n.call(r,e)}return t}function Zg(t){return t=t[Jg],t instanceof Tl?t:null}var Rg="__closure_events_fn_"+(1e9*Math.random()>>>0);function em(t){return typeof t=="function"?t:(t[Rg]||(t[Rg]=function(e){return t.handleEvent(e)}),t[Rg])}function Ne(){ir.call(this),this.i=new Tl(this),this.S=this,this.J=null}Pe(Ne,ir);Ne.prototype[aa]=!0;Ne.prototype.removeEventListener=function(t,e,n,r){pT(this,t,e,n,r)};function Ue(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new We(e,t);else if(e instanceof We)e.target=e.target||t;else{var i=e;e=new We(r,t),lT(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=hl(o,r,!0,e)&&i}if(o=e.g=t,i=hl(o,r,!0,e)&&i,i=hl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=hl(o,r,!1,e)&&i}Ne.prototype.N=function(){if(Ne.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Dl(n[r]);delete t.g[e],t.h--}}this.J=null};Ne.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};Ne.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function hl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Og(t.i,o),i=a.call(c,r)!==!1&&i}}return i&&!r.defaultPrevented}var tm=k.JSON.stringify,Fg=class{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}};function RL(){var t=nm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Lg=class{constructor(){this.h=this.g=null}add(e,n){let r=mT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}},mT=new Fg(()=>new Vg,t=>t.reset()),Vg=class{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}};function ML(t){var e=1;t=t.split(":");let n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function NL(t){k.setTimeout(()=>{throw t},0)}var ea,ta=!1,nm=new Lg,yT=()=>{let t=k.Promise.resolve(void 0);ea=()=>{t.then(PL)}},PL=()=>{for(var t;t=RL();){try{t.h.call(t.g)}catch(n){NL(n)}var e=mT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ta=!1};function bl(t,e){Ne.call(this),this.h=t||1,this.g=e||k,this.j=Ge(this.qb,this),this.l=Date.now()}Pe(bl,Ne);I=bl.prototype;I.ga=!1;I.T=null;I.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Ue(this,"tick"),this.ga&&(rm(this),this.start()))}};I.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function rm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}I.N=function(){bl.$.N.call(this),rm(this),delete this.g};function im(t,e,n){if(typeof t=="function")n&&(t=Ge(t,n));else if(t&&typeof t.handleEvent=="function")t=Ge(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:k.setTimeout(t,e||0)}function vT(t){t.g=im(()=>{t.g=null,t.i&&(t.i=!1,vT(t))},t.j);let e=t.h;t.h=null,t.m.apply(null,e)}var Ug=class extends ir{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vT(this)}N(){super.N(),this.g&&(k.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function na(t){ir.call(this),this.h=t,this.g={}}Pe(na,ir);var QD=[];function _T(t,e,n,r){Array.isArray(n)||(n&&(QD[0]=n.toString()),n=QD);for(var i=0;i<n.length;i++){var s=dT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function wT(t){Yg(t.g,function(e,n){this.g.hasOwnProperty(n)&&Xg(e)},t),t.g={}}na.prototype.N=function(){na.$.N.call(this),wT(this)};na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Cl(){this.g=!0}Cl.prototype.Ea=function(){this.g=!1};function xL(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var d=l.split("_");o=2<=d.length&&d[1]=="type"?o+(l+"="+u+"&"):o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function OL(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ps(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+FL(t,n)+(r?" "+r:"")})}function kL(t,e){t.info(function(){return"TIMEOUT: "+e})}Cl.prototype.info=function(){};function FL(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return tm(n)}catch{return e}}var Xr={},YD=null;function Al(){return YD=YD||new Ne}Xr.Ta="serverreachability";function IT(t){We.call(this,Xr.Ta,t)}Pe(IT,We);function ra(t){let e=Al();Ue(e,new IT(e))}Xr.STAT_EVENT="statevent";function ET(t,e){We.call(this,Xr.STAT_EVENT,t),this.stat=e}Pe(ET,We);function Xe(t){let e=Al();Ue(e,new ET(e,t))}Xr.Ua="timingevent";function DT(t,e){We.call(this,Xr.Ua,t),this.size=e}Pe(DT,We);function ca(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return k.setTimeout(function(){t()},e)}var Sl={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},TT={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function sm(){}sm.prototype.h=null;function JD(t){return t.h||(t.h=t.i())}function bT(){}var ua={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function om(){We.call(this,"d")}Pe(om,We);function am(){We.call(this,"c")}Pe(am,We);var jg;function Rl(){}Pe(Rl,sm);Rl.prototype.g=function(){return new XMLHttpRequest};Rl.prototype.i=function(){return{}};jg=new Rl;function la(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new na(this),this.P=LL,t=Ng?125:void 0,this.V=new bl(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new CT}function CT(){this.i=null,this.g="",this.h=!1}var LL=45e3,AT={},Bg={};I=la.prototype;I.setTimeout=function(t){this.P=t};function $g(t,e,n){t.L=1,t.A=Nl(Nn(e)),t.u=n,t.S=!0,ST(t,null)}function ST(t,e){t.G=Date.now(),da(t),t.B=Nn(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),FT(n.i,"t",r),t.o=0,n=t.l.J,t.h=new CT,t.g=rb(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Ug(Ge(t.Pa,t,t.g),t.O)),_T(t.U,t.g,"readystatechange",t.nb),e=t.I?uT(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ra(),xL(t.j,t.v,t.B,t.m,t.W,t.u)}I.nb=function(t){t=t.target;let e=this.M;e&&on(t)==3?e.l():this.Pa(t)};I.Pa=function(t){try{if(t==this.g)e:{let l=on(this.g);var e=this.g.Ia();let d=this.g.da();if(!(3>l)&&(l!=3||Ng||this.g&&(this.h.h||this.g.ja()||tT(this.g)))){this.J||l!=4||e==7||(e==8||0>=d?ra(3):ra(2)),Ml(this);var n=this.g.da();this.ca=n;t:if(RT(this)){var r=tT(this.g);t="";var i=r.length,s=on(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qr(this),Jo(this);var o="";break t}this.h.i=new k.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,OL(this.j,this.v,this.B,this.m,this.W,l,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xo(a)){var u=a;break t}}u=null}if(n=u)ps(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hg(this,n);else{this.i=!1,this.s=3,Xe(12),Qr(this),Jo(this);break e}}this.S?(MT(this,l,o),Ng&&this.i&&l==3&&(_T(this.U,this.V,"tick",this.mb),this.V.start())):(ps(this.j,this.m,o,null),Hg(this,o)),l==4&&Qr(this),this.i&&!this.J&&(l==4?ZT(this.l,this):(this.i=!1,da(this)))}else iV(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.s=3,Xe(12)):(this.s=0,Xe(13)),Qr(this),Jo(this)}}}catch{}finally{}};function RT(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function MT(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=VL(t,n),i==Bg){e==4&&(t.s=4,Xe(14),r=!1),ps(t.j,t.m,null,"[Incomplete Response]");break}else if(i==AT){t.s=4,Xe(15),ps(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ps(t.j,t.m,i,null),Hg(t,i);RT(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Xe(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),fm(e),e.M=!0,Xe(11))):(ps(t.j,t.m,n,"[Invalid Chunked Response]"),Qr(t),Jo(t))}I.mb=function(){if(this.g){var t=on(this.g),e=this.g.ja();this.o<e.length&&(Ml(this),MT(this,t,e),this.i&&t!=4&&da(this))}};function VL(t,e){var n=t.o,r=e.indexOf(`
`,n);return r==-1?Bg:(n=Number(e.substring(n,r)),isNaN(n)?AT:(r+=1,r+n>e.length?Bg:(e=e.slice(r,r+n),t.o=r+n,e)))}I.cancel=function(){this.J=!0,Qr(this)};function da(t){t.Y=Date.now()+t.P,NT(t,t.P)}function NT(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=ca(Ge(t.lb,t),e)}function Ml(t){t.C&&(k.clearTimeout(t.C),t.C=null)}I.lb=function(){this.C=null;let t=Date.now();0<=t-this.Y?(kL(this.j,this.B),this.L!=2&&(ra(),Xe(17)),Qr(this),this.s=2,Jo(this)):NT(this,this.Y-t)};function Jo(t){t.l.H==0||t.J||ZT(t.l,t)}function Qr(t){Ml(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,rm(t.V),wT(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Hg(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||qg(n.i,t))){if(!t.K&&qg(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)yl(n),Ol(n);else break e;hm(n),Xe(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=ca(Ge(n.ib,n),6e3));if(1>=UT(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Yr(n,11)}else if((t.K||n.g==t)&&yl(n),!Xo(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let u=i[e];if(n.V=u[0],u=u[1],n.H==2)if(u[0]=="c"){n.K=u[1],n.pa=u[2];let l=u[3];l!=null&&(n.ra=l,n.l.info("VER="+n.ra));let d=u[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));let h=u[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;let f=t.g;if(f){let g=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(g){var s=r.i;s.g||g.indexOf("spdy")==-1&&g.indexOf("quic")==-1&&g.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(cm(s,s.h),s.h=null))}if(r.F){let _=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.Da=_,de(r.I,r.F,_))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=nb(r,r.J?r.pa:null,r.Y),o.K){jT(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.C&&(Ml(a),da(a)),r.g=o}else JT(r);0<n.j.length&&kl(n)}else u[0]!="stop"&&u[0]!="close"||Yr(n,7);else n.H==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?Yr(n,7):dm(n):u[0]!="noop"&&n.h&&n.h.Aa(u),n.A=0)}}ra(4)}catch{}}function UL(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Il(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function jL(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Il(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(let r in t)e[n++]=r;return e}}}function PT(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Il(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=jL(t),r=UL(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var xT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function BL(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Jr(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Jr){this.h=t.h,gl(this,t.j),this.s=t.s,this.g=t.g,ml(this,t.m),this.l=t.l;var e=t.i,n=new ia;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),XD(this,n),this.o=t.o}else t&&(e=String(t).match(xT))?(this.h=!1,gl(this,e[1]||"",!0),this.s=Qo(e[2]||""),this.g=Qo(e[3]||"",!0),ml(this,e[4]),this.l=Qo(e[5]||"",!0),XD(this,e[6]||"",!0),this.o=Qo(e[7]||"")):(this.h=!1,this.i=new ia(null,this.h))}Jr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Yo(e,ZD,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Yo(e,ZD,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Yo(n,n.charAt(0)=="/"?qL:HL,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Yo(n,GL)),t.join("")};function Nn(t){return new Jr(t)}function gl(t,e,n){t.j=n?Qo(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ml(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function XD(t,e,n){e instanceof ia?(t.i=e,WL(t.i,t.h)):(n||(e=Yo(e,zL)),t.i=new ia(e,t.h))}function de(t,e,n){t.i.set(e,n)}function Nl(t){return de(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Qo(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Yo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,$L),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function $L(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var ZD=/[#\/\?@]/g,HL=/[#\?:]/g,qL=/[#\?]/g,zL=/[#\?@]/g,GL=/#/g;function ia(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function sr(t){t.g||(t.g=new Map,t.h=0,t.i&&BL(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}I=ia.prototype;I.add=function(t,e){sr(this),this.i=null,t=ys(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function OT(t,e){sr(t),e=ys(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function kT(t,e){return sr(t),e=ys(t,e),t.g.has(e)}I.forEach=function(t,e){sr(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};I.ta=function(){sr(this);let t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){let i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};I.Z=function(t){sr(this);let e=[];if(typeof t=="string")kT(this,t)&&(e=e.concat(this.g.get(ys(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};I.set=function(t,e){return sr(this),this.i=null,t=ys(this,t),kT(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};I.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function FT(t,e,n){OT(t,e),0<n.length&&(t.i=null,t.g.set(ys(t,e),Kg(n)),t.h+=n.length)}I.toString=function(){if(this.i)return this.i;if(!this.g)return"";let t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];let s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function ys(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function WL(t,e){e&&!t.j&&(sr(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(OT(this,r),FT(this,i,n))},t)),t.j=e}var KL=class{constructor(t,e){this.g=t,this.map=e}};function LT(t){this.l=t||QL,k.PerformanceNavigationTiming?(t=k.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(k.g&&k.g.Ka&&k.g.Ka()&&k.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var QL=10;function VT(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function UT(t){return t.h?1:t.g?t.g.size:0}function qg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function cm(t,e){t.g?t.g.add(e):t.h=e}function jT(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}LT.prototype.cancel=function(){if(this.i=BT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let t of this.g.values())t.cancel();this.g.clear()}};function BT(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(let n of t.g.values())e=e.concat(n.F);return e}return Kg(t.i)}var YL=class{stringify(t){return k.JSON.stringify(t,void 0)}parse(t){return k.JSON.parse(t,void 0)}};function JL(){this.g=new YL}function XL(t,e,n){let r=n||"";try{PT(t,function(i,s){let o=i;oa(i)&&(o=tm(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ZL(t,e){let n=new Cl;if(k.Image){let r=new Image;r.onload=cl(fl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=cl(fl,n,r,"TestLoadImage: error",!1,e),r.onabort=cl(fl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=cl(fl,n,r,"TestLoadImage: timeout",!1,e),k.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function fl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ha(t){this.l=t.ec||null,this.j=t.ob||!1}Pe(ha,sm);ha.prototype.g=function(){return new Pl(this.l,this.j)};ha.prototype.i=function(t){return function(){return t}}({});function Pl(t,e){Ne.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=um,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Pe(Pl,Ne);var um=0;I=Pl.prototype;I.open=function(t,e){if(this.readyState!=um)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,sa(this)};I.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||k).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};I.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fa(this)),this.readyState=um};I.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,sa(this)),this.g&&(this.readyState=3,sa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof k.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$T(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $T(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}I.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?fa(this):sa(this),this.readyState==3&&$T(this)}};I.Za=function(t){this.g&&(this.response=this.responseText=t,fa(this))};I.Ya=function(t){this.g&&(this.response=t,fa(this))};I.ka=function(){this.g&&fa(this)};function fa(t){t.readyState=4,t.l=null,t.j=null,t.A=null,sa(t)}I.setRequestHeader=function(t,e){this.v.append(t,e)};I.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};I.getAllResponseHeaders=function(){if(!this.h)return"";let t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function sa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Pl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var eV=k.JSON.parse;function ve(t){Ne.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=HT,this.L=this.M=!1}Pe(ve,Ne);var HT="",tV=/^https?$/i,nV=["POST","PUT"];I=ve.prototype;I.Oa=function(t){this.M=t};I.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():jg.g(),this.C=this.u?JD(this.u):JD(jg),this.g.onreadystatechange=Ge(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){eT(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(let s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=k.FormData&&t instanceof k.FormData,!(0<=sT(nV,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{GT(this),0<this.B&&((this.L=rV(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ge(this.ua,this)):this.A=im(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){eT(this,s)}};function rV(t){return ms&&typeof t.timeout=="number"&&t.ontimeout!==void 0}I.ua=function(){typeof Wg<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Ue(this,"timeout"),this.abort(8))};function eT(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,qT(t),xl(t)}function qT(t){t.F||(t.F=!0,Ue(t,"complete"),Ue(t,"error"))}I.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Ue(this,"complete"),Ue(this,"abort"),xl(this))};I.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xl(this,!0)),ve.$.N.call(this)};I.La=function(){this.s||(this.G||this.v||this.l?zT(this):this.kb())};I.kb=function(){zT(this)};function zT(t){if(t.h&&typeof Wg<"u"&&(!t.C[1]||on(t)!=4||t.da()!=2)){if(t.v&&on(t)==4)im(t.La,0,t);else if(Ue(t,"readystatechange"),on(t)==4){t.h=!1;try{let o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(xT)[1]||null;!i&&k.self&&k.self.location&&(i=k.self.location.protocol.slice(0,-1)),r=!tV.test(i?i.toLowerCase():"")}n=r}if(n)Ue(t,"complete"),Ue(t,"success");else{t.m=6;try{var s=2<on(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",qT(t)}}finally{xl(t)}}}}function xl(t,e){if(t.g){GT(t);let n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Ue(t,"ready");try{n.onreadystatechange=r}catch{}}}function GT(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(k.clearTimeout(t.A),t.A=null)}I.isActive=function(){return!!this.g};function on(t){return t.g?t.g.readyState:0}I.da=function(){try{return 2<on(this)?this.g.status:-1}catch{return-1}};I.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};I.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),eV(e)}};function tT(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case HT:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function iV(t){let e={};t=(t.g&&2<=on(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Xo(t[r]))continue;var n=ML(t[r]);let i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();let s=e[i]||[];e[i]=s,s.push(n)}CL(e,function(r){return r.join(", ")})}I.Ia=function(){return this.m};I.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function WT(t){let e="";return Yg(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function lm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=WT(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):de(t,e,n))}function Wo(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function KT(t){this.Ga=0,this.j=[],this.l=new Cl,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Wo("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Wo("baseRetryDelayMs",5e3,t),this.hb=Wo("retryDelaySeedMs",1e4,t),this.eb=Wo("forwardChannelMaxRetries",2,t),this.xa=Wo("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new LT(t&&t.concurrentRequestLimit),this.Ja=new JL,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}I=KT.prototype;I.ra=8;I.H=1;function dm(t){if(QT(t),t.H==3){var e=t.W++,n=Nn(t.I);if(de(n,"SID",t.K),de(n,"RID",e),de(n,"TYPE","terminate"),pa(t,n),e=new la(t,t.l,e),e.L=2,e.A=Nl(Nn(n)),n=!1,k.navigator&&k.navigator.sendBeacon)try{n=k.navigator.sendBeacon(e.A.toString(),"")}catch{}!n&&k.Image&&(new Image().src=e.A,n=!0),n||(e.g=rb(e.l,null),e.g.ha(e.A)),e.G=Date.now(),da(e)}tb(t)}function Ol(t){t.g&&(fm(t),t.g.cancel(),t.g=null)}function QT(t){Ol(t),t.u&&(k.clearTimeout(t.u),t.u=null),yl(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&k.clearTimeout(t.m),t.m=null)}function kl(t){if(!VT(t.i)&&!t.m){t.m=!0;var e=t.Na;ea||yT(),ta||(ea(),ta=!0),nm.add(e,t),t.C=0}}function sV(t,e){return UT(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=ca(Ge(t.Na,t,e),eb(t,t.C)),t.C++,!0)}I.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;let i=new la(this,this.l,t),s=this.s;if(this.U&&(s?(s=uT(s),lT(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=YT(this,i,e),n=Nn(this.I),de(n,"RID",t),de(n,"CVER",22),this.F&&de(n,"X-HTTP-Session-Id",this.F),pa(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(WT(s)))+"&"+e:this.o&&lm(n,this.o,s)),cm(this.i,i),this.bb&&de(n,"TYPE","init"),this.P?(de(n,"$req",e),de(n,"SID","null"),i.aa=!0,$g(i,n,null)):$g(i,n,e),this.H=2}}else this.H==3&&(t?nT(this,t):this.j.length==0||VT(this.i)||nT(this))};function nT(t,e){var n;e?n=e.m:n=t.W++;let r=Nn(t.I);de(r,"SID",t.K),de(r,"RID",n),de(r,"AID",t.V),pa(t,r),t.o&&t.s&&lm(r,t.o,t.s),n=new la(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=YT(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),cm(t.i,n),$g(n,r,e)}function pa(t,e){t.na&&Yg(t.na,function(n,r){de(e,r,n)}),t.h&&PT({},function(n,r){de(e,r,n)})}function YT(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Ge(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){let o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let c=0;c<n;c++){let u=i[c].g,l=i[c].map;if(u-=s,0>u)s=Math.max(0,i[c].g-100),a=!1;else try{XL(l,o,"req"+u+"_")}catch{r&&r(l)}}if(a){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function JT(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ea||yT(),ta||(ea(),ta=!0),nm.add(e,t),t.A=0}}function hm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=ca(Ge(t.Ma,t),eb(t,t.A)),t.A++,!0)}I.Ma=function(){if(this.u=null,XT(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=ca(Ge(this.jb,this),t)}};I.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Xe(10),Ol(this),XT(this))};function fm(t){t.B!=null&&(k.clearTimeout(t.B),t.B=null)}function XT(t){t.g=new la(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Nn(t.wa);de(e,"RID","rpc"),de(e,"SID",t.K),de(e,"AID",t.V),de(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&de(e,"TO",t.qa),de(e,"TYPE","xmlhttp"),pa(t,e),t.o&&t.s&&lm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=Nl(Nn(e)),n.u=null,n.S=!0,ST(n,t)}I.ib=function(){this.v!=null&&(this.v=null,Ol(this),hm(this),Xe(19))};function yl(t){t.v!=null&&(k.clearTimeout(t.v),t.v=null)}function ZT(t,e){var n=null;if(t.g==e){yl(t),fm(t),t.g=null;var r=2}else if(qg(t.i,e))n=e.F,jT(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Al(),Ue(r,new DT(r,n)),kl(t)}else JT(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&sV(t,e)||r==2&&hm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Yr(t,5);break;case 4:Yr(t,10);break;case 3:Yr(t,6);break;default:Yr(t,2)}}}function eb(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Yr(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Ge(t.pb,t);n||(n=new Jr("//www.google.com/images/cleardot.gif"),k.location&&k.location.protocol=="http"||gl(n,"https"),Nl(n)),ZL(n.toString(),r)}else Xe(2);t.H=0,t.h&&t.h.za(e),tb(t),QT(t)}I.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Xe(2)):(this.l.info("Failed to ping google.com"),Xe(1))};function tb(t){if(t.H=0,t.ma=[],t.h){let e=BT(t.i);(e.length!=0||t.j.length!=0)&&(WD(t.ma,e),WD(t.ma,t.j),t.i.i.length=0,Kg(t.j),t.j.length=0),t.h.ya()}}function nb(t,e,n){var r=n instanceof Jr?Nn(n):new Jr(n);if(r.g!="")e&&(r.g=e+"."+r.g),ml(r,r.m);else{var i=k.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new Jr(null);r&&gl(s,r),e&&(s.g=e),i&&ml(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&de(r,n,e),de(r,"VER",t.ra),pa(t,r),r}function rb(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new ve(new ha({ob:n})):new ve(t.va),e.Oa(t.J),e}I.isActive=function(){return!!this.h&&this.h.isActive(this)};function ib(){}I=ib.prototype;I.Ba=function(){};I.Aa=function(){};I.za=function(){};I.ya=function(){};I.isActive=function(){return!0};I.Va=function(){};function vl(){if(ms&&!(10<=Number(EL)))throw Error("Environmental error: no available transport.")}vl.prototype.g=function(t,e){return new mt(t,e)};function mt(t,e){Ne.call(this),this.g=new KT(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Xo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Xo(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new vs(this)}Pe(mt,Ne);mt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Xe(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=nb(t,null,t.Y),kl(t)};mt.prototype.close=function(){dm(this.g)};mt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=tm(t),t=n);e.j.push(new KL(e.fb++,t)),e.H==3&&kl(e)};mt.prototype.N=function(){this.g.h=null,delete this.j,dm(this.g),delete this.g,mt.$.N.call(this)};function sb(t){om.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(let n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Pe(sb,om);function ob(){am.call(this),this.status=1}Pe(ob,am);function vs(t){this.g=t}Pe(vs,ib);vs.prototype.Ba=function(){Ue(this.g,"a")};vs.prototype.Aa=function(t){Ue(this.g,new sb(t))};vs.prototype.za=function(t){Ue(this.g,new ob)};vs.prototype.ya=function(){Ue(this.g,"b")};function oV(){this.blockSize=-1}function Ut(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}Pe(Ut,oV);Ut.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Mg(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Ut.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Mg(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Mg(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Mg(this,r),i=0;break}}this.h=i,this.i+=e};Ut.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function oe(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var aV={};function pm(t){return-128<=t&&128>t?_L(t,function(e){return new oe([e|0],0>e?-1:0)}):new oe([t|0],0>t?-1:0)}function an(t){if(isNaN(t)||!isFinite(t))return gs;if(0>t)return Ve(an(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=zg;return new oe(e,0)}function ab(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ve(ab(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=an(Math.pow(e,8)),r=gs,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=an(Math.pow(e,s)),r=r.R(s).add(an(o))):(r=r.R(n),r=r.add(an(o)))}return r}var zg=4294967296,gs=pm(0),Gg=pm(1),rT=pm(16777216);I=oe.prototype;I.ea=function(){if(Rt(this))return-Ve(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:zg+r)*e,e*=zg}return t};I.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Mn(this))return"0";if(Rt(this))return"-"+Ve(this).toString(t);for(var e=an(Math.pow(t,6)),n=this,r="";;){var i=wl(n,e).g;n=_l(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,Mn(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};I.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function Mn(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Rt(t){return t.h==-1}I.X=function(t){return t=_l(this,t),Rt(t)?-1:Mn(t)?0:1};function Ve(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new oe(n,~t.h).add(Gg)}I.abs=function(){return Rt(this)?Ve(this):this};I.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new oe(n,n[n.length-1]&-2147483648?-1:0)};function _l(t,e){return t.add(Ve(e))}I.R=function(t){if(Mn(this)||Mn(t))return gs;if(Rt(this))return Rt(t)?Ve(this).R(Ve(t)):Ve(Ve(this).R(t));if(Rt(t))return Ve(this.R(Ve(t)));if(0>this.X(rT)&&0>t.X(rT))return an(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,a=t.D(i)>>>16,c=t.D(i)&65535;n[2*r+2*i]+=o*c,pl(n,2*r+2*i),n[2*r+2*i+1]+=s*c,pl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,pl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,pl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new oe(n,0)};function pl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ko(t,e){this.g=t,this.h=e}function wl(t,e){if(Mn(e))throw Error("division by zero");if(Mn(t))return new Ko(gs,gs);if(Rt(t))return e=wl(Ve(t),e),new Ko(Ve(e.g),Ve(e.h));if(Rt(e))return e=wl(t,Ve(e)),new Ko(Ve(e.g),e.h);if(30<t.g.length){if(Rt(t)||Rt(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Gg,r=e;0>=r.X(t);)n=iT(n),r=iT(r);var i=fs(n,1),s=fs(r,1);for(r=fs(r,2),n=fs(n,2);!Mn(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=fs(r,1),n=fs(n,1)}return e=_l(t,i.R(e)),new Ko(i,e)}for(i=gs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=an(n),o=s.R(e);Rt(o)||0<o.X(t);)n-=r,s=an(n),o=s.R(e);Mn(s)&&(s=Gg),i=i.add(s),t=_l(t,o)}return new Ko(i,t)}I.gb=function(t){return wl(this,t).h};I.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new oe(n,this.h&t.h)};I.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new oe(n,this.h|t.h)};I.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new oe(n,this.h^t.h)};function iT(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new oe(n,t.h)}function fs(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new oe(i,t.h)}vl.prototype.createWebChannel=vl.prototype.g;mt.prototype.send=mt.prototype.u;mt.prototype.open=mt.prototype.m;mt.prototype.close=mt.prototype.close;Sl.NO_ERROR=0;Sl.TIMEOUT=8;Sl.HTTP_ERROR=6;TT.COMPLETE="complete";bT.EventType=ua;ua.OPEN="a";ua.CLOSE="b";ua.ERROR="c";ua.MESSAGE="d";Ne.prototype.listen=Ne.prototype.O;ve.prototype.listenOnce=ve.prototype.P;ve.prototype.getLastError=ve.prototype.Sa;ve.prototype.getLastErrorCode=ve.prototype.Ia;ve.prototype.getStatus=ve.prototype.da;ve.prototype.getResponseJson=ve.prototype.Wa;ve.prototype.getResponseText=ve.prototype.ja;ve.prototype.send=ve.prototype.ha;ve.prototype.setWithCredentials=ve.prototype.Oa;Ut.prototype.digest=Ut.prototype.l;Ut.prototype.reset=Ut.prototype.reset;Ut.prototype.update=Ut.prototype.j;oe.prototype.add=oe.prototype.add;oe.prototype.multiply=oe.prototype.R;oe.prototype.modulo=oe.prototype.gb;oe.prototype.compare=oe.prototype.X;oe.prototype.toNumber=oe.prototype.ea;oe.prototype.toString=oe.prototype.toString;oe.prototype.getBits=oe.prototype.D;oe.fromNumber=an;oe.fromString=ab;var cb=jt.createWebChannelTransport=function(){return new vl},ub=jt.getStatEventTarget=function(){return Al()},Fl=jt.ErrorCode=Sl,lb=jt.EventType=TT,db=jt.Event=Xr,gm=jt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},f9=jt.FetchXmlHttpFactory=ha,ga=jt.WebChannel=bT,hb=jt.XhrIo=ve,fb=jt.Md5=Ut,Zr=jt.Integer=oe;var pb="@firebase/firestore";var xe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xe.UNAUTHENTICATED=new xe(null),xe.GOOGLE_CREDENTIALS=new xe("google-credentials-uid"),xe.FIRST_PARTY=new xe("first-party-uid"),xe.MOCK_USER=new xe("mock-user");var Us="10.8.0";var si=new Zn("@firebase/firestore");function ma(){return si.logLevel}function E(t,...e){if(si.logLevel<=W.DEBUG){let n=e.map(sv);si.debug(`Firestore (${Us}): ${t}`,...n)}}function fn(t,...e){if(si.logLevel<=W.ERROR){let n=e.map(sv);si.error(`Firestore (${Us}): ${t}`,...n)}}function Cs(t,...e){if(si.logLevel<=W.WARN){let n=e.map(sv);si.warn(`Firestore (${Us}): ${t}`,...n)}}function sv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function x(t="Unexpected state"){let e=`FIRESTORE (${Us}) INTERNAL ASSERTION FAILED: `+t;throw fn(e),new Error(e)}function le(t,e){t||x()}function U(t,e){return t}var y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},T=class extends st{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var $t=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Bl=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},wm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(xe.UNAUTHENTICATED))}shutdown(){}},Im=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},Em=class{constructor(e){this.t=e,this.currentUser=xe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve(),s=new $t;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new $t,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>p(this,null,function*(){yield c.promise,yield i(this.currentUser)}))},a=c=>{E("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(E("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new $t)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(E("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new Bl(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new xe(e)}},Dm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=xe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Tm=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Dm(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(xe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},bm=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Cm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&E("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,E("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{E("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):E("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new bm(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function cV(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var $l=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=cV(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function ee(t,e){return t<e?-1:t>e?1:0}function As(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var je=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new T(y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ee(this.nanoseconds,e.nanoseconds):ee(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var V=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new je(0,0))}static max(){return new t(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Hl=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&x(),r===void 0?r=e.length-n:r>e.length-n&&x(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},me=class t extends Hl{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new T(y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},uV=/^[_a-zA-Z][_a-zA-Z0-9]*$/,yt=class t extends Hl{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return uV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new T(y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new T(y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new T(y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var R=class t{constructor(e){this.path=e}static fromPath(e){return new t(me.fromString(e))}static fromName(e){return new t(me.fromString(e).popFirst(5))}static empty(){return new t(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new me(e.slice()))}};var Am=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Am.UNKNOWN_ID=-1;function lV(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=V.fromTimestamp(r===1e9?new je(n+1,0):new je(n,r));return new oi(i,R.empty(),e)}function dV(t){return new oi(t.readTime,t.key,-1)}var oi=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(V.min(),R.empty(),-1)}static max(){return new t(V.max(),R.empty(),-1)}};function hV(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=R.comparator(t.documentKey,e.documentKey),n!==0?n:ee(t.largestBatchId,e.largestBatchId))}var fV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Oa(t){return p(this,null,function*(){if(t.code!==y.FAILED_PRECONDITION||t.message!==fV)throw t;E("LocalStore","Unexpectedly lost primary lease")})}var v=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&x(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},c=>r(c))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;n(e[u]).next(l=>{o[u]=l,++a,a===s&&r(o)},l=>i(l))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};var Rm=class t{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new $t,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ri(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=ov(r.target.error);this.V.reject(new ri(e,i))}}static open(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(s){throw new ri(n,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(E("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let n=this.transaction.objectStore(e);return new Nm(n)}},ql=class t{constructor(e,n,r){this.name=e,this.version=n,this.p=r,t.S(ze())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return E("SimpleDb","Removing database:",e),ei(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Hu())return!1;if(t.C())return!0;let e=ze(),n=t.S(e),r=0<n&&n<10,i=t.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){let n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){let n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){return p(this,null,function*(){return this.db||(E("SimpleDb","Opening database:",this.name),this.db=yield new Promise((n,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{let o=s.target.result;n(o)},i.onblocked=()=>{r(new ri(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{let o=s.target.error;o.name==="VersionError"?r(new T(y.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new T(y.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new ri(e,o))},i.onupgradeneeded=s=>{E("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.p.N(o,i.transaction,s.oldVersion,this.version).next(()=>{E("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db})}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,r,i){return p(this,null,function*(){let s=n==="readonly",o=0;for(;;){++o;try{this.db=yield this.O(e);let a=Rm.open(this.db,e,s?"readonly":"readwrite",r),c=i(a).next(u=>(a.g(),u)).catch(u=>(a.abort(u),v.reject(u))).toPromise();return c.catch(()=>{}),yield a.m,c}catch(a){let c=a,u=c.name!=="FirebaseError"&&o<3;if(E("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}})}close(){this.db&&this.db.close(),this.db=void 0}},Mm=class{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ei(this.k.delete())}},ri=class extends T{constructor(e,n){super(y.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}};function ka(t){return t.name==="IndexedDbTransactionError"}var Nm=class{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(E("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(E("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ei(r)}add(e){return E("SimpleDb","ADD",this.store.name,e,e),ei(this.store.add(e))}get(e){return ei(this.store.get(e)).next(n=>(n===void 0&&(n=null),E("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return E("SimpleDb","DELETE",this.store.name,e),ei(this.store.delete(e))}count(){return E("SimpleDb","COUNT",this.store.name),ei(this.store.count())}W(e,n){let r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let s=i.getAll(r.range);return new v((o,a)=>{s.onerror=c=>{a(c.target.error)},s.onsuccess=c=>{o(c.target.result)}})}{let s=this.cursor(r),o=[];return this.G(s,(a,c)=>{o.push(c)}).next(()=>o)}}j(e,n){let r=this.store.getAll(e,n===null?void 0:n);return new v((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,n){E("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,n);r.J=!1;let i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);let i=this.cursor(r);return this.G(i,n)}Z(e){let n=this.cursor({});return new v((r,i)=>{n.onerror=s=>{let o=ov(s.target.error);i(o)},n.onsuccess=s=>{let o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,n){let r=[];return new v((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{let a=o.target.result;if(!a)return void i();let c=new Mm(a),u=n(a.primaryKey,a.value,c);if(u instanceof v){let l=u.catch(d=>(c.done(),v.reject(d)));r.push(l)}c.isDone?i():c.$===null?a.continue():a.continue(c.$)}}).next(()=>v.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){let r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}};function ei(t){return new v((e,n)=>{t.onsuccess=r=>{let i=r.target.result;e(i)},t.onerror=r=>{let i=ov(r.target.error);n(i)}})}var gb=!1;function ov(t){let e=ql.S(ze());if(e>=12.2&&e<13){let n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){let r=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gb||(gb=!0,setTimeout(()=>{throw r},0)),r}}return t}var zb=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.oe&&this.oe(n),n}}return t._e=-1,t})();function yd(t){return t==null}function Ea(t){return t===0&&1/t==-1/0}function pV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ea(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var gV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],D9=[...gV,"documentOverlays"],mV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],yV=mV,T9=[...yV,"indexConfiguration","indexState","indexEntries"];function mb(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function js(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Gb(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var we=class t{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Es(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Es(this.root,e,this.comparator,!1)}getReverseIterator(){return new Es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Es(this.root,e,this.comparator,!0)}},Es=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ln=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw x();let e=this.left.check();if(e!==this.right.check())throw x();return e+(this.isRed()?0:1)}};ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw x()}get value(){throw x()}get color(){throw x()}get left(){throw x()}get right(){throw x()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class t{constructor(e){this.comparator=e,this.data=new we(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zl(this.data.getIterator())}getIteratorFrom(e){return new zl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},zl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var un=class t{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new t([])}unionWith(e){let n=new Qe(yt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return As(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Gl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ze=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Gl("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ee(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ze.EMPTY_BYTE_STRING=new Ze("");var vV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ar(t){if(le(!!t),typeof t=="string"){let e=0,n=vV.exec(t);if(le(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:_e(t.seconds),nanos:_e(t.nanos)}}function _e(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cr(t){return typeof t=="string"?Ze.fromBase64String(t):Ze.fromUint8Array(t)}function av(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function cv(t){let e=t.mapValue.fields.__previous_value__;return av(e)?cv(e):e}function Da(t){let e=ar(t.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var Pm=class{constructor(e,n,r,i,s,o,a,c,u){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Wl=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ai(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?av(t)?4:Wb(t)?9007199254740991:10:x()}function pn(t,e){if(t===e)return!0;let n=ai(t);if(n!==ai(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Da(t).isEqual(Da(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=ar(i.timestampValue),a=ar(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return cr(i.bytesValue).isEqual(cr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return _e(i.geoPointValue.latitude)===_e(s.geoPointValue.latitude)&&_e(i.geoPointValue.longitude)===_e(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return _e(i.integerValue)===_e(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=_e(i.doubleValue),a=_e(s.doubleValue);return o===a?Ea(o)===Ea(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return As(t.arrayValue.values||[],e.arrayValue.values||[],pn);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(mb(o)!==mb(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!pn(o[c],a[c])))return!1;return!0}(t,e);default:return x()}}function Ta(t,e){return(t.values||[]).find(n=>pn(n,e))!==void 0}function Ss(t,e){if(t===e)return 0;let n=ai(t),r=ai(e);if(n!==r)return ee(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ee(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=_e(s.integerValue||s.doubleValue),c=_e(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(t,e);case 3:return yb(t.timestampValue,e.timestampValue);case 4:return yb(Da(t),Da(e));case 5:return ee(t.stringValue,e.stringValue);case 6:return function(s,o){let a=cr(s),c=cr(o);return a.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let l=ee(a[u],c[u]);if(l!==0)return l}return ee(a.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=ee(_e(s.latitude),_e(o.latitude));return a!==0?a:ee(_e(s.longitude),_e(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let l=Ss(a[u],c[u]);if(l)return l}return ee(a.length,c.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ll.mapValue&&o===Ll.mapValue)return 0;if(s===Ll.mapValue)return 1;if(o===Ll.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){let h=ee(c[d],l[d]);if(h!==0)return h;let f=Ss(a[c[d]],u[l[d]]);if(f!==0)return f}return ee(c.length,l.length)}(t.mapValue,e.mapValue);default:throw x()}}function yb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ee(t,e);let n=ar(t),r=ar(e),i=ee(n.seconds,r.seconds);return i!==0?i:ee(n.nanos,r.nanos)}function Rs(t){return xm(t)}function xm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=ar(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return R.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=xm(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${xm(n.fields[o])}`;return i+"}"}(t.mapValue):x()}function vb(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Om(t){return!!t&&"integerValue"in t}function uv(t){return!!t&&"arrayValue"in t}function _b(t){return!!t&&"nullValue"in t}function wb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ul(t){return!!t&&"mapValue"in t}function va(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=va(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=va(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Wb(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Bt=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ul(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=va(n)}setAll(e){let n=yt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let c=this.getFieldsMap(n);this.applyChanges(c,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=va(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Ul(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return pn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ul(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){js(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(va(this.value))}};function Kb(t){let e=[];return js(t.fields,(n,r)=>{let i=new yt([n]);if(Ul(r)){let s=Kb(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new un(e)}var Ht=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,V.min(),V.min(),V.min(),Bt.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,V.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,V.min(),V.min(),Bt.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,V.min(),V.min(),Bt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(V.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Bt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Bt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=V.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ms=class{constructor(e,n){this.position=e,this.inclusive=n}};function Ib(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=R.comparator(R.fromName(o.referenceValue),n.key):r=Ss(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Eb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!pn(t.position[n],e.position[n]))return!1;return!0}var Ns=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function _V(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Kl=class{},Se=class t extends Kl{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Fm(e,n,r):n==="array-contains"?new Um(e,r):n==="in"?new jm(e,r):n==="not-in"?new Bm(e,r):n==="array-contains-any"?new $m(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Lm(e,r):new Vm(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ss(n,this.value)):n!==null&&ai(this.value)===ai(n)&&this.matchesComparison(Ss(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return x()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},qt=class t extends Kl{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new t(e,n)}matches(e){return Qb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}};function Qb(t){return t.op==="and"}function Yb(t){return wV(t)&&Qb(t)}function wV(t){for(let e of t.filters)if(e instanceof qt)return!1;return!0}function km(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+Rs(t.value);if(Yb(t))return t.filters.map(e=>km(e)).join(",");{let e=t.filters.map(n=>km(n)).join(",");return`${t.op}(${e})`}}function Jb(t,e){return t instanceof Se?function(r,i){return i instanceof Se&&r.op===i.op&&r.field.isEqual(i.field)&&pn(r.value,i.value)}(t,e):t instanceof qt?function(r,i){return i instanceof qt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&Jb(o,i.filters[a]),!0):!1}(t,e):void x()}function Xb(t){return t instanceof Se?function(n){return`${n.field.canonicalString()} ${n.op} ${Rs(n.value)}`}(t):t instanceof qt?function(n){return n.op.toString()+" {"+n.getFilters().map(Xb).join(" ,")+"}"}(t):"Filter"}var Fm=class extends Se{constructor(e,n,r){super(e,n,r),this.key=R.fromName(r.referenceValue)}matches(e){let n=R.comparator(e.key,this.key);return this.matchesComparison(n)}},Lm=class extends Se{constructor(e,n){super(e,"in",n),this.keys=Zb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},Vm=class extends Se{constructor(e,n){super(e,"not-in",n),this.keys=Zb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function Zb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>R.fromName(r.referenceValue))}var Um=class extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return uv(n)&&Ta(n.arrayValue,this.value)}},jm=class extends Se{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Ta(this.value.arrayValue,n)}},Bm=class extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!Ta(this.value.arrayValue,n)}},$m=class extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!uv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ta(this.value.arrayValue,r))}};var Hm=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}};function Db(t,e=null,n=[],r=[],i=null,s=null,o=null){return new Hm(t,e,n,r,i,s,o)}function lv(t){let e=U(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>km(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),yd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Rs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Rs(r)).join(",")),e.ce=n}return e.ce}function dv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_V(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Jb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Eb(t.startAt,e.startAt)&&Eb(t.endAt,e.endAt)}function qm(t){return R.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ci=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}};function IV(t,e,n,r,i,s,o,a){return new ci(t,e,n,r,i,s,o,a)}function eC(t){return new ci(t)}function Tb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function tC(t){return t.collectionGroup!==null}function _a(t){let e=U(t);if(e.le===null){e.le=[];let n=new Set;for(let s of e.explicitOrderBy)e.le.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Qe(yt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.le.push(new Ns(s,r))}),n.has(yt.keyField().canonicalString())||e.le.push(new Ns(yt.keyField(),r))}return e.le}function dn(t){let e=U(t);return e.he||(e.he=EV(e,_a(t))),e.he}function EV(t,e){if(t.limitType==="F")return Db(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new Ns(i.field,s)});let n=t.endAt?new Ms(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ms(t.startAt.position,t.startAt.inclusive):null;return Db(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zm(t,e){let n=t.filters.concat([e]);return new ci(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gm(t,e,n){return new ci(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function vd(t,e){return dv(dn(t),dn(e))&&t.limitType===e.limitType}function nC(t){return`${lv(dn(t))}|lt:${t.limitType}`}function _s(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Xb(i)).join(", ")}]`),yd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Rs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Rs(i)).join(",")),`Target(${r})`}(dn(t))}; limitType=${t.limitType})`}function _d(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):R.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of _a(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,c){let u=Ib(o,a,c);return o.inclusive?u<=0:u<0}(r.startAt,_a(r),i)||r.endAt&&!function(o,a,c){let u=Ib(o,a,c);return o.inclusive?u>=0:u>0}(r.endAt,_a(r),i))}(t,e)}function DV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function rC(t){return(e,n)=>{let r=!1;for(let i of _a(t)){let s=TV(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function TV(t,e,n){let r=t.field.isKeyField()?R.comparator(e.key,n.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Ss(c,u):x()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return x()}}var ur=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Gb(this.inner)}size(){return this.innerSize}};var bV=new we(R.comparator);function Pn(){return bV}var iC=new we(R.comparator);function ya(...t){let e=iC;for(let n of t)e=e.insert(n.key,n);return e}function sC(t){let e=iC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ti(){return wa()}function oC(){return wa()}function wa(){return new ur(t=>t.toString(),(t,e)=>t.isEqual(e))}var CV=new we(R.comparator),AV=new Qe(R.comparator);function K(...t){let e=AV;for(let n of t)e=e.add(n);return e}var SV=new Qe(ee);function RV(){return SV}function aC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ea(e)?"-0":e}}function cC(t){return{integerValue:""+t}}function MV(t,e){return pV(e)?cC(e):aC(t,e)}var Ps=class{constructor(){this._=void 0}};function NV(t,e,n){return t instanceof xs?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&av(s)&&(s=cv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ui?lC(t,e):t instanceof li?dC(t,e):function(i,s){let o=uC(i,s),a=bb(o)+bb(i.Ie);return Om(o)&&Om(i.Ie)?cC(a):aC(i.serializer,a)}(t,e)}function PV(t,e,n){return t instanceof ui?lC(t,e):t instanceof li?dC(t,e):n}function uC(t,e){return t instanceof Os?function(r){return Om(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var xs=class extends Ps{},ui=class extends Ps{constructor(e){super(),this.elements=e}};function lC(t,e){let n=hC(e);for(let r of t.elements)n.some(i=>pn(i,r))||n.push(r);return{arrayValue:{values:n}}}var li=class extends Ps{constructor(e){super(),this.elements=e}};function dC(t,e){let n=hC(e);for(let r of t.elements)n=n.filter(i=>!pn(i,r));return{arrayValue:{values:n}}}var Os=class extends Ps{constructor(e,n){super(),this.serializer=e,this.Ie=n}};function bb(t){return _e(t.integerValue||t.doubleValue)}function hC(t){return uv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function xV(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ui&&i instanceof ui||r instanceof li&&i instanceof li?As(r.elements,i.elements,pn):r instanceof Os&&i instanceof Os?pn(r.Ie,i.Ie):r instanceof xs&&i instanceof xs}(t.transform,e.transform)}var Wm=class{constructor(e,n){this.version=e,this.transformResults=n}},ii=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ks=class{};function fC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Ql(t.key,ii.none()):new di(t.key,t.data,ii.none());{let n=t.data,r=Bt.empty(),i=new Qe(yt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xn(t.key,r,new un(i.toArray()),ii.none())}}function OV(t,e,n){t instanceof di?function(i,s,o){let a=i.value.clone(),c=Ab(i.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xn?function(i,s,o){if(!jl(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=Ab(i.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(pC(i)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ia(t,e,n,r){return t instanceof di?function(s,o,a,c){if(!jl(s.precondition,o))return a;let u=s.value.clone(),l=Sb(s.fieldTransforms,c,o);return u.setAll(l),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof xn?function(s,o,a,c){if(!jl(s.precondition,o))return a;let u=Sb(s.fieldTransforms,c,o),l=o.data;return l.setAll(pC(s)),l.setAll(u),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,a){return jl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kV(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=uC(r.transform,i||null);s!=null&&(n===null&&(n=Bt.empty()),n.set(r.field,s))}return n||null}function Cb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&As(r,i,(s,o)=>xV(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var di=class extends ks{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xn=class extends ks{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function pC(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function Ab(t,e,n){let r=new Map;le(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,PV(o,a,n[i]))}return r}function Sb(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,NV(s,o,e))}return r}var Ql=class extends ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Km=class extends ks{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Qm=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&OV(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ia(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=Ia(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=oC();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let c=fC(o,a);c!==null&&r.set(i.key,c),o.isValidDocument()||o.convertToNoDocument(V.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),K())}isEqual(e){return this.batchId===e.batchId&&As(this.mutations,e.mutations,(n,r)=>Cb(n,r))&&As(this.baseMutations,e.baseMutations,(n,r)=>Cb(n,r))}},Ym=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){le(e.mutations.length===r.length);let i=function(){return CV}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var Jm=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Xm=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var Ce,X;function FV(t){switch(t){default:return x();case y.CANCELLED:case y.UNKNOWN:case y.DEADLINE_EXCEEDED:case y.RESOURCE_EXHAUSTED:case y.INTERNAL:case y.UNAVAILABLE:case y.UNAUTHENTICATED:return!1;case y.INVALID_ARGUMENT:case y.NOT_FOUND:case y.ALREADY_EXISTS:case y.PERMISSION_DENIED:case y.FAILED_PRECONDITION:case y.ABORTED:case y.OUT_OF_RANGE:case y.UNIMPLEMENTED:case y.DATA_LOSS:return!0}}function gC(t){if(t===void 0)return fn("GRPC error has no .code"),y.UNKNOWN;switch(t){case Ce.OK:return y.OK;case Ce.CANCELLED:return y.CANCELLED;case Ce.UNKNOWN:return y.UNKNOWN;case Ce.DEADLINE_EXCEEDED:return y.DEADLINE_EXCEEDED;case Ce.RESOURCE_EXHAUSTED:return y.RESOURCE_EXHAUSTED;case Ce.INTERNAL:return y.INTERNAL;case Ce.UNAVAILABLE:return y.UNAVAILABLE;case Ce.UNAUTHENTICATED:return y.UNAUTHENTICATED;case Ce.INVALID_ARGUMENT:return y.INVALID_ARGUMENT;case Ce.NOT_FOUND:return y.NOT_FOUND;case Ce.ALREADY_EXISTS:return y.ALREADY_EXISTS;case Ce.PERMISSION_DENIED:return y.PERMISSION_DENIED;case Ce.FAILED_PRECONDITION:return y.FAILED_PRECONDITION;case Ce.ABORTED:return y.ABORTED;case Ce.OUT_OF_RANGE:return y.OUT_OF_RANGE;case Ce.UNIMPLEMENTED:return y.UNIMPLEMENTED;case Ce.DATA_LOSS:return y.DATA_LOSS;default:return x()}}(X=Ce||(Ce={}))[X.OK=0]="OK",X[X.CANCELLED=1]="CANCELLED",X[X.UNKNOWN=2]="UNKNOWN",X[X.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",X[X.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",X[X.NOT_FOUND=5]="NOT_FOUND",X[X.ALREADY_EXISTS=6]="ALREADY_EXISTS",X[X.PERMISSION_DENIED=7]="PERMISSION_DENIED",X[X.UNAUTHENTICATED=16]="UNAUTHENTICATED",X[X.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",X[X.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",X[X.ABORTED=10]="ABORTED",X[X.OUT_OF_RANGE=11]="OUT_OF_RANGE",X[X.UNIMPLEMENTED=12]="UNIMPLEMENTED",X[X.INTERNAL=13]="INTERNAL",X[X.UNAVAILABLE=14]="UNAVAILABLE",X[X.DATA_LOSS=15]="DATA_LOSS";var Rb=null;function LV(){return new TextEncoder}var VV=new Zr([4294967295,4294967295],0);function Mb(t){let e=LV().encode(t),n=new fb;return n.update(e),new Uint8Array(n.digest())}function Nb(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zr([n,r],0),new Zr([i,s],0)]}var Zm=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ni(`Invalid padding: ${n}`);if(r<0)throw new ni(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ni(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ni(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ee=Zr.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(Zr.fromNumber(r)));return i.compare(VV)===1&&(i=new Zr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;let n=Mb(e),[r,i]=Nb(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;let n=Mb(e),[r,i]=Nb(n);for(let s=0;s<this.hashCount;s++){let o=this.de(r,i,s);this.Re(o)}}Re(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ni=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Yl=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,ba.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(V.min(),i,new we(ee),Pn(),K())}},ba=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,K(),K(),K())}};var Ts=class{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}},Jl=class{constructor(e,n){this.targetId=e,this.fe=n}},Xl=class{constructor(e,n,r=Ze.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Zl=class{constructor(){this.ge=0,this.pe=xb(),this.ye=Ze.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=K(),n=K(),r=K();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:x()}}),new ba(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=xb()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,le(this.ge>=0)}Be(){this.Se=!0,this.we=!0}},ey=class{constructor(e){this.Le=e,this.ke=new Map,this.qe=Pn(),this.Qe=Pb(),this.Ke=new we(ee)}$e(e){for(let n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(let n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{let r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:x()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){let n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){let s=i.target;if(qm(s))if(r===0){let o=new R(s.path);this.We(n,o,Ht.newNoDocument(o,V.min()))}else le(r===1);else{let o=this.Ze(n);if(o!==r){let a=this.Xe(e),c=a?this.et(a,e,o):1;if(c!==0){this.He(n);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,u)}Rb?.tt(function(l,d,h,f,g){var _,m,w,P,j,C;let te={localCacheCount:l,existenceFilterCount:d.count,databaseId:h.database,projectId:h.projectId},Y=d.unchangedNames;return Y&&(te.bloomFilter={applied:g===0,hashCount:(_=Y?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(P=(w=(m=Y?.bits)===null||m===void 0?void 0:m.bitmap)===null||w===void 0?void 0:w.length)!==null&&P!==void 0?P:0,padding:(C=(j=Y?.bits)===null||j===void 0?void 0:j.padding)!==null&&C!==void 0?C:0,mightContain:Oe=>{var vt;return(vt=f?.mightContain(Oe))!==null&&vt!==void 0&&vt}}),te}(o,e.fe,this.Le.nt(),a,c))}}}}Xe(e){let n=e.fe.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=cr(r).toUint8Array()}catch(c){if(c instanceof Gl)return Cs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Zm(o,i,s)}catch(c){return Cs(c instanceof ni?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){let n=new Map;this.ke.forEach((s,o)=>{let a=this.Ye(o);if(a){if(s.current&&qm(a.target)){let c=new R(a.target.path);this.qe.get(c)!==null||this.st(o,c)||this.We(o,c,Ht.newNoDocument(c,e))}s.De&&(n.set(o,s.ve()),s.Fe())}});let r=K();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Ye(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));let i=new Yl(e,n,this.Ke,this.qe,r);return this.qe=Pn(),this.Qe=Pb(),this.Ke=new we(ee),i}Ue(e,n){if(!this.je(e))return;let r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;let i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){let n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new Zl,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Qe(ee),this.Qe=this.Qe.insert(e,n)),n}je(e){let n=this.Ye(e)!==null;return n||E("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){let n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new Zl),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function Pb(){return new we(R.comparator)}function xb(){return new we(R.comparator)}var UV={asc:"ASCENDING",desc:"DESCENDING"},jV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},BV={and:"AND",or:"OR"},ty=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function ny(t,e){return t.useProto3Json||yd(e)?e:{value:e}}function ed(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function $V(t,e){return ed(t,e.toTimestamp())}function hn(t){return le(!!t),V.fromTimestamp(function(n){let r=ar(n);return new je(r.seconds,r.nanos)}(t))}function hv(t,e){return ry(t,e).canonicalString()}function ry(t,e){let n=function(i){return new me(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yC(t){let e=me.fromString(t);return le(EC(e)),e}function iy(t,e){return hv(t.databaseId,e.path)}function mm(t,e){let n=yC(e);if(n.get(1)!==t.databaseId.projectId)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new T(y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new R(_C(n))}function vC(t,e){return hv(t.databaseId,e)}function HV(t){let e=yC(t);return e.length===4?me.emptyPath():_C(e)}function sy(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _C(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Ob(t,e,n){return{name:iy(t,e),fields:n.value.mapValue.fields}}function qV(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:x()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(le(l===void 0||typeof l=="string"),Ze.fromBase64String(l||"")):(le(l===void 0||l instanceof Uint8Array),Ze.fromUint8Array(l||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let l=u.code===void 0?y.UNKNOWN:gC(u.code);return new T(l,u.message||"")}(o);n=new Xl(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=mm(t,r.document.name),s=hn(r.document.updateTime),o=r.document.createTime?hn(r.document.createTime):V.min(),a=new Bt({mapValue:{fields:r.document.fields}}),c=Ht.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Ts(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=mm(t,r.document),s=r.readTime?hn(r.readTime):V.min(),o=Ht.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ts([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=mm(t,r.document),s=r.removedTargetIds||[];n=new Ts([],s,i,null)}else{if(!("filter"in e))return x();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new Xm(i,s),a=r.targetId;n=new Jl(a,o)}}return n}function zV(t,e){let n;if(e instanceof di)n={update:Ob(t,e.key,e.value)};else if(e instanceof Ql)n={delete:iy(t,e.key)};else if(e instanceof xn)n={update:Ob(t,e.key,e.data),updateMask:eU(e.fieldMask)};else{if(!(e instanceof Km))return x();n={verify:iy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof xs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ui)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof li)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Os)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw x()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:$V(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:x()}(t,e.precondition)),n}function GV(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?hn(i.updateTime):hn(s);return o.isEqual(V.min())&&(o=hn(s)),new Wm(o,i.transformResults||[])}(n,e))):[]}function WV(t,e){return{documents:[vC(t,e.path)]}}function KV(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vC(t,i);let s=function(u){if(u.length!==0)return IC(qt.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(l=>function(h){return{field:ws(h.field),direction:JV(h.dir)}}(l))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=ny(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ut:n,parent:i}}function QV(t){let e=HV(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){le(r===1);let l=n.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];n.where&&(s=function(d){let h=wC(d);return h instanceof qt&&Yb(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(h=>function(g){return new Ns(Is(g.field),function(m){switch(m){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(g.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,yd(h)?null:h}(n.limit));let c=null;n.startAt&&(c=function(d){let h=!!d.before,f=d.values||[];return new Ms(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(d){let h=!d.before,f=d.values||[];return new Ms(f,h)}(n.endAt)),IV(e,i,o,s,a,"F",c,u)}function YV(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return x()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function wC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Is(n.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Is(n.unaryFilter.field);return Se.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Is(n.unaryFilter.field);return Se.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Is(n.unaryFilter.field);return Se.create(o,"!=",{nullValue:"NULL_VALUE"});default:return x()}}(t):t.fieldFilter!==void 0?function(n){return Se.create(Is(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return x()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qt.create(n.compositeFilter.filters.map(r=>wC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return x()}}(n.compositeFilter.op))}(t):x()}function JV(t){return UV[t]}function XV(t){return jV[t]}function ZV(t){return BV[t]}function ws(t){return{fieldPath:t.canonicalString()}}function Is(t){return yt.fromServerFormat(t.fieldPath)}function IC(t){return t instanceof Se?function(n){if(n.op==="=="){if(wb(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NAN"}};if(_b(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(wb(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NAN"}};if(_b(n.value))return{unaryFilter:{field:ws(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ws(n.field),op:XV(n.op),value:n.value}}}(t):t instanceof qt?function(n){let r=n.getFilters().map(i=>IC(i));return r.length===1?r[0]:{compositeFilter:{op:ZV(n.op),filters:r}}}(t):x()}function eU(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function EC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Ca=class t{constructor(e,n,r,i,s=V.min(),o=V.min(),a=Ze.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var oy=class{constructor(e){this.ct=e}};function tU(t){let e=QV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gm(e,e.limit,"L"):e}var td=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(_e(e.integerValue));else if("doubleValue"in e){let r=_e(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),Ea(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At(`${r.seconds||""}`),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(cr(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?Wb(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):x()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),R.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};td.bt=new td;var ay=class{constructor(){this._n=new cy}addToCollectionParentIndex(e,n){return this._n.add(n),v.resolve()}getCollectionParents(e,n){return v.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return v.resolve()}deleteFieldIndex(e,n){return v.resolve()}deleteAllFieldIndexes(e){return v.resolve()}createTargetIndexes(e,n){return v.resolve()}getDocumentsMatchingTarget(e,n){return v.resolve(null)}getIndexType(e,n){return v.resolve(0)}getFieldIndexes(e,n){return v.resolve([])}getNextCollectionGroupToUpdate(e){return v.resolve(null)}getMinOffset(e,n){return v.resolve(oi.min())}getMinOffsetFromCollectionGroup(e,n){return v.resolve(oi.min())}updateCollectionGroup(e,n,r){return v.resolve()}updateIndexEntries(e,n){return v.resolve()}},cy=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Qe(me.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(me.comparator)).toArray()}};var C9=new Uint8Array(0);var cn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};cn.DEFAULT_COLLECTION_PERCENTILE=10,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cn.DEFAULT=new cn(41943040,cn.DEFAULT_COLLECTION_PERCENTILE,cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cn.DISABLED=new cn(-1,0,0);var Aa=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Bn(){return new t(-1)}};var uy=class{constructor(){this.changes=new ur(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?v.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var ly=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var dy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ia(r.mutation,i,un.empty(),je.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,K()).next(()=>r))}getLocalViewOfDocuments(e,n,r=K()){let i=ti();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=ya();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=ti();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,K()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Pn(),o=wa(),a=function(){return wa()}();return n.forEach((c,u)=>{let l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof xn)?s=s.insert(u.key,u):l!==void 0?(o.set(u.key,l.mutation.getFieldMask()),Ia(l.mutation,u,l.mutation.getFieldMask(),je.now())):o.set(u.key,un.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>o.set(u,l)),n.forEach((u,l)=>{var d;return a.set(u,new ly(l,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){let r=wa(),i=new we((o,a)=>o-a),s=K();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=n.get(c);if(u===null)return;let l=r.get(c)||un.empty();l=a.applyToLocalView(u,l),r.set(c,l);let d=(i.get(a.batchId)||K()).add(c);i=i.insert(a.batchId,d)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,l=c.value,d=oC();l.forEach(h=>{if(!s.has(h)){let f=fC(n.get(h),r.get(h));f!==null&&d.set(h,f),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return v.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return R.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):tC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):v.resolve(ti()),a=-1,c=s;return o.next(u=>v.forEach(u,(l,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(l)?v.resolve():this.remoteDocumentCache.getEntry(e,l).next(h=>{c=c.insert(l,h)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,K())).next(l=>({batchId:a,changes:sC(l)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new R(n)).next(r=>{let i=ya();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=ya();return this.indexManager.getCollectionParents(e,s).next(a=>v.forEach(a,c=>{let u=function(d,h){return new ci(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((c,u)=>{let l=u.getKey();o.get(l)===null&&(o=o.insert(l,Ht.newInvalidDocument(l)))});let a=ya();return o.forEach((c,u)=>{let l=s.get(c);l!==void 0&&Ia(l.mutation,u,un.empty(),je.now()),_d(n,u)&&(a=a.insert(c,u))}),a})}};var hy=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return v.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:hn(i.createTime)}}(n)),v.resolve()}getNamedQuery(e,n){return v.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:tU(i.bundledQuery),readTime:hn(i.readTime)}}(n)),v.resolve()}};var fy=class{constructor(){this.overlays=new we(R.comparator),this.hr=new Map}getOverlay(e,n){return v.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ti();return v.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),v.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),v.resolve()}getOverlaysForCollection(e,n,r){let i=ti(),s=n.length+1,o=new R(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return v.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new we((u,l)=>u-l),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=ti(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}let a=ti(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>a.set(u,l)),!(a.size()>=i)););return v.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Jm(n,r));let s=this.hr.get(n);s===void 0&&(s=K(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Sa=class{constructor(){this.Pr=new Qe(Ae.Ir),this.Tr=new Qe(Ae.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new Ae(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new Ae(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new R(new me([])),r=new Ae(n,e),i=new Ae(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new R(new me([])),r=new Ae(n,e),i=new Ae(n,e+1),s=K();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new Ae(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},Ae=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return R.comparator(e.key,n.key)||ee(e.pr,n.pr)}static Er(e,n){return ee(e.pr,n.pr)||R.comparator(e.key,n.key)}};var py=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Qe(Ae.Ir)}checkEmpty(e){return v.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Qm(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new Ae(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return v.resolve(o)}lookupMutationBatch(e,n){return v.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return v.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return v.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return v.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new Ae(n,0),i=new Ae(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),v.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Qe(ee);return n.forEach(i=>{let s=new Ae(i,0),o=new Ae(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),v.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;R.isDocumentKey(s)||(s=s.child(""));let o=new Ae(new R(s),0),a=new Qe(ee);return this.wr.forEachWhile(c=>{let u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(c.pr)),!0)},o),v.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){le(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return v.forEach(n.mutations,i=>{let s=new Ae(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new Ae(n,0),i=this.wr.firstAfterOrEqual(r);return v.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,v.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var gy=class{constructor(e){this.vr=e,this.docs=function(){return new we(R.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return v.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=Pn();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ht.newInvalidDocument(i))}),v.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Pn(),o=n.path,a=new R(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:l}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||hV(dV(l),r)<=0||(i.has(l.key)||_d(n,l))&&(s=s.insert(l.key,l.mutableCopy()))}return v.resolve(s)}getAllFromCollectionGroup(e,n,r,i){x()}Fr(e,n){return v.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new my(this)}getSize(e){return v.resolve(this.size)}},my=class extends uy{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),v.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var yy=class{constructor(e){this.persistence=e,this.Mr=new ur(n=>lv(n),dv),this.lastRemoteSnapshotVersion=V.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Sa,this.targetCount=0,this.Br=Aa.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),v.resolve()}getLastRemoteSnapshotVersion(e){return v.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return v.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),v.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),v.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Br=new Aa(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,v.resolve()}updateTargetData(e,n){return this.qn(n),v.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,v.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),v.waitFor(s).next(()=>i)}getTargetCount(e){return v.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return v.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),v.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),v.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),v.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return v.resolve(r)}containsKey(e,n){return v.resolve(this.Nr.containsKey(n))}};var vy=class{constructor(e,n){this.Lr={},this.overlays={},this.kr=new zb(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new yy(this),this.indexManager=new ay,this.remoteDocumentCache=function(i){return new gy(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new oy(n),this.$r=new hy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new fy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new py(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){E("MemoryPersistence","Starting transaction:",e);let i=new _y(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return v.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}},_y=class extends Sm{constructor(e){super(),this.currentSequenceNumber=e}},wy=class t{constructor(e){this.persistence=e,this.zr=new Sa,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw x()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),v.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),v.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),v.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return v.forEach(this.Jr,r=>{let i=R.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,V.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return v.or([()=>v.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var Iy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=K(),i=K();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Ey=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Dy=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return mD()?8:ql.v(ze())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Ey;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(ma()<=W.DEBUG&&E("QueryEngine","SDK will not create cache indexes for query:",_s(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),v.resolve()):(ma()<=W.DEBUG&&E("QueryEngine","Query:",_s(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(ma()<=W.DEBUG&&E("QueryEngine","The SDK decides to create cache indexes for query:",_s(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,dn(n))):v.resolve())}ji(e,n){if(Tb(n))return v.resolve(null);let r=dn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Gm(n,null,"F"),r=dn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=K(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(c=>{let u=this.Zi(n,a);return this.Xi(n,u,o,c.readTime)?this.ji(e,Gm(n,null,"F")):this.es(e,u,n,c)}))})))}Hi(e,n,r,i){return Tb(n)||i.isEqual(V.min())?v.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?v.resolve(null):(ma()<=W.DEBUG&&E("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_s(n)),this.es(e,o,n,lV(i,-1)).next(a=>a))})}Zi(e,n){let r=new Qe(rC(e));return n.forEach((i,s)=>{_d(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return ma()<=W.DEBUG&&E("QueryEngine","Using full collection scan to execute query:",_s(n)),this.zi.getDocumentsMatchingQuery(e,n,oi.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Ty=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new we(ee),this.rs=new ur(s=>lv(s),dv),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dy(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function nU(t,e,n,r){return new Ty(t,e,n,r)}function DC(t,e){return p(this,null,function*(){let n=U(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],c=K();for(let u of i){o.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}for(let u of s){a.push(u.batchId);for(let l of u.mutations)c=c.add(l.key)}return n.localDocuments.getDocuments(r,c).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})})}function rU(t,e){let n=U(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,c,u,l){let d=u.batch,h=d.keys(),f=v.resolve();return h.forEach(g=>{f=f.next(()=>l.getEntry(c,g)).next(_=>{let m=u.docVersions.get(g);le(m!==null),_.version.compareTo(m)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let c=K();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function TC(t){let e=U(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function iU(t,e){let n=U(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((l,d)=>{let h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(s,l.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,l.addedDocuments,d)));let f=h.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Ze.EMPTY_BYTE_STRING,V.min()).withLastLimboFreeSnapshotVersion(V.min()):l.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(l.resumeToken,r)),i=i.insert(d,f),function(_,m,w){return _.resumeToken.approximateByteSize()===0||m.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(h,f,l)&&a.push(n.Qr.updateTargetData(s,f))});let c=Pn(),u=K();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,l))}),a.push(sU(s,o,e.documentUpdates).next(l=>{c=l.cs,u=l.ls})),!r.isEqual(V.min())){let l=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(l)}return v.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(n.ns=i,s))}function sU(t,e,n){let r=K(),i=K();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Pn();return n.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),c.isNoDocument()&&c.version.isEqual(V.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):E("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{cs:o,ls:i}})}function oU(t,e){let n=U(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function aU(t,e){let n=U(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,v.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Ca(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function by(t,e,n){return p(this,null,function*(){let r=U(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!ka(o))throw o;E("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function kb(t,e,n){let r=U(t),i=V.min(),s=K();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,l){let d=U(c),h=d.rs.get(l);return h!==void 0?v.resolve(d.ns.get(h)):d.Qr.getTargetData(u,l)}(r,o,dn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:V.min(),n?s:K())).next(a=>(cU(r,DV(e),a),{documents:a,hs:s})))}function cU(t,e,n){let r=t.ss.get(e)||V.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var nd=class{constructor(){this.activeTargetIds=RV()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Cy=class{constructor(){this.no=new nd,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new nd,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Ay=class{io(e){}shutdown(){}};var rd=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){E("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){E("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Vl=null;function ym(){return Vl===null?Vl=function(){return 268435456+Math.round(2147483648*Math.random())}():Vl++,"0x"+Vl.toString(16)}var uU={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Sy=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}};var Ke="WebChannelConnection",Ry=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po=`projects/${i}/databases/${s}`,this.yo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(n,r,i,s,o){let a=ym(),c=this.bo(n,r.toUriEncodedString());E("RestConnection",`Sending RPC '${n}' ${a}:`,c,i);let u={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(u,s,o),this.Co(n,c,u,i).then(l=>(E("RestConnection",`Received RPC '${n}' ${a}: `,l),l),l=>{throw Cs("RestConnection",`RPC '${n}' ${a} failed with error: `,l,"url: ",c,"request:",i),l})}vo(n,r,i,s,o,a){return this.So(n,r,i,s,o)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Us}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}bo(n,r){let i=uU[n];return`${this.fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){let s=ym();return new Promise((o,a)=>{let c=new hb;c.setWithCredentials(!0),c.listenOnce(lb.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Fl.NO_ERROR:let l=c.getResponseJson();E(Ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),o(l);break;case Fl.TIMEOUT:E(Ke,`RPC '${e}' ${s} timed out`),a(new T(y.DEADLINE_EXCEEDED,"Request time out"));break;case Fl.HTTP_ERROR:let d=c.getStatus();if(E(Ke,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let h=c.getResponseJson();Array.isArray(h)&&(h=h[0]);let f=h?.error;if(f&&f.status&&f.message){let g=function(m){let w=m.toLowerCase().replace(/_/g,"-");return Object.values(y).indexOf(w)>=0?w:y.UNKNOWN}(f.status);a(new T(g,f.message))}else a(new T(y.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new T(y.UNAVAILABLE,"Connection failed."));break;default:x()}}finally{E(Ke,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(i);E(Ke,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",u,r,15)})}Fo(e,n,r){let i=ym(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=cb(),a=ub(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Do(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;let l=s.join("");E(Ke,`Creating RPC '${e}' stream ${i}: ${l}`,c);let d=o.createWebChannel(l,c),h=!1,f=!1,g=new Sy({lo:m=>{f?E(Ke,`Not sending because RPC '${e}' stream ${i} is closed:`,m):(h||(E(Ke,`Opening RPC '${e}' stream ${i} transport.`),d.open(),h=!0),E(Ke,`RPC '${e}' stream ${i} sending:`,m),d.send(m))},ho:()=>d.close()}),_=(m,w,P)=>{m.listen(w,j=>{try{P(j)}catch(C){setTimeout(()=>{throw C},0)}})};return _(d,ga.EventType.OPEN,()=>{f||E(Ke,`RPC '${e}' stream ${i} transport opened.`)}),_(d,ga.EventType.CLOSE,()=>{f||(f=!0,E(Ke,`RPC '${e}' stream ${i} transport closed`),g.Vo())}),_(d,ga.EventType.ERROR,m=>{f||(f=!0,Cs(Ke,`RPC '${e}' stream ${i} transport errored:`,m),g.Vo(new T(y.UNAVAILABLE,"The operation could not be completed")))}),_(d,ga.EventType.MESSAGE,m=>{var w;if(!f){let P=m.data[0];le(!!P);let j=P,C=j.error||((w=j[0])===null||w===void 0?void 0:w.error);if(C){E(Ke,`RPC '${e}' stream ${i} received error:`,C);let te=C.status,Y=function(fr){let $a=Ce[fr];if($a!==void 0)return gC($a)}(te),Oe=C.message;Y===void 0&&(Y=y.INTERNAL,Oe="Unknown error status: "+te+" with message "+C.message),f=!0,g.Vo(new T(Y,Oe)),d.close()}else E(Ke,`RPC '${e}' stream ${i} received:`,P),g.mo(P)}}),_(a,db.STAT_EVENT,m=>{m.stat===gm.PROXY?E(Ke,`RPC '${e}' stream ${i} detected buffering proxy`):m.stat===gm.NOPROXY&&E(Ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{g.Ro()},0),g}};function vm(){return typeof document<"u"?document:null}function wd(t){return new ty(t,!0)}var id=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();let n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&E("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}};var sd=class{constructor(e,n,r,i,s,o,a,c){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new id(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}stop(){return p(this,null,function*(){this.Ho()&&(yield this.close(0))})}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){return p(this,null,function*(){if(this.Jo())return this.close(0)})}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,n){return p(this,null,function*(){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===y.RESOURCE_EXHAUSTED?(fn(n.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.To(n)})}i_(){}auth(){this.state=1;let e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{let i=new T(y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){let r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(()=>p(this,null,function*(){this.state=0,this.start()}))}__(e){return E("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(E("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},My=class extends sd{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();let n=qV(this.serializer,e),r=function(s){if(!("targetChange"in s))return V.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?V.min():o.readTime?hn(o.readTime):V.min()}(e);return this.listener.u_(n,r)}c_(e){let n={};n.database=sy(this.serializer),n.addTarget=function(s,o){let a,c=o.target;if(a=qm(c)?{documents:WV(s,c)}:{query:KV(s,c).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=mC(s,o.resumeToken);let u=ny(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(V.min())>0){a.readTime=ed(s,o.snapshotVersion.toTimestamp());let u=ny(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let r=YV(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){let n={};n.database=sy(this.serializer),n.removeTarget=e,this.t_(n)}},Ny=class extends sd{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();let n=GV(e.writeResults,e.commitTime),r=hn(e.commitTime);return this.listener.T_(r,n)}return le(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){let e={};e.database=sy(this.serializer),this.t_(e)}I_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>zV(this.serializer,r))};this.t_(n)}};var Py=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,ry(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new T(y.UNKNOWN,s.toString())})}vo(e,n,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,ry(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new T(y.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}};var xy=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(fn(n),this.g_=!1):E("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}};var Oy=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(o=>{r.enqueueAndForget(()=>p(this,null,function*(){hi(this)&&(E("RemoteStore","Restarting streams for network reachability change."),yield function(c){return p(this,null,function*(){let u=U(c);u.v_.add(4),yield Fa(u),u.x_.set("Unknown"),u.v_.delete(4),yield Id(u)})}(this))}))}),this.x_=new xy(r,i)}};function Id(t){return p(this,null,function*(){if(hi(t))for(let e of t.F_)yield e(!0)})}function Fa(t){return p(this,null,function*(){for(let e of t.F_)yield e(!1)})}function bC(t,e){let n=U(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),gv(n)?pv(n):Bs(n).Jo()&&fv(n,e))}function CC(t,e){let n=U(t),r=Bs(n);n.C_.delete(e),r.Jo()&&AC(n,e),n.C_.size===0&&(r.Jo()?r.Xo():hi(n)&&n.x_.set("Unknown"))}function fv(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(V.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Bs(t).c_(e)}function AC(t,e){t.O_.Oe(e),Bs(t).l_(e)}function pv(t){t.O_=new ey({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Bs(t).start(),t.x_.p_()}function gv(t){return hi(t)&&!Bs(t).Ho()&&t.C_.size>0}function hi(t){return U(t).v_.size===0}function SC(t){t.O_=void 0}function lU(t){return p(this,null,function*(){t.C_.forEach((e,n)=>{fv(t,e)})})}function dU(t,e){return p(this,null,function*(){SC(t),gv(t)?(t.x_.S_(e),pv(t)):t.x_.set("Unknown")})}function hU(t,e,n){return p(this,null,function*(){if(t.x_.set("Online"),e instanceof Xl&&e.state===2&&e.cause)try{yield function(i,s){return p(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.C_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.C_.delete(a),i.O_.removeTarget(a))})}(t,e)}catch(r){E("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield od(t,r)}else if(e instanceof Ts?t.O_.$e(e):e instanceof Jl?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(V.min()))try{let r=yield TC(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.O_.it(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let l=s.C_.get(u);l&&s.C_.set(u,l.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let l=s.C_.get(c);if(!l)return;s.C_.set(c,l.withResumeToken(Ze.EMPTY_BYTE_STRING,l.snapshotVersion)),AC(s,c);let d=new Ca(l.target,c,u,l.sequenceNumber);fv(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){E("RemoteStore","Failed to raise snapshot:",r),yield od(t,r)}})}function od(t,e,n){return p(this,null,function*(){if(!ka(e))throw e;t.v_.add(1),yield Fa(t),t.x_.set("Offline"),n||(n=()=>TC(t.localStore)),t.asyncQueue.enqueueRetryable(()=>p(this,null,function*(){E("RemoteStore","Retrying IndexedDB access"),yield n(),t.v_.delete(1),yield Id(t)}))})}function RC(t,e){return e().catch(n=>od(t,n,e))}function Ed(t){return p(this,null,function*(){let e=U(t),n=lr(e),r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;fU(e);)try{let i=yield oU(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,pU(e,i)}catch(i){yield od(e,i)}MC(e)&&NC(e)})}function fU(t){return hi(t)&&t.D_.length<10}function pU(t,e){t.D_.push(e);let n=lr(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function MC(t){return hi(t)&&!lr(t).Ho()&&t.D_.length>0}function NC(t){lr(t).start()}function gU(t){return p(this,null,function*(){lr(t).d_()})}function mU(t){return p(this,null,function*(){let e=lr(t);for(let n of t.D_)e.I_(n.mutations)})}function yU(t,e,n){return p(this,null,function*(){let r=t.D_.shift(),i=Ym.from(r,e,n);yield RC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield Ed(t)})}function vU(t,e){return p(this,null,function*(){e&&lr(t).P_&&(yield function(r,i){return p(this,null,function*(){if(function(o){return FV(o)&&o!==y.ABORTED}(i.code)){let s=r.D_.shift();lr(r).Zo(),yield RC(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Ed(r)}})}(t,e)),MC(t)&&NC(t)})}function Fb(t,e){return p(this,null,function*(){let n=U(t);n.asyncQueue.verifyOperationInProgress(),E("RemoteStore","RemoteStore received new credentials");let r=hi(n);n.v_.add(3),yield Fa(n),r&&n.x_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),yield Id(n)})}function _U(t,e){return p(this,null,function*(){let n=U(t);e?(n.v_.delete(2),yield Id(n)):e||(n.v_.add(2),yield Fa(n),n.x_.set("Unknown"))})}function Bs(t){return t.N_||(t.N_=function(n,r,i){let s=U(n);return s.R_(),new My(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:lU.bind(null,t),To:dU.bind(null,t),u_:hU.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.N_.Zo(),gv(t)?pv(t):t.x_.set("Unknown")):(yield t.N_.stop(),SC(t))}))),t.N_}function lr(t){return t.B_||(t.B_=function(n,r,i){let s=U(n);return s.R_(),new Ny(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:gU.bind(null,t),To:vU.bind(null,t),E_:mU.bind(null,t),T_:yU.bind(null,t)}),t.F_.push(e=>p(this,null,function*(){e?(t.B_.Zo(),yield Ed(t)):(yield t.B_.stop(),t.D_.length>0&&(E("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_}var ky=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new $t,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new T(y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function mv(t,e){if(fn("AsyncQueue",`${e}: ${t}`),ka(t))return new T(y.UNAVAILABLE,`${e}: ${t}`);throw t}var ad=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||R.comparator(n.key,r.key):(n,r)=>R.comparator(n.key,r.key),this.keyedMap=ya(),this.sortedSet=new we(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var cd=class{constructor(){this.L_=new we(R.comparator)}track(e){let n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):x():this.L_=this.L_.insert(n,e)}k_(){let e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}},Fs=class t{constructor(e,n,r,i,s,o,a,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,ad.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var Fy=class{constructor(){this.q_=void 0,this.Q_=[]}},Ly=class{constructor(){this.queries=new ur(e=>nC(e),vd),this.onlineState="Unknown",this.K_=new Set}};function wU(t,e){return p(this,null,function*(){let n=U(t),r=e.query,i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Fy),i)try{s.q_=yield n.onListen(r)}catch(o){let a=mv(o,`Initialization of query '${_s(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&yv(n)})}function IU(t,e){return p(this,null,function*(){let n=U(t),r=e.query,i=!1,s=n.queries.get(r);if(s){let o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=s.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)})}function EU(t,e){let n=U(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&yv(n)}function DU(t,e,n){let r=U(t),i=r.queries.get(e);if(i)for(let s of i.Q_)s.onError(n);r.queries.delete(e)}function yv(t){t.K_.forEach(e=>{e.next()})}var Vy=class{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Fs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;let r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;let n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=Fs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}};var ud=class{constructor(e){this.key=e}},ld=class{constructor(e){this.key=e}},Uy=class{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=K(),this.mutatedKeys=K(),this.ua=rC(e),this.ca=new ad(this.ua)}get la(){return this.oa}ha(e,n){let r=n?n.Pa:new cd,i=n?n.ca:this.ca,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{let h=i.get(l),f=_d(this.query,d)?d:null,g=!!h&&this.mutatedKeys.has(h.key),_=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations),m=!1;h&&f?h.data.isEqual(f.data)?g!==_&&(r.track({type:3,doc:f}),m=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),m=!0,(c&&this.ua(f,c)>0||u&&this.ua(f,u)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),m=!0):h&&!f&&(r.track({type:1,doc:h}),m=!0,(c||u)&&(a=!0)),m&&(f?(o=o.add(f),s=_?s.add(l):s.delete(l)):(o=o.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let l=this.query.limitType==="F"?o.last():o.first();o=o.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;let o=e.Pa.k_();o.sort((l,d)=>function(f,g){let _=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return x()}};return _(f)-_(g)}(l.type,d.type)||this.ua(l.doc,d.doc)),this.Ta(r),i=i!=null&&i;let a=n&&!i?this.Ea():[],c=this.aa.size===0&&this.current&&!i?1:0,u=c!==this._a;return this._a=c,o.length!==0||u?{snapshot:new Fs(this.query,e.ca,s,o,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new cd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];let e=this.aa;this.aa=K(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});let n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new ld(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new ud(r))}),n}Ra(e){this.oa=e.hs,this.aa=K();let n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return Fs.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}},jy=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},By=class{constructor(e){this.key=e,this.ma=!1}},$y=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new ur(a=>nC(a),vd),this.pa=new Map,this.ya=new Set,this.wa=new we(R.comparator),this.Sa=new Map,this.ba=new Sa,this.Da={},this.Ca=new Map,this.va=Aa.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}};function TU(t,e){return p(this,null,function*(){let n=OU(t),r,i,s=n.ga.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{let o=yield aU(n.localStore,dn(e)),a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield bU(n,e,r,a==="current",o.resumeToken),n.isPrimaryClient&&bC(n.remoteStore,o)}return i})}function bU(t,e,n,r,i){return p(this,null,function*(){t.Ma=(d,h,f)=>function(_,m,w,P){return p(this,null,function*(){let j=m.view.ha(w);j.Xi&&(j=yield kb(_.localStore,m.query,!1).then(({documents:Oe})=>m.view.ha(Oe,j)));let C=P&&P.targetChanges.get(m.targetId),te=P&&P.targetMismatches.get(m.targetId)!=null,Y=m.view.applyChanges(j,_.isPrimaryClient,C,te);return Vb(_,m.targetId,Y.da),Y.snapshot})}(t,d,h,f);let s=yield kb(t.localStore,e,!0),o=new Uy(e,s.hs),a=o.ha(s.documents),c=ba.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),u=o.applyChanges(a,t.isPrimaryClient,c);Vb(t,n,u.da);let l=new jy(e,n,o);return t.ga.set(e,l),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),u.snapshot})}function CU(t,e){return p(this,null,function*(){let n=U(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(s=>!vd(s,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield by(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),CC(n.remoteStore,r.targetId),Hy(n,r.targetId)}).catch(Oa))):(Hy(n,r.targetId),yield by(n.localStore,r.targetId,!0))})}function AU(t,e,n){return p(this,null,function*(){let r=kU(t);try{let i=yield function(o,a){let c=U(o),u=je.now(),l=a.reduce((f,g)=>f.add(g.key),K()),d,h;return c.persistence.runTransaction("Locally write mutations","readwrite",f=>{let g=Pn(),_=K();return c.os.getEntries(f,l).next(m=>{g=m,g.forEach((w,P)=>{P.isValidDocument()||(_=_.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(f,g)).next(m=>{d=m;let w=[];for(let P of a){let j=kV(P,d.get(P.key).overlayedDocument);j!=null&&w.push(new xn(P.key,j,Kb(j.value.mapValue),ii.exists(!0)))}return c.mutationQueue.addMutationBatch(f,u,w,a)}).next(m=>{h=m;let w=m.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(f,m.batchId,w)})}).then(()=>({batchId:h.batchId,changes:sC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,c){let u=o.Da[o.currentUser.toKey()];u||(u=new we(ee)),u=u.insert(a,c),o.Da[o.currentUser.toKey()]=u}(r,i.batchId,n),yield La(r,i.changes),yield Ed(r.remoteStore)}catch(i){let s=mv(i,"Failed to persist write");n.reject(s)}})}function PC(t,e){return p(this,null,function*(){let n=U(t);try{let r=yield iU(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Sa.get(s);o&&(le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?le(o.ma):i.removedDocuments.size>0&&(le(o.ma),o.ma=!1))}),yield La(n,r,e)}catch(r){yield Oa(r)}})}function Lb(t,e,n){let r=U(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ga.forEach((s,o)=>{let a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let c=U(o);c.onlineState=a;let u=!1;c.queries.forEach((l,d)=>{for(let h of d.Q_)h.U_(a)&&(u=!0)}),u&&yv(c)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function SU(t,e,n){return p(this,null,function*(){let r=U(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Sa.get(e),s=i&&i.key;if(s){let o=new we(R.comparator);o=o.insert(s,Ht.newNoDocument(s,V.min()));let a=K().add(s),c=new Yl(V.min(),new Map,new we(ee),o,a);yield PC(r,c),r.wa=r.wa.remove(s),r.Sa.delete(e),vv(r)}else yield by(r.localStore,e,!1).then(()=>Hy(r,e,n)).catch(Oa)})}function RU(t,e){return p(this,null,function*(){let n=U(t),r=e.batch.batchId;try{let i=yield rU(n.localStore,e);OC(n,r,null),xC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield La(n,i)}catch(i){yield Oa(i)}})}function MU(t,e,n){return p(this,null,function*(){let r=U(t);try{let i=yield function(o,a){let c=U(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,a).next(d=>(le(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);OC(r,e,n),xC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield La(r,i)}catch(i){yield Oa(i)}})}function xC(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function OC(t,e,n){let r=U(t),i=r.Da[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Hy(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||kC(t,r)})}function kC(t,e){t.ya.delete(e.path.canonicalString());let n=t.wa.get(e);n!==null&&(CC(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),vv(t))}function Vb(t,e,n){for(let r of n)r instanceof ud?(t.ba.addReference(r.key,e),NU(t,r)):r instanceof ld?(E("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||kC(t,r.key)):x()}function NU(t,e){let n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(E("SyncEngine","New document in limbo: "+n),t.ya.add(r),vv(t))}function vv(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){let e=t.ya.values().next().value;t.ya.delete(e);let n=new R(me.fromString(e)),r=t.va.next();t.Sa.set(r,new By(n)),t.wa=t.wa.insert(n,r),bC(t.remoteStore,new Ca(dn(eC(n.path)),r,"TargetPurposeLimboResolution",zb._e))}}function La(t,e,n){return p(this,null,function*(){let r=U(t),i=[],s=[],o=[];r.ga.isEmpty()||(r.ga.forEach((a,c)=>{o.push(r.Ma(c,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){i.push(u);let l=Iy.Ki(c.targetId,u);s.push(l)}}))}),yield Promise.all(o),r.fa.u_(i),yield function(c,u){return p(this,null,function*(){let l=U(c);try{yield l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>v.forEach(u,h=>v.forEach(h.qi,f=>l.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>v.forEach(h.Qi,f=>l.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ka(d))throw d;E("LocalStore","Failed to update sequence numbers: "+d)}for(let d of u){let h=d.targetId;if(!d.fromCache){let f=l.ns.get(h),g=f.snapshotVersion,_=f.withLastLimboFreeSnapshotVersion(g);l.ns=l.ns.insert(h,_)}}})}(r.localStore,s))})}function PU(t,e){return p(this,null,function*(){let n=U(t);if(!n.currentUser.isEqual(e)){E("SyncEngine","User change. New user:",e.toKey());let r=yield DC(n.localStore,e);n.currentUser=e,function(s,o){s.Ca.forEach(a=>{a.forEach(c=>{c.reject(new T(y.CANCELLED,o))})}),s.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield La(n,r.us)}})}function xU(t,e){let n=U(t),r=n.Sa.get(e);if(r&&r.ma)return K().add(r.key);{let i=K(),s=n.pa.get(e);if(!s)return i;for(let o of s){let a=n.ga.get(o);i=i.unionWith(a.view.la)}return i}}function OU(t){let e=U(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=PC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SU.bind(null,e),e.fa.u_=EU.bind(null,e.eventManager),e.fa.xa=DU.bind(null,e.eventManager),e}function kU(t){let e=U(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MU.bind(null,e),e}var dd=class{constructor(){this.synchronizeTabs=!1}initialize(e){return p(this,null,function*(){this.serializer=wd(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return nU(this.persistence,new Dy,e.initialUser,this.serializer)}createPersistence(e){return new vy(wy.Hr,this.serializer)}createSharedClientState(e){return new Cy}terminate(){return p(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var qy=class{initialize(e,n){return p(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=PU.bind(null,this.syncEngine),yield _U(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ly}()}createDatastore(e){let n=wd(e.databaseInfo.databaseId),r=function(s){return new Ry(s)}(e.databaseInfo);return function(s,o,a,c){return new Py(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Oy(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Lb(this.syncEngine,n,0),function(){return rd.D()?new rd:new Ay}())}createSyncEngine(e,n){return function(i,s,o,a,c,u,l){let d=new $y(i,s,o,a,c,u);return l&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return p(this,null,function*(){var e;yield function(r){return p(this,null,function*(){let i=U(r);E("RemoteStore","RemoteStore shutting down."),i.v_.add(5),yield Fa(i),i.M_.shutdown(),i.x_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var zy=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var Gy=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xe.UNAUTHENTICATED,this.clientId=$l.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>p(this,null,function*(){E("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(E("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(y.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new $t;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>p(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=mv(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function _m(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),E("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>p(this,null,function*(){r.isEqual(i)||(yield DC(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function Ub(t,e){return p(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield LU(t);E("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fb(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Fb(e.remoteStore,i)),t._onlineComponents=e})}function FU(t){return t.name==="FirebaseError"?t.code===y.FAILED_PRECONDITION||t.code===y.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function LU(t){return p(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){E("FirestoreClient","Using user provided OfflineComponentProvider");try{yield _m(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!FU(n))throw n;Cs("Error using user provided cache. Falling back to memory cache: "+n),yield _m(t,new dd)}}else E("FirestoreClient","Using default OfflineComponentProvider"),yield _m(t,new dd);return t._offlineComponents})}function FC(t){return p(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(E("FirestoreClient","Using user provided OnlineComponentProvider"),yield Ub(t,t._uninitializedComponentsProvider._online)):(E("FirestoreClient","Using default OnlineComponentProvider"),yield Ub(t,new qy))),t._onlineComponents})}function VU(t){return FC(t).then(e=>e.syncEngine)}function UU(t){return p(this,null,function*(){let e=yield FC(t),n=e.eventManager;return n.onListen=TU.bind(null,e.syncEngine),n.onUnlisten=CU.bind(null,e.syncEngine),n})}function jU(t,e,n={}){let r=new $t;return t.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return function(s,o,a,c,u){let l=new zy({next:h=>{o.enqueueAndForget(()=>IU(s,d)),h.fromCache&&c.source==="server"?u.reject(new T(y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(h)},error:h=>u.reject(h)}),d=new Vy(a,l,{includeMetadataChanges:!0,Z_:!0});return wU(s,d)}(yield UU(t),t.asyncQueue,e,n,r)})),r.promise}function LC(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var jb=new Map;function VC(t,e,n){if(!n)throw new T(y.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function BU(t,e,n,r){if(e===!0&&r===!0)throw new T(y.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Bb(t){if(!R.isDocumentKey(t))throw new T(y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function $b(t){if(R.isDocumentKey(t))throw new T(y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Dd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":x()}function hd(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new T(y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Dd(t);throw new T(y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var fd=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new T(y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new T(y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}BU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=LC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new T(y.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Ls=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fd({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new T(y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fd(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wm;switch(r.type){case"firstParty":return new Tm(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new T(y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=jb.get(n);r&&(E("ComponentProvider","Removing Datastore"),jb.delete(n),r.terminate())}(this),Promise.resolve()}};function UC(t,e,n,r={}){var i;let s=(t=hd(t,Ls))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Cs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,c;if(typeof r.mockUserToken=="string")a=r.mockUserToken,c=xe.MOCK_USER;else{a=$u(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new T(y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new xe(u)}t._authCredentials=new Im(new Bl(a,c))}}var Vs=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},Mt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new or(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},or=class t extends Vs{constructor(e,n,r){super(e,n,eC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new R(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function jC(t,e,...n){if(t=ot(t),VC("collection","path",e),t instanceof Ls){let r=me.fromString(e,...n);return $b(r),new or(t,null,r)}{if(!(t instanceof Mt||t instanceof or))throw new T(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return $b(r),new or(t.firestore,null,r)}}function BC(t,e,...n){if(t=ot(t),arguments.length===1&&(e=$l.newId()),VC("doc","path",e),t instanceof Ls){let r=me.fromString(e,...n);return Bb(r),new Mt(t,null,new R(r))}{if(!(t instanceof Mt||t instanceof or))throw new T(y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(me.fromString(e,...n));return Bb(r),new Mt(t.firestore,t instanceof or?t.converter:null,new R(r))}}var Wy=class{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new id(this,"async_queue_retry"),this._u=()=>{let n=vm();n&&E("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};let e=vm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;let n=vm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});let n=new $t;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){return p(this,null,function*(){if(this.eu.length!==0){try{yield this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ka(e))throw e;E("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}})}uu(e){let n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw fn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);let i=ky.createAndSchedule(this,e,n,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&x()}verifyOperationInProgress(){}hu(){return p(this,null,function*(){let e;do e=this.Xa,yield e;while(e!==this.Xa)})}Pu(e){for(let n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){let n=this.nu.indexOf(e);this.nu.splice(n,1)}};var Ra=class extends Ls{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Wy}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||qC(this),this._firestoreClient.terminate()}};function $C(t,e){let n=typeof t=="object"?t:Br(),r=typeof t=="string"?t:e||"(default)",i=Ho(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Bu("firestore");s&&UC(i,...s)}return i}function HC(t){return t._firestoreClient||qC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qC(t){var e,n,r;let i=t._freezeSettings(),s=function(a,c,u,l){return new Pm(a,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,LC(l.experimentalLongPollingOptions),l.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Gy(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ma=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Ze.fromBase64String(e))}catch(n){throw new T(y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Ze.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Na=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new T(y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var pd=class{constructor(e){this._methodName=e}};var Pa=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new T(y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new T(y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ee(this._lat,e._lat)||ee(this._long,e._long)}};var $U=/^__.*__$/,Ky=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xn(e,this.data,this.fieldMask,n,this.fieldTransforms):new di(e,this.data,n,this.fieldTransforms)}};function zC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw x()}}var Qy=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return gd(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(zC(this.du)&&$U.test(e))throw this.pu('Document fields cannot begin and end with "__"')}},Yy=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||wd(e)}Su(e,n,r,i=!1){return new Qy({du:e,methodName:n,wu:r,path:yt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function GC(t){let e=t._freezeSettings(),n=wd(t._databaseId);return new Yy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function HU(t,e,n,r,i,s={}){let o=t.Su(s.merge||s.mergeFields?2:0,e,n,i);QC("Data must be an object, but it was:",o,r);let a=WC(r,o),c,u;if(s.merge)c=new un(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let l=[];for(let d of s.mergeFields){let h=zU(e,d,n);if(!o.contains(h))throw new T(y.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);WU(l,h)||l.push(h)}c=new un(l),u=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=o.fieldTransforms;return new Ky(new Bt(a),c,u)}function qU(t,e,n,r=!1){return _v(n,t.Su(r?4:3,e))}function _v(t,e){if(KC(t=ot(t)))return QC("Unsupported field value:",e,t),WC(t,e);if(t instanceof pd)return function(r,i){if(!zC(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let c=_v(a,i.gu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ot(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=je.fromDate(r);return{timestampValue:ed(i.serializer,s)}}if(r instanceof je){let s=new je(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ed(i.serializer,s)}}if(r instanceof Pa)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ma)return{bytesValue:mC(i.serializer,r._byteString)};if(r instanceof Mt){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hv(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Dd(r)}`)}(t,e)}function WC(t,e){let n={};return Gb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(t,(r,i)=>{let s=_v(i,e.Ru(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function KC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof je||t instanceof Pa||t instanceof Ma||t instanceof Mt||t instanceof pd)}function QC(t,e,n){if(!KC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=Dd(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function zU(t,e,n){if((e=ot(e))instanceof Na)return e._internalPath;if(typeof e=="string")return YC(t,e);throw gd("Field path arguments must be of type string or ",t,!1,void 0,n)}var GU=new RegExp("[~\\*/\\[\\]]");function YC(t,e,n){if(e.search(GU)>=0)throw gd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Na(...e.split("."))._internalPath}catch{throw gd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function gd(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new T(y.INVALID_ARGUMENT,a+t+c)}function WU(t,e){return t.some(n=>n.isEqual(e))}var md=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(JC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},Jy=class extends md{data(){return super.data()}};function JC(t,e){return typeof e=="string"?YC(t,e):e instanceof Na?e._internalPath:e._delegate._internalPath}function KU(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new T(y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var xa=class{},Xy=class extends xa{};function XC(t,e,...n){let r=[];e instanceof xa&&r.push(e),r=r.concat(n),function(s){let o=s.filter(c=>c instanceof ev).length,a=s.filter(c=>c instanceof Zy).length;if(o>1||o>0&&a>0)throw new T(y.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)t=i._apply(t);return t}var Zy=class t extends Xy{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new t(e,n,r)}_apply(e){let n=this._parse(e);return ZC(e._query,n),new Vs(e.firestore,e.converter,zm(e._query,n))}_parse(e){let n=GC(e.firestore);return function(s,o,a,c,u,l,d){let h;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new T(y.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){qb(d,l);let f=[];for(let g of d)f.push(Hb(c,s,g));h={arrayValue:{values:f}}}else h=Hb(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||qb(d,l),h=qU(a,o,d,l==="in"||l==="not-in");return Se.create(u,l,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}};var ev=class t extends xa{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new t(e,n)}_parse(e){let n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qt.create(n,this._getOperator())}_apply(e){let n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i,a=s.getFlattenedFilters();for(let c of a)ZC(o,c),o=zm(o,c)}(e._query,n),new Vs(e.firestore,e.converter,zm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function Hb(t,e,n){if(typeof(n=ot(n))=="string"){if(n==="")throw new T(y.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tC(e)&&n.indexOf("/")!==-1)throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);let r=e.path.child(me.fromString(n));if(!R.isDocumentKey(r))throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vb(t,new R(r))}if(n instanceof Mt)return vb(t,n._key);throw new T(y.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Dd(n)}.`)}function qb(t,e){if(!Array.isArray(t)||t.length===0)throw new T(y.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZC(t,e){let n=function(i,s){for(let o of i)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new T(y.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new T(y.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}var tv=class{convertValue(e,n="none"){switch(ai(e)){case 0:return null;case 1:return e.booleanValue;case 2:return _e(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw x()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return js(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Pa(_e(e.latitude),_e(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=cv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Da(e));default:return null}}convertTimestamp(e){let n=ar(e);return new je(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=me.fromString(e);le(EC(r));let i=new Wl(r.get(1),r.get(3)),s=new R(r.popFirst(5));return i.isEqual(n)||fn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function QU(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ds=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},nv=class extends md{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new bs(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(JC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},bs=class extends nv{data(e={}){return super.data(e)}},rv=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ds(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new bs(this._firestore,this._userDataWriter,r.key,r,new Ds(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new T(y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let c=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new bs(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ds(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),u=-1,l=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),l=o.indexOf(a.doc.key)),{type:YU(a.type),doc:c,oldIndex:u,newIndex:l}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function YU(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return x()}}var iv=class extends tv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ma(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,n)}};function e0(t){t=hd(t,Vs);let e=hd(t.firestore,Ra),n=HC(e),r=new iv(e);return KU(t._query),jU(n,t._query).then(i=>new rv(e,r,t,i))}function t0(t,e){let n=hd(t.firestore,Ra),r=BC(t),i=QU(t.converter,e);return JU(n,[HU(GC(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ii.exists(!1))]).then(()=>r)}function JU(t,e){return function(r,i){let s=new $t;return r.asyncQueue.enqueueAndForget(()=>p(this,null,function*(){return AU(yield VU(r),i,s)})),s.promise}(HC(t),e)}(function(e,n=!0){(function(i){Us=i})(tr),nn(new at("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Ra(new Em(r.getProvider("auth-internal")),new Cm(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new T(y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wl(u.options.projectId,l)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),ge(pb,"4.4.2",e),ge(pb,"4.4.2","esm2017")})();var fi=class{constructor(e){return e}},n0="firestore",wv=class{constructor(){return qr(n0)}};var Iv=new A("angularfire2.firestore-instances");function XU(t,e){let n=qo(n0,t,e);return n&&new fi(n)}function ZU(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new fi(r)}}var ej={provide:wv,deps:[[new He,Iv]]},tj={provide:fi,useFactory:XU,deps:[[new He,Iv],Rn]},nj=(()=>{class t{constructor(){ge("angularfire",nr.full,"fst")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=rt({type:t});static \u0275inj=nt({providers:[tj,ej]})}return t})();function r0(t,...e){return{ngModule:nj,providers:[{provide:Iv,useFactory:ZU(t),multi:!0,deps:[re,bt,zr,Gr,[new He,hs],[new He,Hr],...e]}]}}var i0=rn(t0,!0);var Ev=rn(jC,!0);var s0=rn(e0,!0);var o0=rn($C,!0);var a0=rn(XC,!0);var dr=(()=>{let e=class e{constructor(r,i){this.http=r,this.db=i,this.picto=[],this.selectedPictoSubject=new Re(null),this.selectedPicto$=this.selectedPictoSubject.asObservable()}addPicto(r){return p(this,null,function*(){let i=yield i0(Ev(this.db,"picto"),{name:r.nom,data:r.data})})}getPictos(){return p(this,null,function*(){return(yield s0(a0(Ev(this.db,"picto")))).docs.map(r=>new An(r.id,r.data().name,r.data().data))})}getFromAraasac(r){this.picto=[],this.http.get("https://api.arasaac.org/v1/pictograms/all/fr").subscribe({next:i=>{for(let s=15*r;s<15*r+15;s++){let o=i.at(s);this.getById(o)}}})}getById(r){this.http.get(`https://api.arasaac.org/v1/pictograms/${r._id}?resolution=500&download=false`,{responseType:"blob"}).subscribe(i=>this.addData(i,r.keywords.at(0).keyword))}search(r){this.picto=[],this.http.get(`https://api.arasaac.org/v1/pictograms/fr/search/${r}`).subscribe({next:i=>{for(let s of i)this.getById(s)}})}addData(r,i=""){let s=new FileReader;s.onload=o=>{this.picto.push(new An("",i,o.target.result))},s.readAsDataURL(r)}setSelectedPicto(r){this.selectedPictoSubject.next(r)}};e.\u0275fac=function(i){return new(i||e)(N(Kf),N(fi))},e.\u0275prov=S({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var hr=(()=>{let e=class e{constructor(r){this.pictoService=r,this.picto=new An("","",""),this.canBeDeleted=!1,this.posX=0,this.posY=0,this.haveAdded=new pe,this.haveSelected=new pe,this.removeFromBandePhrase=new pe}onSelectPicto(){this.haveSelected.emit(this.picto)}ngOnInit(){}addPicto(){this.pictoService.addPicto(this.picto),this.haveAdded.emit()}performClick(){this.canBeDeleted?this.removeFromPhrase():this.onSelectPicto()}removeFromPhrase(){this.removeFromBandePhrase.emit(this.picto.id)}};e.\u0275fac=function(i){return new(i||e)(Z(dr))},e.\u0275cmp=$e({type:e,selectors:[["app-picto"]],inputs:{picto:"picto",canBeDeleted:"canBeDeleted"},outputs:{haveAdded:"haveAdded",haveSelected:"haveSelected",removeFromBandePhrase:"removeFromBandePhrase"},standalone:!0,features:[qe],decls:6,vars:3,consts:[["id","picto.id",2,"width","fit-content",3,"click"],["alt","Image",2,"width","100px","height","auto",3,"src"],[2,"text-align","center"],[3,"hidden","click"]],template:function(i,s){i&1&&(ce(0,"div",0),he("click",function(){return s.performClick()}),pt(1,"img",1),ce(2,"p",2),Ct(3),ie(),ce(4,"button",3),he("click",function(){return s.addPicto()}),Ct(5,"+"),ie()()),i&2&&(De(),Te("src",s.picto.data,vI),De(2),Ff(s.picto.nom),De(),Te("hidden",s.picto.id))}});let t=e;return t})();var bd=class{constructor(e){this.pictos=e}};var g0=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Z(qi),Z(Sr))},e.\u0275dir=kt({type:e});let t=e;return t})(),ij=(()=>{let e=class e extends g0{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=ho(e)))(s||e)}})(),e.\u0275dir=kt({type:e,features:[Wi]});let t=e;return t})(),m0=new A("");var sj={provide:m0,useExisting:uo(()=>Rd),multi:!0};function oj(){let t=Cn()?Cn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var aj=new A(""),Rd=(()=>{let e=class e extends g0{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!oj())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Z(qi),Z(Sr),Z(aj,8))},e.\u0275dir=kt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&he("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Lf([sj]),Wi]});let t=e;return t})();var cj=new A(""),uj=new A("");function y0(t){return t!=null}function v0(t){return Nr(t)?fe(t):t}function _0(t){let e={};return t.forEach(n=>{e=n!=null?b(b({},e),n):e}),Object.keys(e).length===0?null:e}function w0(t,e){return e.map(n=>n(t))}function lj(t){return!t.validate}function I0(t){return t.map(e=>lj(e)?e:n=>e.validate(n))}function dj(t){if(!t)return null;let e=t.filter(y0);return e.length==0?null:function(n){return _0(w0(n,e))}}function E0(t){return t!=null?dj(I0(t)):null}function hj(t){if(!t)return null;let e=t.filter(y0);return e.length==0?null:function(n){let r=w0(n,e).map(v0);return Jd(r).pipe(B(_0))}}function D0(t){return t!=null?hj(I0(t)):null}function c0(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function fj(t){return t._rawValidators}function pj(t){return t._rawAsyncValidators}function Dv(t){return t?Array.isArray(t)?t:[t]:[]}function Ad(t,e){return Array.isArray(t)?t.includes(e):t===e}function u0(t,e){let n=Dv(e);return Dv(t).forEach(i=>{Ad(n,i)||n.push(i)}),n}function l0(t,e){return Dv(e).filter(n=>!Ad(t,n))}var Sd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=E0(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=D0(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Tv=class extends Sd{get formDirective(){return null}get path(){return null}},ja=class extends Sd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bv=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},gj={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},w5=ae(b({},gj),{"[class.ng-submitted]":"isSubmitted"}),T0=(()=>{let e=class e extends bv{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Z(ja,2))},e.\u0275dir=kt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&kf("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Wi]});let t=e;return t})();var Va="VALID",Cd="INVALID",$s="PENDING",Ua="DISABLED";function mj(t){return(Md(t)?t.validators:t)||null}function yj(t){return Array.isArray(t)?E0(t):t||null}function vj(t,e){return(Md(e)?e.asyncValidators:t)||null}function _j(t){return Array.isArray(t)?D0(t):t||null}function Md(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Cv=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Va}get invalid(){return this.status===Cd}get pending(){return this.status==$s}get disabled(){return this.status===Ua}get enabled(){return this.status!==Ua}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(u0(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(u0(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(l0(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(l0(e,this._rawAsyncValidators))}hasValidator(e){return Ad(this._rawValidators,e)}hasAsyncValidator(e){return Ad(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=$s,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ua,this.errors=null,this._forEachChild(r=>{r.disable(ae(b({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ae(b({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Va,this._forEachChild(r=>{r.enable(ae(b({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ae(b({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Va||this.status===$s)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ua:Va}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=$s,this._hasOwnPendingAsyncValidator=!0;let n=v0(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new pe,this.statusChanges=new pe}_calculateStatus(){return this._allControlsDisabled()?Ua:this.errors?Cd:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus($s)?$s:this._anyControlsHaveStatus(Cd)?Cd:Va}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Md(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=yj(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_j(this._rawAsyncValidators)}};var b0=new A("CallSetDisabledState",{providedIn:"root",factory:()=>Av}),Av="always";function wj(t,e){return[...e.path,t]}function Ij(t,e,n=Av){Dj(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),Tj(t,e),Cj(t,e),bj(t,e),Ej(t,e)}function d0(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function Ej(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Dj(t,e){let n=fj(t);e.validator!==null?t.setValidators(c0(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=pj(t);e.asyncValidator!==null?t.setAsyncValidators(c0(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();d0(e._rawValidators,i),d0(e._rawAsyncValidators,i)}function Tj(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&C0(t,e)})}function bj(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&C0(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function C0(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Cj(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function Aj(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Sj(t){return Object.getPrototypeOf(t.constructor)===ij}function Rj(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Rd?n=s:Sj(s)?r=s:i=s}),i||r||n||null}function h0(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function f0(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Mj=class extends Cv{constructor(e=null,n,r){super(mj(n),vj(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Md(n)&&(n.nonNullable||n.initialValueIsDefault)&&(f0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){h0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){h0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){f0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Nj={provide:ja,useExisting:uo(()=>Sv)},p0=Promise.resolve(),Sv=(()=>{let e=class e extends ja{constructor(r,i,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Mj,this._registered=!1,this.name="",this.update=new pe,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Rj(this,o)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Aj(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ij(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){p0.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&lu(i);p0.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?wj(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(Z(Tv,9),Z(cj,10),Z(uj,10),Z(m0,10),Z(Gi,8),Z(b0,8))},e.\u0275dir=kt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Dt.None,"disabled","isDisabled"],model:[Dt.None,"ngModel","model"],options:[Dt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lf([Nj]),Wi,Wn]});let t=e;return t})();var Pj=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=rt({type:e}),e.\u0275inj=nt({});let t=e;return t})();var Hs=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:b0,useValue:r.callSetDisabledState??Av}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=rt({type:e}),e.\u0275inj=nt({imports:[Pj]});let t=e;return t})();var A0=(()=>{let e=class e{constructor(r){this.pictoService=r,this.picto=new An("","",""),this.endOfAdd=new pe}addPicto(r){let i=r.target.files[0],s=new FileReader;s.onload=()=>{let o=s.result;this.picto.nom=i.name,this.picto.data=o},i&&s.readAsDataURL(i)}ajouter(){this.pictoService.addPicto(this.picto).then(r=>this.endOfAdd.emit())}};e.\u0275fac=function(i){return new(i||e)(Z(dr))},e.\u0275cmp=$e({type:e,selectors:[["app-add-picto"]],outputs:{endOfAdd:"endOfAdd"},standalone:!0,features:[qe],decls:3,vars:0,consts:[["type","file",3,"change"],[3,"click"]],template:function(i,s){i&1&&(ce(0,"input",0),he("change",function(a){return s.addPicto(a)}),ie(),ce(1,"button",1),he("click",function(){return s.ajouter()}),Ct(2,"Ajouter !"),ie())}});let t=e;return t})();function Oj(t,e){if(t&1){let n=Qi();Rr(0),ce(1,"app-picto",3),he("haveSelected",function(i){ji(n);let s=Yi();return Bi(s.onSelectPicto(i))}),ie(),Mr()}if(t&2){let n=e.$implicit;De(),Te("picto",n)}}var Nd=(()=>{let e=class e{constructor(r){this.pictoService=r,this.pageNumber=0,this.colors=["red","green","yellow","purple"],this.intercallaire=new bd([]),this.putOnBandePhrase=new pe}ngOnInit(){this.readPicto()}ngOnChanges(r){this.readPicto()}readPicto(){return p(this,null,function*(){let r=15*this.pageNumber;this.listPicto=yield this.pictoService.getPictos(),this.listPicto=this.listPicto.slice(r,r+15)})}haveAddedPicto(){this.readPicto()}onSelectPicto(r){r&&this.putOnBandePhrase.emit(r)}};e.\u0275fac=function(i){return new(i||e)(Z(dr))},e.\u0275cmp=$e({type:e,selectors:[["app-intercallaire"]],inputs:{pageNumber:"pageNumber"},outputs:{putOnBandePhrase:"putOnBandePhrase"},standalone:!0,features:[Wn,qe],decls:4,vars:1,consts:[[1,"container",2,"background-color","yellow"],[1,"grid-container"],[4,"ngFor","ngForOf"],[3,"picto","haveSelected"]],template:function(i,s){i&1&&(ce(0,"body")(1,"div",0)(2,"div",1),Xt(3,Oj,2,1,"ng-container",2),ie()()()),i&2&&(De(3),Te("ngForOf",s.listPicto))},dependencies:[Vt,Zi,hr,Hs],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-template-rows:repeat(3,auto);gap:10px}.left-button[_ngcontent-%COMP%]{margin-left:10px}.right-button[_ngcontent-%COMP%]{margin-right:10px}"]});let t=e;return t})();function kj(t,e){if(t&1){let n=Qi();Rr(0),ce(1,"app-picto",2),he("removeFromBandePhrase",function(i){ji(n);let s=Yi();return Bi(s.removeFromPictos(i))}),ie(),Mr()}if(t&2){let n=e.$implicit;De(),Te("picto",n)("canBeDeleted",!0)}}var S0=(()=>{let e=class e{constructor(){this.pictos=[]}removeFromPictos(r){let i=this.pictos.findIndex(s=>s.id==r);i!=-1&&this.pictos.splice(i,1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-bande-phrase"]],inputs:{pictos:"pictos"},standalone:!0,features:[qe],decls:3,vars:1,consts:[[1,"container",2,"width","610px","height","150px","background-color","blue"],[4,"ngFor","ngForOf"],[3,"picto","canBeDeleted","removeFromBandePhrase"]],template:function(i,s){i&1&&(ce(0,"body")(1,"div",0),Xt(2,kj,2,2,"ng-container",1),ie()()),i&2&&(De(2),Te("ngForOf",s.pictos))},dependencies:[hr,Vt,Zi],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}"]});let t=e;return t})();function Fj(t,e){t&1&&pt(0,"app-add-picto")}function Lj(t,e){if(t&1){let n=Qi();Rr(0),ce(1,"app-picto",8),he("haveAdded",function(){ji(n);let i=Yi();return Bi(i.haveAddedPicto())}),ie(),Mr()}if(t&2){let n=e.$implicit;De(),Te("picto",n)}}var R0=(()=>{let e=class e{constructor(r){this.pictoService=r,this.search="",this.showAddPictoFromFile=!1}addPictoFromFile(){this.showAddPictoFromFile=!this.showAddPictoFromFile}recherche(){this.pictoService.search(this.search),this.search=""}haveAddedPicto(){}};e.\u0275fac=function(i){return new(i||e)(Z(dr))},e.\u0275cmp=$e({type:e,selectors:[["app-param-classeur"]],standalone:!0,features:[qe],decls:12,vars:4,consts:[[1,"container",2,"padding-bottom","10%"],[1,"container"],[3,"click"],[4,"ngIf"],["type","text",3,"ngModel","ngModelChange"],[3,"disabled","click"],[1,"grid-container"],[4,"ngFor","ngForOf"],[3,"picto","haveAdded"]],template:function(i,s){i&1&&(ce(0,"div",0)(1,"div",1)(2,"button",2),he("click",function(){return s.addPictoFromFile()}),Ct(3,"Ajouter un picto a partir de vos fichiers"),ie(),Xt(4,Fj,1,0,"app-add-picto",3),ie(),ce(5,"label"),Ct(6,"Recherche : "),ie(),ce(7,"input",4),he("ngModelChange",function(a){return s.search=a}),ie(),ce(8,"button",5),he("click",function(){return s.recherche()}),Ct(9,"Rechercher"),ie()(),ce(10,"div",6),Xt(11,Lj,2,1,"ng-container",7),ie()),i&2&&(De(4),Te("ngIf",s.showAddPictoFromFile),De(3),Te("ngModel",s.search),De(),Te("disabled",!s.search),De(3),Te("ngForOf",s.pictoService.picto))},dependencies:[hr,Hs,Rd,T0,Sv,Vt,Zi,pu,A0],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(5,1fr);grid-template-rows:repeat(3,auto);gap:10px}"]});let t=e;return t})();function Vj(t,e){t&1&&(ce(0,"div"),pt(1,"app-param-classeur"),ie())}var M0=(()=>{let e=class e{constructor(){this.listPictoPhrase=[],this.showSettings=!1,this.page=0}ngOnInit(){}sendToBandePhrase(r){this.listPictoPhrase.push(r)}changePage(r){this.page+=r}openSettings(){this.showSettings=!this.showSettings}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-classeur"]],standalone:!0,features:[qe],decls:11,vars:4,consts:[[1,"horizontal-container"],[1,"horizontal-button",3,"disabled","click"],[1,"horizontal-intercallaire",3,"pageNumber","putOnBandePhrase"],[3,"pictos"],[1,"horizontal-button",3,"click"],[1,"fas","fa-cog"],[4,"ngIf"]],template:function(i,s){i&1&&(ce(0,"div",0)(1,"button",1),he("click",function(){return s.changePage(-1)}),Ct(2,"\u25C0"),ie(),ce(3,"div")(4,"app-intercallaire",2),he("putOnBandePhrase",function(a){return s.sendToBandePhrase(a)}),ie(),pt(5,"app-bande-phrase",3),ie(),ce(6,"button",4),he("click",function(){return s.changePage(1)}),Ct(7,"\u25B6"),ie()(),ce(8,"button",4),he("click",function(){return s.openSettings()}),pt(9,"i",5),ie(),Xt(10,Vj,2,0,"div",6)),i&2&&(De(),Te("disabled",s.page==0),De(3),Te("pageNumber",s.page),De(),Te("pictos",s.listPictoPhrase),De(5),Te("ngIf",s.showSettings))},dependencies:[Nd,S0,R0,Vt,pu],styles:[".horizontal-container[_ngcontent-%COMP%]{display:flex;align-items:center}.horizontal-button[_ngcontent-%COMP%]{margin:0 10px}.horizontal-intercallaire[_ngcontent-%COMP%]{flex:1}"]});let t=e;return t})();var N0=[{path:"picto",component:hr},{path:"classeur",component:M0},{path:"intercallaire",component:Nd}];var L0="firebasestorage.googleapis.com",Uj="storageBucket",jj=2*60*1e3,Bj=10*60*1e3;var gn=class t extends st{constructor(e,n,r=0){super(Rv(e),`Firebase Storage: ${n} (${Rv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Rv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},kn=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(kn||{});function Rv(t){return"storage/"+t}function $j(){let t="An unknown error occurred, please check the error payload for server response.";return new gn(kn.UNKNOWN,t)}function Hj(){return new gn(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qj(){return new gn(kn.CANCELED,"User canceled the upload/download.")}function zj(t){return new gn(kn.INVALID_URL,"Invalid URL '"+t+"'.")}function Gj(t){return new gn(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function P0(t){return new gn(kn.INVALID_ARGUMENT,t)}function V0(){return new gn(kn.APP_DELETED,"The Firebase app was deleted.")}function Wj(t){return new gn(kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}var On=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw Gj(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),c={bucket:1,path:3};function u(C){C.path_=decodeURIComponent(C.path)}let l="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${d}/${l}/b/${i}/o${h}`,"i"),g={bucket:1,path:3},_=n===L0?"(?:storage.googleapis.com|storage.cloud.google.com)":n,m="([^?#]*)",w=new RegExp(`^https?://${_}/${i}/${m}`,"i"),j=[{regex:a,indices:c,postModify:s},{regex:f,indices:g,postModify:u},{regex:w,indices:{bucket:1,path:2},postModify:u}];for(let C=0;C<j.length;C++){let te=j[C],Y=te.regex.exec(e);if(Y){let Oe=Y[te.indices.bucket],vt=Y[te.indices.path];vt||(vt=""),r=new t(Oe,vt),te.postModify(r);break}}if(r==null)throw zj(e);return r}},Mv=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function Kj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return a===2}let u=!1;function l(...m){u||(u=!0,e.apply(null,m))}function d(m){i=setTimeout(()=>{i=null,t(f,c())},m)}function h(){s&&clearTimeout(s)}function f(m,...w){if(u){h();return}if(m){h(),l.call(null,m,...w);return}if(c()||o){h(),l.call(null,m,...w);return}r<64&&(r*=2);let j;a===1?(a=2,j=0):j=(r+Math.random())*1e3,d(j)}let g=!1;function _(m){g||(g=!0,h(),!u&&(i!==null?(m||(a=2),clearTimeout(i),d(0)):m||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function Qj(t){t(!1)}function Yj(t){return t!==void 0}function x0(t,e,n,r){if(r<e)throw P0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw P0(`Invalid value for '${t}'. Expected ${n} or less.`)}function Jj(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Nv=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(Nv||{});function Xj(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var Pv=class{constructor(e,n,r,i,s,o,a,c,u,l,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=c,this.timeout_=u,this.progressCallback_=l,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,g)=>{this.resolve_=f,this.reject_=g,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new qs(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let c=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===Nv.NO_ERROR,c=s.getStatus();if(!a||Xj(c,this.additionalRetryCodes_)&&this.retry){let l=s.getErrorCode()===Nv.ABORT;r(!1,new qs(!1,null,l));return}let u=this.successCodes_.indexOf(c)!==-1;r(!0,new qs(u,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let c=this.callback_(a,a.getResponse());Yj(c)?s(c):s()}catch(c){o(c)}else if(a!==null){let c=$j();c.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,c)):o(c)}else if(i.canceled){let c=this.appDelete_?V0():qj();o(c)}else{let c=Hj();o(c)}};this.canceled_?n(!1,new qs(!1,null,!0)):this.backoffId_=Kj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Qj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},qs=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function Zj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function e2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function t2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function n2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function r2(t,e,n,r,i,s,o=!0){let a=Jj(t.urlParams),c=t.url+a,u=Object.assign({},t.headers);return t2(u,e),Zj(u,n),e2(u,s),n2(u,r),new Pv(c,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function i2(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function s2(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}var o8=256*1024;var xv=class t{constructor(e,n){this._service=e,n instanceof On?this._location=n:this._location=On.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new On(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s2(this._location.path)}get storage(){return this._service}get parent(){let e=i2(this._location.path);if(e===null)return null;let n=new On(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Wj(e)}};function O0(t,e){let n=e?.[Uj];return n==null?null:On.makeFromBucketSpec(n,t)}function o2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:$u(i,t.app.options.projectId))}var Ov=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=L0,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=jj,this._maxUploadRetryTime=Bj,this._requests=new Set,i!=null?this._bucket=On.makeFromBucketSpec(i,this._host):this._bucket=O0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=On.makeFromBucketSpec(this._url,e):this._bucket=O0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){x0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){x0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return p(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return p(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xv(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new Mv(V0());{let o=r2(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return p(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},k0="@firebase/storage",F0="0.12.1";var U0="storage";function j0(t=Br(),e){t=ot(t);let r=Ho(t,U0).getImmediate({identifier:e}),i=Bu("storage");return i&&B0(r,...i),r}function B0(t,e,n,r={}){o2(t,e,n,r)}function a2(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Ov(n,r,i,e,tr)}function c2(){nn(new at(U0,a2,"PUBLIC").setMultipleInstances(!0)),ge(k0,F0,""),ge(k0,F0,"esm2017")}c2();var Ba=class{constructor(e){return e}},$0="storage",kv=class{constructor(){return qr($0)}};var Fv=new A("angularfire2.storage-instances");function u2(t,e){let n=qo($0,t,e);return n&&new Ba(n)}function l2(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Ba(r)}}var d2={provide:kv,deps:[[new He,Fv]]},h2={provide:Ba,useFactory:u2,deps:[[new He,Fv],Rn]},f2=(()=>{class t{constructor(){ge("angularfire",nr.full,"gcs")}static \u0275fac=function(r){return new(r||t)};static \u0275mod=rt({type:t});static \u0275inj=nt({providers:[h2,d2]})}return t})();function H0(t,...e){return{ngModule:f2,providers:[{provide:Fv,useFactory:l2(t),multi:!0,deps:[re,bt,zr,Gr,[new He,hs],[new He,Hr],...e]}]}}var q0=rn(j0,!0);var z0={production:!1,firebaseConfig:{apiKey:"AIzaSyBdBX7_JnzbNWaHP_m3EEvG6RvtXs5tcrk",authDomain:"pecs-ee8b1.firebaseapp.com",projectId:"pecs-ee8b1",storageBucket:"pecs-ee8b1.appspot.com",messagingSenderId:"269750166393",appId:"1:269750166393:web:f1191baae1f9c7d44f45a8",measurementId:"G-JMFELWBGRY"}};var G0={providers:[aD(N0),mE(yE()),hf([PD(()=>Gu(z0.firebaseConfig)),r0(()=>o0()),H0(()=>q0())])]};var W0=(()=>{let e=class e{constructor(){this.title="firebase-cms"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=$e({type:e,selectors:[["app-root"]],standalone:!0,features:[qe],decls:1,vars:0,template:function(i,s){i&1&&pt(0,"router-outlet")},dependencies:[Vt,Lp,Hs]});let t=e;return t})();bE(W0,G0).catch(t=>console.error(t));
